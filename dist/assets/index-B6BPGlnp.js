import{r as x,a as Ze,R as Je}from"./vendor-DsceW-4w.js";import{c as he}from"./state-DC_EMq_D.js";import{X as Ve}from"./db-2jmnBxhj.js";import{B as se,X as G,C as Ge,T as re,a as Qe,I as xe,A as $e,b as Oe,c as Pe,d as me,e as ne,P as ke,W as ge,f as He,V as Se,S as Ce,M as Xe,g as We,G as De,h as et,i as te,j as Be,k as tt,l as st,m as nt,n as at,o as rt,p as it,q as ot,F as je,r as lt,s as _e,H as Ee,t as ie,u as ct,v as dt,w as ut,R as Ue,L as mt,x as Te,y as ht,z as xt,D as gt,E as ft,J as Q,K as fe,N as Me,O as be,Z as pt,Q as bt,U as yt,Y as vt,_ as wt,$ as jt,a0 as Nt,a1 as kt,a2 as St,a3 as Ct,a4 as Dt,a5 as Et,a6 as Mt,a7 as zt,a8 as Ft,a9 as Wt,aa as Tt,ab as It}from"./icons-B44IBqOl.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Ye={exports:{}},pe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At=x,Lt=Symbol.for("react.element"),Rt=Symbol.for("react.fragment"),$t=Object.prototype.hasOwnProperty,Ot=At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pt={key:!0,ref:!0,__self:!0,__source:!0};function Ke(n,r,s){var t,a={},i=null,c=null;s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(c=r.ref);for(t in r)$t.call(r,t)&&!Pt.hasOwnProperty(t)&&(a[t]=r[t]);if(n&&n.defaultProps)for(t in r=n.defaultProps,r)a[t]===void 0&&(a[t]=r[t]);return{$$typeof:Lt,type:n,key:i,ref:c,props:a,_owner:Ot.current}}pe.Fragment=Rt;pe.jsx=Ke;pe.jsxs=Ke;Ye.exports=pe;var e=Ye.exports,Ne={},Ie=Ze;Ne.createRoot=Ie.createRoot,Ne.hydrateRoot=Ie.hydrateRoot;const Ht={},Bt=n=>(r,s,t)=>{const a=t.subscribe;return t.subscribe=(c,m,f)=>{let l=c;if(m){const w=f?.equalityFn||Object.is;let g=c(t.getState());l=E=>{const d=c(E);if(!w(g,d)){const N=g;m(g=d,N)}},f?.fireImmediately&&m(g,g)}return a(l)},n(r,s,t)},_t=Bt;function Ut(n,r){let s;try{s=n()}catch{return}return{getItem:a=>{var i;const c=f=>f===null?null:JSON.parse(f,void 0),m=(i=s.getItem(a))!=null?i:null;return m instanceof Promise?m.then(c):c(m)},setItem:(a,i)=>s.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>s.removeItem(a)}}const ae=n=>r=>{try{const s=n(r);return s instanceof Promise?s:{then(t){return ae(t)(s)},catch(t){return this}}}catch(s){return{then(t){return this},catch(t){return ae(t)(s)}}}},Yt=(n,r)=>(s,t,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:T=>T,version:0,merge:(T,I)=>({...I,...T}),...r},c=!1;const m=new Set,f=new Set;let l;try{l=i.getStorage()}catch{}if(!l)return n((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...T)},t,a);const w=ae(i.serialize),g=()=>{const T=i.partialize({...t()});let I;const b=w({state:T,version:i.version}).then(S=>l.setItem(i.name,S)).catch(S=>{I=S});if(I)throw I;return b},E=a.setState;a.setState=(T,I)=>{E(T,I),g()};const d=n((...T)=>{s(...T),g()},t,a);let N;const y=()=>{var T;if(!l)return;c=!1,m.forEach(b=>b(t()));const I=((T=i.onRehydrateStorage)==null?void 0:T.call(i,t()))||void 0;return ae(l.getItem.bind(l))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var S;return N=i.merge(b,(S=t())!=null?S:d),s(N,!0),g()}).then(()=>{I?.(N,void 0),c=!0,f.forEach(b=>b(N))}).catch(b=>{I?.(void 0,b)})};return a.persist={setOptions:T=>{i={...i,...T},T.getStorage&&(l=T.getStorage())},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>c,onHydrate:T=>(m.add(T),()=>{m.delete(T)}),onFinishHydration:T=>(f.add(T),()=>{f.delete(T)})},y(),N||d},Kt=(n,r)=>(s,t,a)=>{let i={storage:Ut(()=>localStorage),partialize:y=>y,version:0,merge:(y,T)=>({...T,...y}),...r},c=!1;const m=new Set,f=new Set;let l=i.storage;if(!l)return n((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...y)},t,a);const w=()=>{const y=i.partialize({...t()});return l.setItem(i.name,{state:y,version:i.version})},g=a.setState;a.setState=(y,T)=>{g(y,T),w()};const E=n((...y)=>{s(...y),w()},t,a);a.getInitialState=()=>E;let d;const N=()=>{var y,T;if(!l)return;c=!1,m.forEach(b=>{var S;return b((S=t())!=null?S:E)});const I=((T=i.onRehydrateStorage)==null?void 0:T.call(i,(y=t())!=null?y:E))||void 0;return ae(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var S;const[M,j]=b;if(d=i.merge(j,(S=t())!=null?S:E),s(d,!0),M)return w()}).then(()=>{I?.(d,void 0),d=t(),c=!0,f.forEach(b=>b(d))}).catch(b=>{I?.(void 0,b)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(l=y.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>N(),hasHydrated:()=>c,onHydrate:y=>(m.add(y),()=>{m.delete(y)}),onFinishHydration:y=>(f.add(y),()=>{f.delete(y)})},i.skipHydration||N(),d||E},qt=(n,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((Ht?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Yt(n,r)):Kt(n,r),ze=qt,ye={theme:{mode:"light",accentColor:"#E95420",fontSize:"normal",reducedMotion:!1,highContrast:!1},dock:{position:"left",size:"normal",autoHide:!1,pinnedApps:["files","terminal","textedit","calculator","settings"]},language:"es",timezone:"America/Argentina/Buenos_Aires",use24HourFormat:!0,wallpaper:"/wallpapers/ubuntu-default.jpg",shortcuts:{overview:"Super",terminal:"Ctrl+Alt+T",files:"Super+E",screenshot:"PrtSc",lock:"Super+L","workspace-left":"Ctrl+Alt+Left","workspace-right":"Ctrl+Alt+Right","window-close":"Alt+F4","window-minimize":"Super+H","window-maximize":"Super+Up","alt-tab":"Alt+Tab","alt-grave":"Alt+`"}},J=he()(ze((n,r)=>({settings:ye,setThemeMode:s=>{n(a=>({settings:{...a.settings,theme:{...a.settings.theme,mode:s}}}));const t=document.documentElement;if(s==="dark")t.classList.add("dark");else if(s==="light")t.classList.remove("dark");else{const a=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",a)}},setAccentColor:s=>{n(t=>({settings:{...t.settings,theme:{...t.settings.theme,accentColor:s}}})),document.documentElement.style.setProperty("--accent",s)},setFontSize:s=>{n(a=>({settings:{...a.settings,theme:{...a.settings.theme,fontSize:s}}}));const t=document.body;t.classList.remove("font-size-small","font-size-normal","font-size-large","font-size-xl"),t.classList.add(`font-size-${s}`)},setReducedMotion:s=>{n(t=>({settings:{...t.settings,theme:{...t.settings.theme,reducedMotion:s}}})),document.documentElement.style.setProperty("--animation-duration",s?"0.01ms":"0.3s")},setHighContrast:s=>{n(t=>({settings:{...t.settings,theme:{...t.settings.theme,highContrast:s}}})),document.documentElement.classList.toggle("high-contrast",s)},setDockPosition:s=>{n(t=>({settings:{...t.settings,dock:{...t.settings.dock,position:s}}}))},setDockSize:s=>{n(t=>({settings:{...t.settings,dock:{...t.settings.dock,size:s}}}))},setDockAutoHide:s=>{n(t=>({settings:{...t.settings,dock:{...t.settings.dock,autoHide:s}}}))},setPinnedApps:s=>{n(t=>({settings:{...t.settings,dock:{...t.settings.dock,pinnedApps:s}}}))},addPinnedApp:s=>{const{settings:t}=r();t.dock.pinnedApps.includes(s)||n(a=>({settings:{...a.settings,dock:{...a.settings.dock,pinnedApps:[...a.settings.dock.pinnedApps,s]}}}))},removePinnedApp:s=>{n(t=>({settings:{...t.settings,dock:{...t.settings.dock,pinnedApps:t.settings.dock.pinnedApps.filter(a=>a!==s)}}}))},setLanguage:s=>{n(t=>({settings:{...t.settings,language:s}})),document.documentElement.lang=s},setTimezone:s=>{n(t=>({settings:{...t.settings,timezone:s}}))},setUse24HourFormat:s=>{n(t=>({settings:{...t.settings,use24HourFormat:s}}))},setWallpaper:s=>{n(a=>({settings:{...a.settings,wallpaper:s}}));const t=document.querySelector(".desktop");t&&(t.style.backgroundImage=`url(${s})`)},setShortcut:(s,t)=>{n(a=>({settings:{...a.settings,shortcuts:{...a.settings.shortcuts,[s]:t}}}))},resetToDefaults:()=>{n({settings:ye});const s=document.documentElement,t=document.body;s.className="",t.className="font-ubuntu overflow-hidden font-size-normal",s.style.removeProperty("--accent"),s.style.removeProperty("--animation-duration"),document.documentElement.lang=ye.language},exportSettings:()=>{const{settings:s}=r();return JSON.stringify(s,null,2)},importSettings:s=>{try{const t=JSON.parse(s);if(!t.theme||!t.dock)return!1;n({settings:t});const{setThemeMode:a,setAccentColor:i,setFontSize:c,setReducedMotion:m,setHighContrast:f,setWallpaper:l,setLanguage:w}=r();return a(t.theme.mode),i(t.theme.accentColor),c(t.theme.fontSize),m(t.theme.reducedMotion),f(t.theme.highContrast),l(t.wallpaper),w(t.language),!0}catch(t){return console.error("Failed to import settings:",t),!1}}}),{name:"daveos-settings",version:1}));if(typeof window<"u"){const n=J.getState(),{setThemeMode:r,setAccentColor:s,setFontSize:t,setReducedMotion:a,setHighContrast:i,setWallpaper:c,setLanguage:m}=n;r(n.settings.theme.mode),s(n.settings.theme.accentColor),t(n.settings.theme.fontSize),a(n.settings.theme.reducedMotion),i(n.settings.theme.highContrast),c(n.settings.wallpaper),m(n.settings.language),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",l=>{J.getState().settings.theme.mode==="auto"&&document.documentElement.classList.toggle("dark",l.matches)})}const Ae={width:800,height:600},ce={x:100,y:100},de=30,q=he()(_t((n,r)=>({windows:{},focusedWindow:null,nextZIndex:100,generateWindowId:()=>`window_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,openWindow:s=>{const t=r(),a=s.id||t.generateWindowId();if(s.appId){const l=t.getWindowsByApp(s.appId);if(l[0]&&l.length>0){const g=l[0];return t.focusWindow(g.id),g.id}}const c=t.getVisibleWindows().length,m={x:ce.x+c*de,y:ce.y+c*de},f={id:a,appId:s.appId,title:s.title,bounds:{...m,width:s.bounds?.width||Ae.width,height:s.bounds?.height||Ae.height},minimized:!1,maximized:!1,focused:!0,zIndex:t.nextZIndex,resizable:s.resizable??!0,movable:s.movable??!0,closable:s.closable??!0,minimizable:s.minimizable??!0,maximizable:s.maximizable??!0,visible:s.visible??!0,workspace:s.workspace||1};return n(l=>({windows:{...l.windows,[a]:f},focusedWindow:a,nextZIndex:l.nextZIndex+1})),a},closeWindow:s=>{n(t=>{const{[s]:a,...i}=t.windows,c=t.focusedWindow===s?Object.keys(i)[0]||null:t.focusedWindow;return{windows:i,focusedWindow:c}})},focusWindow:s=>{const t=r(),a=t.windows[s];a&&(n(i=>({windows:{...i.windows,[s]:{...a,focused:!0,minimized:!1,zIndex:i.nextZIndex}},focusedWindow:s,nextZIndex:i.nextZIndex+1})),Object.keys(t.windows).forEach(i=>{i!==s&&t.windows[i].focused&&n(c=>({windows:{...c.windows,[i]:{...c.windows[i],focused:!1}}}))}))},minimizeWindow:s=>{n(t=>{const a=t.windows[s];if(!a)return t;const i=t.focusedWindow===s?Object.keys(t.windows).find(c=>c!==s&&!t.windows[c].minimized)||null:t.focusedWindow;return{windows:{...t.windows,[s]:{...a,minimized:!0,focused:!1}},focusedWindow:i}})},maximizeWindow:s=>{n(t=>{const a=t.windows[s];return a?{windows:{...t.windows,[s]:{...a,maximized:!a.maximized}}}:t})},restoreWindow:s=>{n(t=>{const a=t.windows[s];return a?{windows:{...t.windows,[s]:{...a,minimized:!1,maximized:!1}}}:t})},moveWindow:(s,t)=>{n(a=>{const i=a.windows[s];return!i||!i.movable?a:{windows:{...a.windows,[s]:{...i,bounds:{...i.bounds,...t}}}}})},resizeWindow:(s,t)=>{n(a=>{const i=a.windows[s];return!i||!i.resizable?a:{windows:{...a.windows,[s]:{...i,bounds:{...i.bounds,...t}}}}})},updateWindowBounds:(s,t)=>{n(a=>{const i=a.windows[s];return i?{windows:{...a.windows,[s]:{...i,bounds:t}}}:a})},setWindowVisibility:(s,t)=>{n(a=>{const i=a.windows[s];return i?{windows:{...a.windows,[s]:{...i,visible:t}}}:a})},moveWindowToWorkspace:(s,t)=>{n(a=>{const i=a.windows[s];return i?{windows:{...a.windows,[s]:{...i,workspace:t}}}:a})},getWindow:s=>r().windows[s],getWindowsByApp:s=>{const{windows:t}=r();return Object.values(t).filter(a=>a.appId===s)},getWindowsByWorkspace:s=>{const{windows:t}=r();return Object.values(t).filter(a=>a.workspace===s)},getFocusedWindow:()=>{const{focusedWindow:s,windows:t}=r();return s?t[s]:void 0},getVisibleWindows:()=>{const{windows:s}=r();return Object.values(s).filter(t=>t.visible&&!t.minimized).sort((t,a)=>t.zIndex-a.zIndex)},getNextWindowInStack:s=>{const t=r().getVisibleWindows(),a=t.findIndex(c=>c.id===s);if(a===-1)return;const i=(a+1)%t.length;return t[i]},bringToFront:s=>{r().focusWindow(s)},sendToBack:s=>{n(t=>{const a=t.windows[s];return a?{windows:{...t.windows,[s]:{...a,zIndex:1}}}:t})},cascadeWindows:()=>{const{windows:s}=r();Object.values(s).filter(a=>a.visible&&!a.minimized).forEach((a,i)=>{const c={x:ce.x+i*de,y:ce.y+i*de};r().moveWindow(a.id,c)})},tileWindows:s=>{const{windows:t}=r(),a=Object.values(t).filter(m=>m.visible&&!m.minimized);if(a.length===0)return;const i=window.innerWidth-64,c=window.innerHeight-48;switch(s){case"horizontal":{const m=i/a.length;a.forEach((f,l)=>{r().updateWindowBounds(f.id,{x:64+l*m,y:48,width:m,height:c})});break}case"vertical":{const m=c/a.length;a.forEach((f,l)=>{r().updateWindowBounds(f.id,{x:64,y:48+l*m,width:i,height:m})});break}case"grid":{const m=Math.ceil(Math.sqrt(a.length)),f=Math.ceil(a.length/m),l=i/m,w=c/f;a.forEach((g,E)=>{const d=E%m,N=Math.floor(E/m);r().updateWindowBounds(g.id,{x:64+d*l,y:48+N*w,width:l,height:w})});break}}}}))),Le=[{id:1,name:"Workspace 1",windows:[],active:!0},{id:2,name:"Workspace 2",windows:[],active:!1}],Z=he()(ze((n,r)=>({workspaces:Le,currentWorkspace:1,isOverviewOpen:!1,createWorkspace:s=>{const{workspaces:t}=r(),a=Math.max(...t.map(c=>c.id))+1,i={id:a,name:s||`Workspace ${a}`,windows:[],active:!1};return n(c=>({workspaces:[...c.workspaces,i]})),a},deleteWorkspace:s=>{const{workspaces:t,currentWorkspace:a,canDeleteWorkspace:i}=r();if(!i(s))return;const c=t.find(f=>f.id===s);if(!c)return;const m=t.find(f=>f.id!==s);if(m&&c.windows.length>0){const f=q.getState();c.windows.forEach(l=>{f.moveWindowToWorkspace(l,m.id)}),n(l=>({workspaces:l.workspaces.map(w=>w.id===m.id?{...w,windows:[...w.windows,...c.windows]}:w)}))}n(f=>({workspaces:f.workspaces.filter(l=>l.id!==s),currentWorkspace:a===s?m?.id||1:a}))},switchToWorkspace:s=>{const{workspaces:t}=r();if(!t.find(c=>c.id===s))return;n(c=>({currentWorkspace:s,workspaces:c.workspaces.map(m=>({...m,active:m.id===s}))}));const i=q.getState();Object.values(i.windows).forEach(c=>{i.setWindowVisibility(c.id,c.workspace===s)})},renameWorkspace:(s,t)=>{n(a=>({workspaces:a.workspaces.map(i=>i.id===s?{...i,name:t}:i)}))},moveWindowToWorkspace:(s,t)=>{const a=q.getState(),i=a.getWindow(s);if(!i)return;const c=i.workspace;a.moveWindowToWorkspace(s,t),n(m=>({workspaces:m.workspaces.map(f=>f.id===c?{...f,windows:f.windows.filter(l=>l!==s)}:f.id===t?{...f,windows:[...f.windows,s]}:f)})),a.setWindowVisibility(s,t===r().currentWorkspace)},openOverview:()=>{n({isOverviewOpen:!0})},closeOverview:()=>{n({isOverviewOpen:!1})},toggleOverview:()=>{n(s=>({isOverviewOpen:!s.isOverviewOpen}))},saveSession:()=>{const{workspaces:s,currentWorkspace:t}=r(),a=q.getState(),i=J.getState(),c={windows:Object.values(a.windows),workspaces:s,currentWorkspace:t,settings:i.settings,timestamp:new Date};localStorage.setItem("daveos-session",JSON.stringify(c))},restoreSession:s=>{const{windows:t,workspaces:a,currentWorkspace:i,settings:c}=s;J.getState().importSettings(JSON.stringify(c)),n({workspaces:a.map(l=>({...l,active:l.id===i})),currentWorkspace:i});const f=q.getState();t.forEach(l=>{f.openWindow({...l,id:l.id,visible:l.workspace===i})})},clearSession:()=>{localStorage.removeItem("daveos-session"),n({workspaces:Le,currentWorkspace:1,isOverviewOpen:!1});const s=q.getState();Object.keys(s.windows).forEach(t=>{s.closeWindow(t)})},getSessionData:()=>{const{workspaces:s,currentWorkspace:t}=r(),a=q.getState(),i=J.getState();return{windows:Object.values(a.windows),workspaces:s,currentWorkspace:t,settings:i.settings,timestamp:new Date}},getActiveWorkspace:()=>{const{workspaces:s,currentWorkspace:t}=r();return s.find(a=>a.id===t)},getWorkspaceWindows:s=>{const{workspaces:t}=r();return t.find(i=>i.id===s)?.windows||[]},canDeleteWorkspace:s=>{const{workspaces:t}=r();return t.length>1}}),{name:"daveos-session",version:1,partialize:n=>({workspaces:n.workspaces,currentWorkspace:n.currentWorkspace})}));if(typeof window<"u"){setInterval(()=>{Z.getState().saveSession()},3e4),window.addEventListener("beforeunload",()=>{Z.getState().saveSession()});const n=localStorage.getItem("daveos-session");if(n)try{const r=JSON.parse(n);Date.now()-new Date(r.timestamp).getTime()<24*60*60*1e3&&Z.getState().restoreSession(r)}catch(r){console.error("Failed to restore session:",r)}}class Zt extends Ve{fsEntries;trash;mimeAssociations;constructor(){super("DaveOSDatabase"),this.version(1).stores({fsEntries:"id, name, type, parentId, path, createdAt, modifiedAt, size, mimeType",trash:"++id, deletedAt, originalPath",mimeAssociations:"id, mimeType, appId, isDefault"}),this.fsEntries.hook("creating",function(r,s,t){s.createdAt=new Date,s.modifiedAt=new Date}),this.fsEntries.hook("updating",function(r,s,t,a){r.modifiedAt=new Date})}}const H=new Zt,Jt=async()=>{try{return await H.open(),console.log("DaveOS Database initialized successfully"),!0}catch(n){return console.error("Failed to initialize database:",n),!1}};var O=(n=>(n.FILE="file",n.FOLDER="folder",n.SYMLINK="symlink",n))(O||{});class X{static async initialize(){try{const r=await Jt();return r&&await this.seedIfEmpty(),r}catch(r){return console.error("Failed to initialize filesystem:",r),!1}}static async seedIfEmpty(){try{if(await H.fsEntries.count()>0)return;console.log("Seeding filesystem..."),await H.fsEntries.add({id:"root",name:"",type:O.FOLDER,path:"/",parentId:void 0,size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date}),await H.fsEntries.add({id:"home",name:"home",type:O.FOLDER,path:"/home",parentId:"root",size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date}),await H.fsEntries.add({id:"user",name:"user",type:O.FOLDER,path:"/home/user",parentId:"home",size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date});const s=["Desktop","Documents","Downloads","Pictures","Music","Videos"];for(const a of s)await H.fsEntries.add({id:`user-${a.toLowerCase()}`,name:a,type:O.FOLDER,path:`/home/user/${a}`,parentId:"user",size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date});const t=`Welcome to DaveOS!

A modern web-based operating system built with React and TypeScript.

Features:
- File system management
- Built-in applications
- Window management
- System settings

Explore and enjoy!`;await H.fsEntries.add({id:"welcome-txt",name:"Welcome.txt",type:O.FILE,path:"/home/user/Desktop/Welcome.txt",parentId:"user-desktop",size:t.length,mimeType:"text/plain",content:t,metadata:{},createdAt:new Date,modifiedAt:new Date}),console.log("Filesystem seeded successfully")}catch(r){console.error("Failed to seed filesystem:",r)}}static async getEntries(r="/"){try{if(r==="/")return await H.fsEntries.where("parentId").equals("").toArray();const s=await H.fsEntries.where("path").equals(r).first();return s?await H.fsEntries.where("parentId").equals(s.id.toString()).toArray():[]}catch(s){return console.error("Failed to get entries:",s),[]}}static async createFolder(r,s){try{const a=(await H.fsEntries.where("path").equals(s).first())?.id?.toString();return!!await H.fsEntries.add({id:`folder-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:r,type:O.FOLDER,path:`${s}/${r}`,parentId:a,size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date})}catch(t){return console.error("Failed to create folder:",t),!1}}static async createFile(r,s,t,a="text/plain"){try{const i=t==="/"?`/${r}`:`${t}/${r}`,c=t==="/"?null:await H.fsEntries.where("path").equals(t).first();return await H.fsEntries.add({id:`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:r,type:O.FILE,path:i,parentId:c?.id?.toString(),size:s.length,mimeType:a,content:s,metadata:{},createdAt:new Date,modifiedAt:new Date}),!0}catch(i){return console.error("Failed to create file:",i),!1}}static async deleteEntry(r){try{return await H.fsEntries.delete(parseInt(r)),!0}catch(s){return console.error("Failed to delete entry:",s),!1}}static async renameEntry(r,s){try{const t=await H.fsEntries.get(parseInt(r));if(!t)return!1;const a=t.path.split("/");a[a.length-1]=s;const i=a.join("/");return await H.fsEntries.update(parseInt(r),{name:s,path:i,modifiedAt:new Date}),!0}catch(t){return console.error("Failed to rename entry:",t),!1}}}const B=he()(ze((n,r)=>({currentPath:"/home/user",currentEntries:[],selectedEntries:[],isLoading:!1,error:null,isInitialized:!1,navigationHistory:["/home/user"],historyIndex:0,initialize:async()=>{if(!r().isInitialized){n({isLoading:!0,error:null});try{if(!await X.initialize())throw new Error("Failed to initialize filesystem");n({isInitialized:!0}),await r().navigateTo("/home/user"),console.log("Simple filesystem initialized successfully")}catch(s){console.error("Failed to initialize filesystem:",s),n({error:s.message})}finally{n({isLoading:!1})}}},navigateTo:async s=>{n({isLoading:!0,error:null});try{const t=await X.getEntries(s),{navigationHistory:a,historyIndex:i}=r(),c=[...a.slice(0,i+1),s];n({currentPath:s,currentEntries:t,selectedEntries:[],isLoading:!1,navigationHistory:c,historyIndex:c.length-1})}catch(t){console.error("Failed to navigate:",t),n({error:`Failed to navigate to ${s}`,isLoading:!1})}},navigateUp:async()=>{const{currentPath:s}=r();if(s==="/")return;const t=s.split("/").slice(0,-1).join("/")||"/";await r().navigateTo(t)},navigateHome:async()=>{await r().navigateTo("/home/user")},refresh:async()=>{const{currentPath:s}=r();await r().navigateTo(s)},goBack:async()=>{const{navigationHistory:s,historyIndex:t}=r();if(t>0){const a=t-1,i=s[a];n({historyIndex:a}),await r().navigateTo(i)}},goForward:async()=>{const{navigationHistory:s,historyIndex:t}=r();if(t<s.length-1){const a=t+1,i=s[a];n({historyIndex:a}),await r().navigateTo(i)}},selectEntry:s=>{n({selectedEntries:[s]})},clearSelection:()=>{n({selectedEntries:[]})},toggleSelection:s=>{const{selectedEntries:t}=r(),a=t.includes(s)?t.filter(i=>i!==s):[...t,s];n({selectedEntries:a})},createFolder:async s=>{const{currentPath:t}=r();n({isLoading:!0,error:null});try{return await X.createFolder(s,t)?(await r().refresh(),!0):(n({error:`Failed to create folder: ${s}`}),!1)}catch(a){return console.error("Failed to create folder:",a),n({error:`Failed to create folder: ${s}`}),!1}finally{n({isLoading:!1})}},createFile:async(s,t="")=>{const{currentPath:a}=r();n({isLoading:!0,error:null});try{return await X.createFile(s,t,a)?(await r().refresh(),!0):(n({error:`Failed to create file: ${s}`}),!1)}catch(i){return console.error("Failed to create file:",i),n({error:`Failed to create file: ${s}`}),!1}finally{n({isLoading:!1})}},renameEntry:async(s,t)=>{n({isLoading:!0,error:null});try{return await X.renameEntry(s,t)?(await r().refresh(),!0):(n({error:"Failed to rename entry"}),!1)}catch(a){return console.error("Failed to rename entry:",a),n({error:`Failed to rename to: ${t}`}),!1}finally{n({isLoading:!1})}},deleteEntries:async s=>{n({isLoading:!0,error:null});try{for(const t of s)await X.deleteEntry(t);return await r().refresh(),n({selectedEntries:[]}),!0}catch(t){return console.error("Failed to delete entries:",t),n({error:"Failed to delete selected entries"}),!1}finally{n({isLoading:!1})}}}),{name:"daveos-simple-filesystem",partialize:n=>({currentPath:n.currentPath,isInitialized:n.isInitialized})}));class Vt{notifications=[];listeners=[];addNotification(r){const s={...r,id:Date.now().toString(),timestamp:new Date,read:!1};this.notifications.unshift(s),this.notifyListeners(),r.persistent||setTimeout(()=>{this.removeNotification(s.id)},5e3)}removeNotification(r){this.notifications=this.notifications.filter(s=>s.id!==r),this.notifyListeners()}markAsRead(r){const s=this.notifications.find(t=>t.id===r);s&&(s.read=!0,this.notifyListeners())}markAllAsRead(){this.notifications.forEach(r=>r.read=!0),this.notifyListeners()}clearAll(){this.notifications=[],this.notifyListeners()}getNotifications(){return[...this.notifications]}getUnreadCount(){return this.notifications.filter(r=>!r.read).length}subscribe(r){return this.listeners.push(r),()=>{this.listeners=this.listeners.filter(s=>s!==r)}}notifyListeners(){this.listeners.forEach(r=>r(this.getNotifications()))}}const _=new Vt,Gt=({isOpen:n,onClose:r})=>{const[s,t]=x.useState([]),[a,i]=x.useState("all");x.useEffect(()=>{const l=_.subscribe(t);return t(_.getNotifications()),l},[]);const c=s.filter(l=>a==="all"||!l.read),m=l=>{switch(l){case"success":return e.jsx(Pe,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(Oe,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx($e,{className:"w-5 h-5 text-red-500"});default:return e.jsx(xe,{className:"w-5 h-5 text-blue-500"})}},f=l=>{const g=new Date().getTime()-l.getTime(),E=Math.floor(g/6e4),d=Math.floor(E/60),N=Math.floor(d/24);return N>0?`${N}d ago`:d>0?`${d}h ago`:E>0?`${E}m ago`:"Just now"};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-end pt-16 pr-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),s.length>0&&e.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full",children:s.length})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 p-1 rounded",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>i("all"),className:`flex-1 px-4 py-2 text-sm font-medium ${a==="all"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["All (",s.length,")"]}),e.jsxs("button",{onClick:()=>i("unread"),className:`flex-1 px-4 py-2 text-sm font-medium ${a==="unread"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["Unread (",_.getUnreadCount(),")"]})]}),s.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>_.markAllAsRead(),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Mark all read"})]}),e.jsxs("button",{onClick:()=>_.clearAll(),className:"text-sm text-red-600 hover:text-red-800 flex items-center space-x-1",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear all"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(se,{className:"w-12 h-12 mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No notifications"}),e.jsx("p",{className:"text-sm",children:"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:c.map(l=>e.jsx(Qt,{notification:l,onMarkRead:()=>_.markAsRead(l.id),onRemove:()=>_.removeNotification(l.id),getIcon:m,formatTime:f},l.id))})})]})}):null},Qt=({notification:n,onMarkRead:r,onRemove:s,getIcon:t,formatTime:a})=>{const i=()=>{n.read||r()};return e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${n.read?"":"bg-blue-50 border-l-4 border-blue-500"}`,onClick:i,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:n.icon||t(n.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-sm font-medium ${n.read?"text-gray-700":"text-gray-900"}`,children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:n.message})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[!n.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("button",{onClick:c=>{c.stopPropagation(),s()},className:"text-gray-400 hover:text-gray-600 p-1 rounded",children:e.jsx(G,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[e.jsx(Qe,{className:"w-3 h-3"}),e.jsx("span",{children:a(n.timestamp)}),n.appId&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"capitalize",children:n.appId})]})]})}),n.actions&&n.actions.length>0&&e.jsx("div",{className:"flex space-x-2 mt-3",children:n.actions.map((c,m)=>e.jsx("button",{onClick:f=>{f.stopPropagation(),c.action()},className:`px-3 py-1 text-xs rounded ${c.primary?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:c.label},m))})]})]})})},Xt=({notification:n,onRemove:r})=>{x.useEffect(()=>{if(!n.persistent){const t=setTimeout(r,5e3);return()=>clearTimeout(t)}},[n.persistent,r]);const s=t=>{switch(t){case"success":return e.jsx(Pe,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(Oe,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx($e,{className:"w-5 h-5 text-red-500"});default:return e.jsx(xe,{className:"w-5 h-5 text-blue-500"})}};return e.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm animate-slide-in-right",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:n.icon||s(n.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.actions&&n.actions.length>0&&e.jsx("div",{className:"flex space-x-2 mt-3",children:n.actions.map((t,a)=>e.jsx("button",{onClick:t.action,className:`px-3 py-1 text-xs rounded ${t.primary?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t.label},a))})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 p-1 rounded",children:e.jsx(G,{className:"w-4 h-4"})})]})})},qe=()=>{const[n,r]=x.useState([]);return x.useEffect(()=>{const c=_.subscribe(r);return r(_.getNotifications()),c},[]),{notifications:n,addNotification:c=>{_.addNotification(c)},removeNotification:c=>{_.removeNotification(c)},markAsRead:c=>{_.markAsRead(c)},getUnreadCount:()=>_.getUnreadCount()}},es={success:(n,r,s)=>{_.addNotification({title:n,message:r,type:"success",persistent:!1,...s})},error:(n,r,s)=>{_.addNotification({title:n,message:r,type:"error",persistent:!0,...s})},warning:(n,r,s)=>{_.addNotification({title:n,message:r,type:"warning",persistent:!1,...s})},info:(n,r,s)=>{_.addNotification({title:n,message:r,type:"info",persistent:!1,...s})}},ts=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ss=["January","February","March","April","May","June","July","August","September","October","November","December"],ns=[{id:"1",title:"Team Meeting",date:new Date,time:"10:00 AM",color:"bg-blue-500"},{id:"2",title:"Project Deadline",date:new Date(Date.now()+2*24*60*60*1e3),time:"11:30 PM",color:"bg-red-500"},{id:"3",title:"Code Review",date:new Date(Date.now()+5*24*60*60*1e3),time:"2:00 PM",color:"bg-green-500"}];function as({isOpen:n,onClose:r,anchorElement:s}){const[t,a]=x.useState(new Date),[i,c]=x.useState(new Date),[m]=x.useState(ns);if(x.useEffect(()=>{if(!n)return;const u=p=>{const D=document.getElementById("calendar-popover");D&&!D.contains(p.target)&&s&&!s.contains(p.target)&&r()};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[n,r,s]),x.useEffect(()=>{if(!n)return;const u=p=>{p.key==="Escape"&&r()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[n,r]),!n)return null;const f=new Date,l=t.getFullYear(),w=t.getMonth(),g=new Date(l,w,1),E=new Date(l,w+1,0),d=g.getDay(),N=E.getDate(),y=[];for(let u=0;u<d;u++)y.push(null);for(let u=1;u<=N;u++)y.push(u);const T=u=>{const p=new Date(t);p.setMonth(w+(u==="next"?1:-1)),a(p)},I=u=>{const p=new Date(l,w,u);c(p)},b=u=>f.getDate()===u&&f.getMonth()===w&&f.getFullYear()===l,S=u=>i.getDate()===u&&i.getMonth()===w&&i.getFullYear()===l,M=u=>m.some(p=>p.date.getDate()===u&&p.date.getMonth()===w&&p.date.getFullYear()===l),j=()=>m.filter(u=>u.date.getDate()===i.getDate()&&u.date.getMonth()===i.getMonth()&&u.date.getFullYear()===i.getFullYear());return e.jsxs("div",{id:"calendar-popover",className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-80 bg-surface border border-surface-border rounded-xl shadow-2xl backdrop-blur-sm z-50 animate-fade-in",style:{maxHeight:"400px"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-surface-border",children:[e.jsx("button",{onClick:()=>T("prev"),className:"p-1 hover:bg-surface-hover rounded-lg transition-colors",children:e.jsx(me,{size:16})}),e.jsxs("h3",{className:"font-semibold text-lg",children:[ss[w]," ",l]}),e.jsx("button",{onClick:()=>T("next"),className:"p-1 hover:bg-surface-hover rounded-lg transition-colors",children:e.jsx(ne,{size:16})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:ts.map(u=>e.jsx("div",{className:"text-center text-xs font-medium text-foreground-muted py-2",children:u},u))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:y.map((u,p)=>e.jsxs("button",{className:`
                relative h-8 w-8 text-sm rounded-lg transition-all duration-200 
                ${u===null?"invisible":""}
                ${b(u)?"bg-accent text-accent-foreground font-semibold":""}
                ${S(u)&&!b(u)?"bg-surface-active":""}
                ${!b(u)&&!S(u)?"hover:bg-surface-hover":""}
              `,onClick:()=>u&&I(u),disabled:u===null,children:[u,u&&M(u)&&e.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent rounded-full"})]},p))})]}),j().length>0&&e.jsxs("div",{className:"border-t border-surface-border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Events for ",i.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})]}),e.jsx("button",{className:"p-1 hover:bg-surface-hover rounded-lg transition-colors",children:e.jsx(ke,{size:14})})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:j().map(u=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-surface-hover rounded-lg transition-colors",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${u.color}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:u.title}),u.time&&e.jsx("p",{className:"text-xs text-foreground-muted",children:u.time})]})]},u.id))})]})]})}function rs(){const{toggleOverview:n}=Z(),[r,s]=x.useState(new Date),[t,a]=x.useState(!1),[i,c]=x.useState(!1),[m,f]=x.useState(!1),{getUnreadCount:l}=qe(),w=x.useRef(null);x.useEffect(()=>{const d=setInterval(()=>{s(new Date)},1e3);return()=>clearInterval(d)},[]);const g=d=>{const{settings:N}=J.getState(),y={hour:"2-digit",minute:"2-digit",hour12:!N.use24HourFormat,timeZone:N.timezone};return d.toLocaleTimeString(N.language,y)},E=d=>{const{settings:N}=J.getState(),y={weekday:"short",month:"short",day:"numeric",timeZone:N.timezone};return d.toLocaleDateString(N.language,y)};return e.jsxs("div",{className:"fixed top-0 left-0 right-0 h-9 bg-black bg-opacity-40 backdrop-blur-md text-white flex items-center justify-between px-4 z-50 text-sm font-ubuntu",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{className:"px-3 py-1.5 text-sm font-medium hover:bg-white hover:bg-opacity-20 rounded-md transition-all duration-200",onClick:n,children:"Activities"})}),e.jsxs("div",{className:"flex items-center relative",children:[e.jsxs("button",{ref:w,className:"text-center hover:bg-white hover:bg-opacity-20 rounded-md px-3 py-1.5 transition-all duration-200",onClick:()=>f(!m),children:[e.jsx("div",{className:"text-sm font-medium leading-tight",children:g(r)}),e.jsx("div",{className:"text-xs opacity-80 leading-tight",children:E(r)})]}),e.jsx(as,{isOpen:m,onClose:()=>f(!1),anchorElement:w.current})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 mr-2",children:[e.jsx(ve,{icon:e.jsx(ge,{size:14}),active:!0}),e.jsx(ve,{icon:e.jsx(He,{size:14}),active:!1}),e.jsx(ve,{icon:e.jsx(Se,{size:14}),active:!0}),e.jsx(os,{level:85})]}),e.jsx("div",{className:"relative",children:e.jsxs("button",{className:"p-1.5 hover:bg-white hover:bg-opacity-20 rounded-md transition-all duration-200 relative",onClick:()=>c(!i),children:[e.jsx(se,{size:14}),l()>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center text-[10px]",children:l()>9?"9+":l()})]})}),e.jsx("button",{className:"p-1.5 hover:bg-white hover:bg-opacity-20 rounded-md transition-all duration-200 text-white opacity-80 hover:opacity-100",onClick:()=>a(!t),children:e.jsx("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"currentColor",children:e.jsx("path",{d:"M1 1l5 5 5-5",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),t&&e.jsx(is,{onClose:()=>a(!1)})]}),e.jsx(Gt,{isOpen:i,onClose:()=>c(!1)})]})}function is({onClose:n}){const{settings:r,setThemeMode:s}=J();x.useEffect(()=>{const a=i=>{const c=document.getElementById("quick-settings-panel");c&&!c.contains(i.target)&&n()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n]);const t=()=>{const a=r.theme.mode==="dark"?"light":"dark";s(a)};return e.jsx("div",{id:"quick-settings-panel",className:"absolute top-full right-0 mt-2 w-80 bg-surface border border-surface-border rounded-ubuntu shadow-ubuntu-lg z-modal animate-fade-in",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium",children:"Quick Settings"}),e.jsx("button",{className:"text-foreground-muted hover:text-foreground transition-smooth",onClick:n,children:e.jsx(Ce,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsx(ue,{icon:e.jsx(ge,{size:20}),label:"Wi-Fi",active:!0,onClick:()=>{}}),e.jsx(ue,{icon:e.jsx(He,{size:20}),label:"Bluetooth",active:!1,onClick:()=>{}}),e.jsx(ue,{icon:r.theme.mode==="dark"?e.jsx(Xe,{size:20}):e.jsx(We,{size:20}),label:r.theme.mode==="dark"?"Dark Mode":"Light Mode",active:r.theme.mode==="dark",onClick:t}),e.jsx(ue,{icon:e.jsx(De,{size:20}),label:"Do Not Disturb",active:!1,onClick:()=>{}})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx(Re,{icon:e.jsx(Se,{size:16}),label:"Volume",value:75,onChange:()=>{}}),e.jsx(Re,{icon:e.jsx(We,{size:16}),label:"Brightness",value:60,onChange:()=>{}})]}),e.jsx("div",{className:"border-t border-surface-border pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-foreground-muted",children:"Power"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 hover:bg-surface-hover rounded-ubuntu transition-smooth text-foreground-muted hover:text-foreground",children:"Lock"}),e.jsx("button",{className:"p-2 hover:bg-surface-hover rounded-ubuntu transition-smooth text-foreground-muted hover:text-foreground",children:"Logout"}),e.jsx("button",{className:"p-2 hover:bg-destructive hover:text-destructive-foreground rounded-ubuntu transition-smooth",children:e.jsx(et,{size:16})})]})]})})]})})}function ue({icon:n,label:r,active:s,onClick:t}){return e.jsx("button",{className:`p-3 rounded-ubuntu border transition-smooth focus-ring ${s?"bg-accent text-accent-foreground border-accent":"bg-surface hover:bg-surface-hover border-surface-border"}`,onClick:t,children:e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[n,e.jsx("span",{className:"text-xs font-medium",children:r})]})})}function Re({icon:n,label:r,value:s,onChange:t}){return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-foreground-muted",children:n}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:r}),e.jsxs("span",{className:"text-xs text-foreground-muted",children:[s,"%"]})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:a=>t(Number(a.target.value)),className:"w-full h-2 bg-surface-border rounded-full appearance-none cursor-pointer slider"})})]})]})}function ve({icon:n,active:r}){return e.jsx("div",{className:`p-1 transition-all duration-200 ${r?"text-white opacity-100":"text-white opacity-40"}`,children:n})}function os({level:n}){const r=()=>n>75?e.jsx(te,{size:14,className:"text-green-400"}):n>50?e.jsx(te,{size:14,className:"text-yellow-400"}):n>25?e.jsx(te,{size:14,className:"text-orange-400"}):e.jsx(te,{size:14,className:"text-red-400"});return e.jsxs("div",{className:"flex items-center space-x-1 text-white opacity-90",children:[r(),e.jsxs("span",{className:"text-xs",children:[n,"%"]})]})}const ls={files:_e,terminal:lt,textedit:je,calculator:ot,settings:Ce,imageviewer:it,music:rt,videoplayer:at,calendar:nt,notes:st,minesweeper:tt,systemmonitor:Be},we={files:"Files",terminal:"Terminal",textedit:"Text Editor",calculator:"Calculator",settings:"Settings",imageviewer:"Image Viewer",music:"Music",videoplayer:"Video Player",calendar:"Calendar",notes:"Notes",minesweeper:"Minesweeper",systemmonitor:"System Monitor"};function cs(){const{settings:n}=J(),{openWindow:r,getWindowsByApp:s,focusWindow:t,minimizeWindow:a}=q(),[i,c]=x.useState(null),m=(g,E)=>{const d=s(g);if(E.button===1)f(g);else if(d.length===0)f(g);else if(d.length===1){const N=d[0];N.minimized||!N.focused?t(N.id):a(N.id)}else{const N=d.find(y=>!y.focused&&!y.minimized);N?t(N.id):f(g)}},f=g=>{r({appId:g,title:we[g]||g,bounds:{x:100,y:100,width:800,height:600},workspace:1,minimized:!1,maximized:!1,resizable:!0,movable:!0,closable:!0,minimizable:!0,maximizable:!0,visible:!0})},l=(g,E)=>{E.preventDefault()},w=g=>s(g).some(d=>!d.minimized&&d.visible);return e.jsxs("div",{className:"fixed left-0 top-9 bottom-0 w-16 bg-black bg-opacity-40 backdrop-blur-md flex flex-col items-center py-4 space-y-3 z-40",children:[e.jsx("div",{className:"flex flex-col items-center space-y-3",children:n.dock.pinnedApps.map(g=>{const E=ls[g],d=w(g),N=i===g;return e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:`w-12 h-12 flex items-center justify-center rounded-xl hover:bg-white hover:bg-opacity-20 transition-all duration-300 transform ${N?"scale-110":"scale-100"} ${d?"bg-white bg-opacity-10":""}`,onClick:y=>m(g,y),onContextMenu:y=>l(g,y),onMouseEnter:()=>c(g),onMouseLeave:()=>c(null),title:we[g],children:E&&e.jsx(E,{size:32,className:`transition-colors duration-200 ${d?"text-white":"text-white opacity-80"}`})}),d&&e.jsx("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-1 h-6 bg-orange-500 rounded-full"}),N&&e.jsxs("div",{className:"absolute left-full ml-3 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-95 text-white rounded-lg px-3 py-2 text-sm whitespace-nowrap shadow-xl backdrop-blur-sm z-50 border border-white border-opacity-10",children:[we[g],e.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-gray-900 border-r-opacity-95"})]})]},g)})}),e.jsx("div",{className:"w-8 h-px bg-white bg-opacity-20 my-4"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-xl hover:bg-white hover:bg-opacity-20 transition-all duration-300 transform hover:scale-110",onClick:()=>{},onMouseEnter:()=>c("trash"),onMouseLeave:()=>c(null),title:"Trash",children:e.jsx(_e,{size:32,className:"text-white opacity-80"})}),i==="trash"&&e.jsxs("div",{className:"absolute left-full ml-3 top-1/2 -translate-y-1/2 bg-gray-900 bg-opacity-95 text-white rounded-lg px-3 py-2 text-sm whitespace-nowrap shadow-xl backdrop-blur-sm z-50 border border-white border-opacity-10",children:["Trash",e.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-gray-900 border-r-opacity-95"})]})]})]})}const ds=[{id:"home",name:"Home",icon:e.jsx(Ee,{size:32}),position:{x:20,y:20},action:()=>{}},{id:"trash",name:"Trash",icon:e.jsx(re,{size:32}),position:{x:20,y:100},action:()=>{}}];function us(){const[n]=x.useState(ds),[r,s]=x.useState([]),[t,a]=x.useState(!1),[i,c]=x.useState({x:0,y:0}),[m,f]=x.useState({x:0,y:0}),l=x.useRef(null),w=b=>{b.target===b.currentTarget&&s([])},g=b=>{b.target===b.currentTarget&&(a(!0),c({x:b.clientX,y:b.clientY}),f({x:b.clientX,y:b.clientY}),s([]))},E=b=>{t&&f({x:b.clientX,y:b.clientY})},d=()=>{if(t){const b={left:Math.min(i.x,m.x),top:Math.min(i.y,m.y),right:Math.max(i.x,m.x),bottom:Math.max(i.y,m.y)},S=n.filter(M=>{const j=document.getElementById(`desktop-icon-${M.id}`);if(!j)return!1;const u=j.getBoundingClientRect();return u.left<b.right&&u.right>b.left&&u.top<b.bottom&&u.bottom>b.top}).map(M=>M.id);s(S),a(!1)}},N=(b,S)=>{S.stopPropagation(),S.ctrlKey||S.metaKey?s(M=>M.includes(b)?M.filter(j=>j!==b):[...M,b]):s([b])},y=(b,S)=>{S.stopPropagation(),b.action()},T=b=>{b.preventDefault()},I=()=>{if(!t)return{display:"none"};const b=Math.min(i.x,m.x),S=Math.min(i.y,m.y),M=Math.abs(m.x-i.x),j=Math.abs(m.y-i.y);return{position:"fixed",left:b,top:S,width:M,height:j,border:"1px dashed rgba(255, 255, 255, 0.8)",backgroundColor:"rgba(255, 255, 255, 0.1)",pointerEvents:"none",zIndex:1e3}};return e.jsxs("div",{ref:l,className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-purple-800 to-orange-600 -z-10",onClick:w,onMouseDown:g,onMouseMove:E,onMouseUp:d,onContextMenu:T,children:[n.map(b=>e.jsx(ms,{icon:b,selected:r.includes(b.id),onClick:S=>N(b.id,S),onDoubleClick:S=>y(b,S)},b.id)),e.jsx("div",{style:I()})]})}function ms({icon:n,selected:r,onClick:s,onDoubleClick:t}){const[a,i]=x.useState(!1),[c,m]=x.useState(n.name),f=l=>{l.key==="F2"&&r?(i(!0),m(n.name)):l.key==="Delete"&&r||(l.key==="Enter"&&a?i(!1):l.key==="Escape"&&a&&(i(!1),m(n.name)))};return e.jsxs("div",{id:`desktop-icon-${n.id}`,className:`absolute flex flex-col items-center cursor-pointer select-none group ${r?"bg-accent/20 rounded-ubuntu":""}`,style:{left:n.position.x,top:n.position.y,width:80,height:80},onClick:s,onDoubleClick:t,onKeyDown:f,tabIndex:0,children:[e.jsx("div",{className:`p-2 rounded-ubuntu transition-smooth ${r?"bg-accent text-accent-foreground":"text-white drop-shadow-lg group-hover:bg-white/10"}`,children:n.icon}),e.jsx("div",{className:"mt-1 text-center",children:a?e.jsx("input",{type:"text",value:c,onChange:l=>m(l.target.value),onBlur:()=>i(!1),onKeyDown:l=>{l.key==="Enter"?i(!1):l.key==="Escape"&&(i(!1),m(n.name))},className:"bg-surface border border-surface-border rounded px-1 text-xs text-center",autoFocus:!0}):e.jsx("span",{className:`text-xs px-1 rounded transition-smooth ${r?"bg-accent text-accent-foreground":"text-white drop-shadow-lg bg-black/20"}`,children:n.name})})]})}function hs(){const{isOverviewOpen:n,closeOverview:r,workspaces:s,currentWorkspace:t,switchToWorkspace:a}=Z(),{windows:i,focusWindow:c}=q(),[m,f]=x.useState(""),[l,w]=x.useState(!1);if(!n)return null;const g=Object.values(i).filter(y=>y.workspace===t&&y.visible&&!y.minimized),E=y=>{c(y),r()},d=y=>{y!==t&&a(y),r()},N=y=>{y.target===y.currentTarget&&r()};return e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-modal animate-fade-in",onClick:N,children:[e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex justify-center pt-16 pb-8",children:e.jsxs("div",{className:"relative w-96",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",size:20}),e.jsx("input",{type:"text",placeholder:"Type to search...",value:m,onChange:y=>f(y.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-surface-border rounded-ubuntu text-lg focus-ring",autoFocus:!0})]})}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("div",{className:"flex-1 px-16",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-4",children:"Windows"}),g.length===0?e.jsx("div",{className:"text-center py-16 text-white/60",children:e.jsx("p",{children:"No open windows"})}):e.jsx("div",{className:"grid grid-cols-3 gap-4",children:g.map(y=>e.jsx(xs,{window:y,onClick:()=>E(y.id)},y.id))})]})}),e.jsx("div",{className:"w-16 flex flex-col items-center pt-8",children:e.jsx("button",{className:"w-12 h-12 bg-surface/80 hover:bg-surface rounded-ubuntu flex items-center justify-center transition-smooth",onClick:()=>w(!l),title:"Show Applications",children:e.jsx(De,{size:24})})})]}),e.jsxs("div",{className:"px-16 pb-16",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Workspaces"}),e.jsx("div",{className:"flex space-x-4",children:s.map(y=>e.jsx(gs,{workspace:y,active:y.id===t,onClick:()=>d(y.id)},y.id))})]})]}),l&&e.jsx(fs,{onClose:()=>w(!1)})]})}function xs({window:n,onClick:r}){return e.jsxs("div",{className:"bg-surface border border-surface-border rounded-ubuntu p-4 cursor-pointer hover:scale-105 transition-transform duration-200 shadow-ubuntu",onClick:r,children:[e.jsx("div",{className:"aspect-video bg-background rounded-ubuntu-sm mb-2 flex items-center justify-center text-foreground-muted",children:e.jsx("span",{className:"text-sm",children:n.appId})}),e.jsx("p",{className:"text-sm font-medium truncate",children:n.title})]})}function gs({workspace:n,active:r,onClick:s}){return e.jsx("div",{className:`w-32 h-20 rounded-ubuntu border-2 cursor-pointer transition-smooth ${r?"border-accent bg-accent/20":"border-white/20 bg-white/10 hover:border-white/40"}`,onClick:s,children:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:n.name})})})}function fs({onClose:n}){const{openWindow:r}=q(),[s,t]=x.useState(""),a=[{id:"files",name:"Files",icon:"ðŸ“"},{id:"terminal",name:"Terminal",icon:"ðŸ’»"},{id:"textedit",name:"Text Editor",icon:"ðŸ“"},{id:"calculator",name:"Calculator",icon:"ðŸ§®"},{id:"settings",name:"Settings",icon:"âš™ï¸"},{id:"imageviewer",name:"Image Viewer",icon:"ðŸ–¼ï¸"},{id:"music",name:"Music",icon:"ðŸŽµ"},{id:"videoplayer",name:"Video Player",icon:"ðŸŽ¬"},{id:"calendar",name:"Calendar",icon:"ðŸ“…"},{id:"notes",name:"Notes",icon:"ðŸ“‹"},{id:"minesweeper",name:"Minesweeper",icon:"ðŸ’£"}],i=a.filter(m=>m.name.toLowerCase().includes(s.toLowerCase())),c=m=>{r({appId:m,title:a.find(f=>f.id===m)?.name||m,bounds:{x:100,y:100,width:800,height:600},workspace:1,minimized:!1,maximized:!1,resizable:!0,movable:!0,closable:!0,minimizable:!0,maximizable:!0,visible:!0}),n()};return e.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center",children:e.jsxs("div",{className:"w-2/3 max-w-4xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative w-96 mx-auto",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",size:20}),e.jsx("input",{type:"text",placeholder:"Search applications...",value:s,onChange:m=>t(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-surface-border rounded-ubuntu focus-ring",autoFocus:!0})]})}),e.jsx("div",{className:"grid grid-cols-6 gap-6",children:i.map(m=>e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-ubuntu hover:bg-white/10 cursor-pointer transition-smooth",onClick:()=>c(m.id),children:[e.jsx("div",{className:"text-4xl mb-2",children:m.icon}),e.jsx("span",{className:"text-white text-sm text-center",children:m.name})]},m.id))})]})})}const ps=["n","ne","e","se","s","sw","w","nw"],bs=20,ys={width:200,height:150};function vs({bounds:n,onMove:r,onResize:s,onBoundsChange:t,disabled:a=!1,resizable:i=!0,movable:c=!0,minSize:m=ys,maxSize:f,snapThreshold:l=bs}){const w=x.useRef(null),[g,E]=x.useState({isDragging:!1,isResizing:!1,dragStart:{x:0,y:0},initialBounds:n,resizeHandle:null}),d=x.useCallback(()=>({x:64,y:48,width:window.innerWidth-64,height:window.innerHeight-48}),[]),N=x.useCallback(j=>{const u=d(),p={...j};return Math.abs(j.x-u.x)<l&&(p.x=u.x),Math.abs(j.x+j.width-(u.x+u.width))<l&&(p.x=u.x+u.width-j.width),Math.abs(j.y-u.y)<l&&(p.y=u.y),Math.abs(j.y+j.height-(u.y+u.height))<l&&(p.y=u.y+u.height-j.height),p},[l,d]),y=x.useCallback(j=>{const u=d(),p={...j};return p.width=Math.max(m.width,p.width),p.height=Math.max(m.height,p.height),f&&(p.width=Math.min(f.width,p.width),p.height=Math.min(f.height,p.height)),p.x=Math.max(u.x,Math.min(p.x,u.x+u.width-p.width)),p.y=Math.max(u.y,Math.min(p.y,u.y+u.height-p.height)),p},[m,f,d]),T=x.useCallback(j=>{a||!c||(j.preventDefault(),j.stopPropagation(),!w.current?.getBoundingClientRect())||E({isDragging:!0,isResizing:!1,dragStart:{x:j.clientX,y:j.clientY},initialBounds:n,resizeHandle:null})},[a,c,n]),I=x.useCallback(j=>u=>{a||!i||(u.preventDefault(),u.stopPropagation(),E({isDragging:!1,isResizing:!0,dragStart:{x:u.clientX,y:u.clientY},initialBounds:n,resizeHandle:j}))},[a,i,n]),b=x.useCallback(j=>{if(!g.isDragging&&!g.isResizing)return;const u=j.clientX-g.dragStart.x,p=j.clientY-g.dragStart.y;if(g.isDragging){const D={...g.initialBounds,x:g.initialBounds.x+u,y:g.initialBounds.y+p},o=N(D),h=y(o);r?.({x:h.x,y:h.y}),t?.(h)}else if(g.isResizing&&g.resizeHandle){const D=g.resizeHandle,o={...g.initialBounds};D.includes("n")&&(o.y=g.initialBounds.y+p,o.height=g.initialBounds.height-p),D.includes("s")&&(o.height=g.initialBounds.height+p),D.includes("w")&&(o.x=g.initialBounds.x+u,o.width=g.initialBounds.width-u),D.includes("e")&&(o.width=g.initialBounds.width+u);const h=y(o);s?.({width:h.width,height:h.height}),t?.(h)}},[g,N,y,r,s,t]),S=x.useCallback(()=>{E({isDragging:!1,isResizing:!1,dragStart:{x:0,y:0},initialBounds:n,resizeHandle:null})},[n]);x.useEffect(()=>{if(g.isDragging||g.isResizing)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",S),document.body.style.cursor=g.isDragging?"move":"resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",S),document.body.style.cursor="",document.body.style.userSelect=""}},[g.isDragging,g.isResizing,b,S]);const M=i&&!a?ps.map(j=>({handle:j,onMouseDown:I(j),className:`absolute cursor-${j}-resize`,style:ws(j)})):[];return{elementRef:w,isDragging:g.isDragging,isResizing:g.isResizing,handleMouseDown:T,resizeHandles:M}}function ws(n){const t={width:8,height:8,zIndex:10};switch(n){case"n":return{...t,top:-4,left:"50%",transform:"translateX(-50%)",cursor:"n-resize"};case"ne":return{...t,top:-4,right:-4,cursor:"ne-resize"};case"e":return{...t,right:-4,top:"50%",transform:"translateY(-50%)",cursor:"e-resize"};case"se":return{...t,bottom:-4,right:-4,cursor:"se-resize"};case"s":return{...t,bottom:-4,left:"50%",transform:"translateX(-50%)",cursor:"s-resize"};case"sw":return{...t,bottom:-4,left:-4,cursor:"sw-resize"};case"w":return{...t,left:-4,top:"50%",transform:"translateY(-50%)",cursor:"w-resize"};case"nw":return{...t,top:-4,left:-4,cursor:"nw-resize"};default:return t}}const js=({onClose:n})=>{const[r,s]=x.useState("list"),[t,a]=x.useState(""),[i,c]=x.useState(new Set),[,m]=x.useState(null),[f,l]=x.useState(null),{currentPath:w,currentEntries:g,navigationHistory:E,historyIndex:d,navigateTo:N,goBack:y,goForward:T,createFolder:I,createFile:b,deleteEntries:S,refresh:M}=B();x.useEffect(()=>{const C=()=>l(null);return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const j=g.filter(C=>C.name.toLowerCase().includes(t.toLowerCase())),u=async C=>{if(C.type===O.FOLDER){const R=w==="/"?`/${C.name}`:`${w}/${C.name}`;await N(R)}else console.log("Opening file:",C.name)},p=(C,R=!1)=>{if(R){const W=new Set(i);W.has(C)?W.delete(C):W.add(C),c(W)}else c(new Set([C]))},D=(C,R)=>{C.preventDefault(),l({x:C.clientX,y:C.clientY,item:R})},o=async()=>{const C=prompt("Enter folder name:");C&&await I(C),l(null)},h=async()=>{const C=prompt("Enter file name:");C&&await b(C,""),l(null)},z=()=>{const C=g.filter(R=>i.has(R.id.toString()));m({items:C,operation:"copy"}),l(null)},F=()=>{const C=g.filter(R=>i.has(R.id.toString()));m({items:C,operation:"cut"}),l(null)},v=async()=>{i.size>0&&confirm("Delete selected items?")&&(await S(Array.from(i)),c(new Set)),l(null)},k=C=>{if(C.type===O.FOLDER)return e.jsx(Te,{className:"w-5 h-5 text-blue-500"});switch(C.name.split(".").pop()?.toLowerCase()){case"txt":case"md":return e.jsx(Q,{className:"w-5 h-5 text-gray-600"});case"js":case"ts":case"tsx":case"jsx":return e.jsx(Q,{className:"w-5 h-5 text-yellow-600"});case"css":return e.jsx(Q,{className:"w-5 h-5 text-blue-600"});case"html":return e.jsx(Q,{className:"w-5 h-5 text-orange-600"});case"json":return e.jsx(Q,{className:"w-5 h-5 text-green-600"});default:return e.jsx(Q,{className:"w-5 h-5 text-gray-500"})}},A=C=>C?C<1024?`${C} B`:C<1024*1024?`${(C/1024).toFixed(1)} KB`:`${(C/(1024*1024)).toFixed(1)} MB`:"",U=C=>C?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(C):"";return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:y,disabled:d<=0,className:"p-1 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Back",children:e.jsx(ct,{className:"w-4 h-4"})}),e.jsx("button",{onClick:T,disabled:d>=E.length-1,className:"p-1 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Forward",children:e.jsx(dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(w.substring(0,w.lastIndexOf("/"))||"/"),disabled:w==="/",className:"p-1 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Up",children:e.jsx(ut,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N("/home/user"),className:"p-1 text-gray-600 hover:text-gray-800",title:"Home",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:M,className:"p-1 text-gray-600 hover:text-gray-800",title:"Refresh",children:e.jsx(Ue,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search files...",value:t,onChange:C=>a(C.target.value),className:"pl-8 pr-3 py-1 text-sm border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded",children:[e.jsx("button",{onClick:()=>s("list"),className:`p-1 ${r==="list"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,title:"List View",children:e.jsx(mt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s("grid"),className:`p-1 ${r==="grid"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,title:"Grid View",children:e.jsx(De,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"ðŸ“"}),e.jsx("span",{className:"text-sm font-mono",children:w})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-2",children:[r==="list"?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 text-xs font-medium text-gray-600 border-b border-gray-200",children:[e.jsx("div",{className:"col-span-6",children:"Name"}),e.jsx("div",{className:"col-span-2",children:"Size"}),e.jsx("div",{className:"col-span-2",children:"Type"}),e.jsx("div",{className:"col-span-2",children:"Modified"})]}),j.map(C=>e.jsxs("div",{className:`grid grid-cols-12 gap-2 p-2 text-sm hover:bg-gray-100 cursor-pointer rounded ${i.has(C.id.toString())?"bg-blue-100":""}`,onClick:R=>{R.detail===2?u(C):p(C.id.toString(),R.ctrlKey)},onContextMenu:R=>D(R,C),children:[e.jsxs("div",{className:"col-span-6 flex items-center space-x-2",children:[k(C),e.jsx("span",{className:"truncate",children:C.name})]}),e.jsx("div",{className:"col-span-2 text-gray-600",children:C.type===O.FILE?A(C.size):"â€”"}),e.jsx("div",{className:"col-span-2 text-gray-600",children:C.type===O.FOLDER?"Folder":"File"}),e.jsx("div",{className:"col-span-2 text-gray-600",children:U(C.modifiedAt)})]},C.id))]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:j.map(C=>e.jsx("div",{className:`p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer ${i.has(C.id.toString())?"bg-blue-100 border-blue-300":""}`,onClick:R=>{R.detail===2?u(C):p(C.id.toString(),R.ctrlKey)},onContextMenu:R=>D(R,C),children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"text-3xl",children:k(C)}),e.jsx("span",{className:"text-sm text-center truncate w-full",children:C.name}),C.type===O.FILE&&e.jsx("span",{className:"text-xs text-gray-500",children:A(C.size)})]})},C.id))}),j.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(Te,{className:"w-16 h-16 mb-4"}),e.jsx("p",{children:"This folder is empty"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 border-t border-gray-300 text-xs text-gray-600",children:[e.jsxs("span",{children:[j.length," items"]}),i.size>0&&e.jsxs("span",{children:[i.size," selected"]})]}),f&&e.jsx("div",{className:"fixed bg-white border border-gray-300 rounded shadow-lg py-1 z-50",style:{left:f.x,top:f.y},children:f.item?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:z,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs("button",{onClick:F,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"Cut"})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:v,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 text-red-600 flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(ht,{className:"w-4 h-4"}),e.jsx("span",{children:"New Folder"})]}),e.jsxs("button",{onClick:h,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"New File"})]})]})})]})},Ns=({windowId:n,filePath:r,onClose:s})=>{const[t,a]=x.useState(""),[i,c]=x.useState("Untitled.txt"),[m,f]=x.useState(!1),[l,w]=x.useState(r||""),[g,E]=x.useState(14),[d,N]=x.useState(!0),[y,T]=x.useState(!0),[I,b]=x.useState(""),[S,M]=x.useState(""),[j,u]=x.useState(!1),p=x.useRef(null),{createFile:D,navigateTo:o}=B();x.useEffect(()=>{r&&h(r)},[r]);const h=async W=>{try{const P=W.substring(0,W.lastIndexOf("/"))||"/",Y=W.substring(W.lastIndexOf("/")+1);await o(P);const L=B.getState().currentEntries.find($=>$.name===Y&&$.type===O.FILE);L&&L.content&&(a(L.content),c(Y),w(W),f(!1))}catch(P){console.error("Error loading file:",P)}},z=W=>{a(W),f(!0)},F=async()=>{try{if(l){const W=l.substring(0,l.lastIndexOf("/"))||"/";await o(W),await D(i,t)&&f(!1)}else await D(i,t)&&(w(`/home/user/${i}`),f(!1))}catch(W){console.error("Error saving file:",W)}},v=W=>W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),k=()=>{m&&confirm("Save changes to current file?")&&F(),a(""),c("Untitled.txt"),w(""),f(!1)},A=W=>{if(p.current){const P=p.current.selectionStart,Y=p.current.selectionEnd,V=t.substring(0,P)+W+t.substring(Y);a(V),f(!0),setTimeout(()=>{p.current&&(p.current.selectionStart=p.current.selectionEnd=P+W.length,p.current.focus())},0)}},U=()=>{if(I&&S){const W=new RegExp(v(I),"g"),P=t.replace(W,S);a(P),f(!0)}},C=()=>t.split(`
`).map((P,Y)=>Y+1).join(`
`),R=W=>{W.ctrlKey&&W.key==="s"&&(W.preventDefault(),F()),W.ctrlKey&&W.key==="n"&&(W.preventDefault(),k()),W.ctrlKey&&W.key==="f"&&(W.preventDefault(),u(!j)),W.key==="Tab"&&(W.preventDefault(),A("  "))};return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"font-medium text-sm",children:[i,m?" *":""]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:k,className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded",title:"New File (Ctrl+N)",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:F,className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded",title:"Save (Ctrl+S)",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(!j),className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded",title:"Find & Replace (Ctrl+F)",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),e.jsxs("select",{value:g,onChange:W=>E(Number(W.target.value)),className:"text-xs border border-gray-300 rounded px-1",children:[e.jsx("option",{value:10,children:"10px"}),e.jsx("option",{value:12,children:"12px"}),e.jsx("option",{value:14,children:"14px"}),e.jsx("option",{value:16,children:"16px"}),e.jsx("option",{value:18,children:"18px"}),e.jsx("option",{value:20,children:"20px"})]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:W=>N(W.target.checked),className:"mr-1"}),"Wrap"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:W=>T(W.target.checked),className:"mr-1"}),"Lines"]})]})]}),j&&e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-yellow-50 border-b border-yellow-200",children:[e.jsx("input",{type:"text",placeholder:"Find...",value:I,onChange:W=>b(W.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded"}),e.jsx("input",{type:"text",placeholder:"Replace...",value:S,onChange:W=>M(W.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded"}),e.jsx("button",{onClick:U,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Replace All"}),e.jsx("button",{onClick:()=>u(!1),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-800",children:"âœ•"})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y&&e.jsx("div",{className:"bg-gray-50 border-r border-gray-300 px-2 py-2 text-right text-gray-500 font-mono text-sm select-none",children:e.jsx("pre",{style:{fontSize:`${g}px`,lineHeight:"1.5"},children:C()})}),e.jsx("textarea",{ref:p,value:t,onChange:W=>z(W.target.value),onKeyDown:R,className:"flex-1 p-2 border-none outline-none resize-none font-mono",style:{fontSize:`${g}px`,lineHeight:"1.5",whiteSpace:d?"pre-wrap":"pre",wordWrap:d?"break-word":"normal",overflowWrap:d?"break-word":"normal"},placeholder:"Start typing...",spellCheck:!1})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-gray-100 border-t border-gray-300 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Lines: ",t.split(`
`).length]}),e.jsxs("span",{children:["Characters: ",t.length]}),e.jsxs("span",{children:["Words: ",t.trim()?t.trim().split(/\s+/).length:0]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsxs("span",{children:["ðŸ“ ",l]}),e.jsx("span",{children:m?"Modified":"Saved"})]})]})]})},ks=({onClose:n})=>{const[r,s]=x.useState(null),[t,a]=x.useState(null),[i,c]=x.useState(!1),[m,f]=x.useState([]),[l,w]=x.useState("0"),g=j=>{i?(w(j),c(!1)):w(l==="0"?j:l+j)},E=()=>{i?(w("0."),c(!1)):l.indexOf(".")===-1&&w(l+".")},d=()=>{w("0"),s(null),a(null),c(!1)},N=()=>{w("0")},y=j=>{const u=parseFloat(l);if(r===null)s(u);else if(t){const p=r||0,D=T(p,u,t);w(String(D)),s(D);const o=`${p} ${t} ${u} = ${D}`;f(h=>[...h.slice(-9),o])}c(!0),a(j)},T=(j,u,p)=>{switch(p){case"+":return j+u;case"-":return j-u;case"Ã—":return j*u;case"Ã·":return u!==0?j/u:0;case"%":return j%u;default:return u}},I=()=>{t&&r!==null&&(y("="),a(null),s(null),c(!0))},b=j=>{const u=parseFloat(l);let p;switch(j){case"âˆš":p=Math.sqrt(u);break;case"xÂ²":p=u*u;break;case"1/x":p=u!==0?1/u:0;break;case"+/-":p=-u;break;default:return}w(String(p)),c(!0);const D=`${j}(${u}) = ${p}`;f(o=>[...o.slice(-9),D])};x.useEffect(()=>{const j=u=>{const{key:p}=u;p>="0"&&p<="9"?g(p):p==="."?E():p==="+"||p==="-"||p==="*"||p==="/"?y(p):p==="Enter"||p==="="?I():p==="Escape"||p==="c"||p==="C"?d():p==="Backspace"&&(l.length>1?w(l.slice(0,-1)):w("0"))};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[l,t,r,i,g,E,y,I]);const S=j=>{if(j.length>12){const u=parseFloat(j);if(u>999999999999||u<-999999999999)return u.toExponential(6)}return j},M=({onClick:j,className:u="",children:p,title:D})=>e.jsx("button",{onClick:j,title:D,className:`
        h-12 rounded-lg font-medium text-sm transition-all duration-150
        hover:scale-105 active:scale-95 shadow-sm
        ${u}
      `,children:p});return e.jsxs("div",{className:"flex h-full bg-gray-900 text-white",children:[e.jsxs("div",{className:"flex flex-col p-4 flex-1",children:[e.jsx("div",{className:"bg-black rounded-lg p-4 mb-4 min-h-[80px] flex flex-col justify-end",children:e.jsxs("div",{className:"text-right",children:[t&&r!==null&&e.jsxs("div",{className:"text-gray-400 text-sm mb-1",children:[r," ",t]}),e.jsx("div",{className:"text-3xl font-mono overflow-hidden",children:S(l)})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 flex-1",children:[e.jsx(M,{onClick:d,className:"bg-red-600 hover:bg-red-700 text-white col-span-2",title:"Clear All (Esc)",children:"AC"}),e.jsx(M,{onClick:N,className:"bg-orange-600 hover:bg-orange-700 text-white",title:"Clear Entry",children:"CE"}),e.jsx(M,{onClick:()=>y("Ã·"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Divide (/)",children:"Ã·"}),e.jsx(M,{onClick:()=>g("7"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"7"}),e.jsx(M,{onClick:()=>g("8"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"8"}),e.jsx(M,{onClick:()=>g("9"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"9"}),e.jsx(M,{onClick:()=>y("Ã—"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Multiply (*)",children:"Ã—"}),e.jsx(M,{onClick:()=>g("4"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"4"}),e.jsx(M,{onClick:()=>g("5"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"5"}),e.jsx(M,{onClick:()=>g("6"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"6"}),e.jsx(M,{onClick:()=>y("-"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Subtract (-)",children:"âˆ’"}),e.jsx(M,{onClick:()=>g("1"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"1"}),e.jsx(M,{onClick:()=>g("2"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"2"}),e.jsx(M,{onClick:()=>g("3"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"3"}),e.jsx(M,{onClick:()=>y("+"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Add (+)",children:"+"}),e.jsx(M,{onClick:()=>b("+/-"),className:"bg-gray-600 hover:bg-gray-500 text-white",title:"Change Sign",children:"+/âˆ’"}),e.jsx(M,{onClick:()=>g("0"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"0"}),e.jsx(M,{onClick:E,className:"bg-gray-700 hover:bg-gray-600 text-white",title:"Decimal Point (.)",children:"."}),e.jsx(M,{onClick:I,className:"bg-green-600 hover:bg-green-700 text-white",title:"Equals (Enter)",children:"="}),e.jsx(M,{onClick:()=>b("âˆš"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Square Root",children:"âˆš"}),e.jsx(M,{onClick:()=>b("xÂ²"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Square",children:"xÂ²"}),e.jsx(M,{onClick:()=>b("1/x"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Reciprocal",children:"1/x"}),e.jsx(M,{onClick:()=>y("%"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Modulo",children:"%"})]})]}),e.jsxs("div",{className:"w-64 bg-gray-800 border-l border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"History"}),e.jsx("button",{onClick:()=>f([]),className:"p-1 text-gray-400 hover:text-white rounded",title:"Clear History",children:e.jsx(Me,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:m.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No calculations yet"}):m.slice().reverse().map((j,u)=>e.jsx("div",{className:"p-2 bg-gray-700 rounded text-sm font-mono cursor-pointer hover:bg-gray-600",onClick:()=>{const p=j.split(" = ")[1];p&&(w(p),c(!0))},children:j},u))})]})]})},Ss=({onClose:n})=>{const[r,s]=x.useState([]),[t,a]=x.useState(null),[i,c]=x.useState(!1),[m,f]=x.useState(""),[l,w]=x.useState(""),[g,E]=x.useState(""),[d,N]=x.useState(""),{createFile:y,navigateTo:T}=B();x.useEffect(()=>{const h=localStorage.getItem("daveOS-notes");if(h){const z=JSON.parse(h).map(F=>({...F,createdAt:new Date(F.createdAt),modifiedAt:new Date(F.modifiedAt)}));s(z)}},[]),x.useEffect(()=>{localStorage.setItem("daveOS-notes",JSON.stringify(r))},[r]);const I=()=>{const h={id:Date.now().toString(),title:"New Note",content:"",createdAt:new Date,modifiedAt:new Date,tags:[]};s(z=>[h,...z]),a(h),w(h.title),E(h.content),N(""),c(!0)},b=h=>{confirm("Delete this note?")&&(s(z=>z.filter(F=>F.id!==h)),t?.id===h&&(a(null),c(!1)))},S=h=>{a(h),w(h.title),E(h.content),N(h.tags.join(", ")),c(!0)},M=()=>{if(!t)return;const h={...t,title:l.trim()||"Untitled",content:g,tags:d.split(",").map(z=>z.trim()).filter(z=>z),modifiedAt:new Date};s(z=>z.map(F=>F.id===t.id?h:F)),a(h),c(!1)},j=()=>{c(!1),t&&(w(t.title),E(t.content),N(t.tags.join(", ")))},u=async h=>{try{await T("/home/user/Documents");const z=`${h.title.replace(/[^a-zA-Z0-9]/g,"_")}.txt`,F=`${h.title}
${"=".repeat(h.title.length)}

${h.content}

Tags: ${h.tags.join(", ")}
Created: ${h.createdAt.toLocaleString()}
Modified: ${h.modifiedAt.toLocaleString()}`;await y(z,F),alert(`Note exported as ${z}`)}catch(z){console.error("Error exporting note:",z),alert("Error exporting note")}},p=r.filter(h=>h.title.toLowerCase().includes(m.toLowerCase())||h.content.toLowerCase().includes(m.toLowerCase())||h.tags.some(z=>z.toLowerCase().includes(m.toLowerCase()))),D=h=>{const F=new Date().getTime()-h.getTime(),v=Math.floor(F/(1e3*60*60*24));return v===0?h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):v===1?"Yesterday":v<7?`${v} days ago`:h.toLocaleDateString()},o=h=>h.length>100?h.substring(0,100)+"...":h;return e.jsxs("div",{className:"flex h-full bg-white",children:[e.jsxs("div",{className:"w-80 bg-gray-50 border-r border-gray-300 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Notes"}),e.jsx("button",{onClick:I,className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"New Note",children:e.jsx(ke,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search notes...",value:m,onChange:h=>f(h.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:p.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(be,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No notes found"}),e.jsx("p",{className:"text-sm",children:"Create your first note!"})]}):p.map(h=>e.jsx("div",{className:`p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 ${t?.id===h.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,onClick:()=>{a(h),c(!1)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:h.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:o(h.content)}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:D(h.modifiedAt)}),h.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.tags.slice(0,2).map((z,F)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:z},F)),h.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",h.tags.length-2]})]})]})]}),e.jsx("button",{onClick:z=>{z.stopPropagation(),b(h.id)},className:"ml-2 p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete Note",children:e.jsx(re,{className:"w-4 h-4"})})]})},h.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-300 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[i?e.jsx("input",{type:"text",value:l,onChange:h=>w(h.target.value),className:"text-xl font-semibold w-full border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Note title..."}):e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created: ",t.createdAt.toLocaleDateString()]}),e.jsxs("span",{children:["Modified: ",t.modifiedAt.toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:M,className:"p-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors",title:"Save",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:j,className:"p-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",title:"Cancel",children:e.jsx(G,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>S(t),className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",title:"Edit",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(t),className:"p-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",title:"Export to File",children:"ðŸ“„"})]})})]}),i?e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",value:d,onChange:h=>N(h.target.value),placeholder:"Tags (comma separated)...",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}):t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:t.tags.map((h,z)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full",children:h},z))})]}),e.jsx("div",{className:"flex-1 p-4",children:i?e.jsx("textarea",{value:g,onChange:h=>E(h.target.value),className:"w-full h-full border border-gray-300 rounded p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Start writing your note..."}):e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-sans leading-relaxed",children:t.content||"This note is empty. Click Edit to add content."})})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No note selected"}),e.jsx("p",{children:"Select a note from the sidebar or create a new one"})]})})})]})},Cs=({imagePath:n,onClose:r})=>{const[s,t]=x.useState(null),[a,i]=x.useState([]),[c,m]=x.useState(0),[f,l]=x.useState(100),[w,g]=x.useState(0),[E,d]=x.useState(!1),[N,y]=x.useState({x:0,y:0}),[T,I]=x.useState({x:0,y:0}),[b,S]=x.useState(!1),[M,j]=x.useState(null),u=x.useRef(null),p=x.useRef(null),{navigateTo:D}=B(),o=["jpg","jpeg","png","gif","bmp","webp","svg"];x.useEffect(()=>{n?h(n):z()},[n]);const h=async L=>{try{const $=L.substring(0,L.lastIndexOf("/"))||"/",K=L.substring(L.lastIndexOf("/")+1);await D($),z();const ee=B.getState().currentEntries.filter(le=>le.type===O.FILE&&F(le.name)),oe=ee.findIndex(le=>le.name===K);oe!==-1&&(m(oe),t(v(ee[oe])),j(ee[oe]))}catch($){console.error("Error loading image:",$)}},z=()=>{const $=B.getState().currentEntries.filter(K=>K.type===O.FILE&&F(K.name));i($),$.length>0&&!s&&(m(0),t(v($[0])),j($[0]))},F=L=>{const $=L.split(".").pop()?.toLowerCase();return $?o.includes($):!1},v=L=>{const $=["https://picsum.photos/800/600?random=1","https://picsum.photos/800/600?random=2","https://picsum.photos/800/600?random=3","https://picsum.photos/800/600?random=4","https://picsum.photos/800/600?random=5"];return $[Math.floor(Math.random()*$.length)]},k=L=>{if(a.length===0)return;let $;L==="prev"?$=c>0?c-1:a.length-1:$=c<a.length-1?c+1:0,m($),t(v(a[$])),j(a[$]),C()},A=L=>{const $=Math.max(10,Math.min(500,f+L));l($)},U=L=>{g($=>($+L)%360)},C=()=>{l(100),g(0),I({x:0,y:0})},R=()=>{if(!u.current||!p.current)return;const L=p.current.getBoundingClientRect(),$=u.current,K=(L.width-40)/$.naturalWidth,Fe=(L.height-40)/$.naturalHeight,ee=Math.min(K,Fe);l(Math.round(ee*100)),I({x:0,y:0})},W=L=>{f>100&&(d(!0),y({x:L.clientX-T.x,y:L.clientY-T.y}))},P=L=>{E&&I({x:L.clientX-N.x,y:L.clientY-N.y})},Y=()=>{d(!1)};x.useEffect(()=>{const L=$=>{switch($.key){case"ArrowLeft":k("prev");break;case"ArrowRight":k("next");break;case"+":case"=":l(K=>Math.min(K+.1,3));break;case"-":l(K=>Math.max(K-.1,.1));break;case"0":l(1);break;case"i":S(!b);break}};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[k,b]);const V=L=>L?L<1024?`${L} B`:L<1024*1024?`${(L/1024).toFixed(1)} KB`:`${(L/(1024*1024)).toFixed(1)} MB`:"Unknown";return s?e.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 border-b border-gray-700",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm font-medium",children:[M?.name," (",c+1," of ",a.length,")"]})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>k("prev"),disabled:a.length<=1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous (â†)",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k("next"),disabled:a.length<=1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Next (â†’)",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>A(-25),className:"p-1 text-gray-400 hover:text-white",title:"Zoom Out (-)",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-700 rounded min-w-[60px] text-center",children:[f,"%"]}),e.jsx("button",{onClick:()=>A(25),className:"p-1 text-gray-400 hover:text-white",title:"Zoom In (+)",children:e.jsx(bt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:R,className:"p-1 text-gray-400 hover:text-white",title:"Fit to Window (F)",children:e.jsx(yt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:C,className:"p-1 text-gray-400 hover:text-white",title:"Reset View (0)",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>U(-90),className:"p-1 text-gray-400 hover:text-white",title:"Rotate Left",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(90),className:"p-1 text-gray-400 hover:text-white",title:"Rotate Right",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>S(!b),className:`p-1 hover:text-white ${b?"text-blue-400":"text-gray-400"}`,title:"Image Info (I)",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{console.log("Download image:",M?.name)},className:"p-1 text-gray-400 hover:text-white",title:"Download",children:e.jsx(wt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{ref:p,className:"flex-1 overflow-hidden relative cursor-grab active:cursor-grabbing",onMouseDown:W,onMouseMove:P,onMouseUp:Y,onMouseLeave:Y,children:[e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("img",{ref:u,src:s,alt:M?.name,className:"max-w-none transition-transform duration-200",style:{transform:`
                translate(${T.x}px, ${T.y}px) 
                scale(${f/100}) 
                rotate(${w}deg)
              `,cursor:f>100?"grab":"default"},onLoad:()=>{f===100&&R()},draggable:!1})}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full transition-all",children:e.jsx(me,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>k("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full transition-all",children:e.jsx(ne,{className:"w-6 h-6"})})]})]}),b&&M&&e.jsxs("div",{className:"absolute top-16 right-4 bg-black bg-opacity-90 rounded-lg p-4 min-w-[250px] max-w-[300px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium",children:"Image Information"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-white",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Name:"}),e.jsx("div",{className:"break-all",children:M.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Size:"}),e.jsx("div",{children:V(M.size)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Modified:"}),e.jsx("div",{children:M.modifiedAt?.toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Type:"}),e.jsx("div",{children:M.name.split(".").pop()?.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Zoom:"}),e.jsxs("div",{children:[f,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Rotation:"}),e.jsxs("div",{children:[w,"Â°"]})]})]})]}),e.jsx("div",{className:"absolute bottom-4 left-4 text-xs text-gray-500",children:e.jsx("div",{children:"â† â†’ Navigate â€¢ + - Zoom â€¢ 0 Reset â€¢ F Fit â€¢ I Info"})})]}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-900 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ–¼ï¸"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No images found"}),e.jsx("p",{className:"text-gray-400",children:"Navigate to a folder with images to view them"})]})})},Ds=({onClose:n})=>{const[r,s]=x.useState("appearance"),[t,a]=x.useState({appearance:{theme:"light",accentColor:"#3b82f6",wallpaper:"default",fontSize:14,animations:!0},display:{resolution:"1920x1080",scaling:100,brightness:80,nightMode:!1,nightModeSchedule:{start:"22:00",end:"06:00"}},audio:{masterVolume:70,systemSounds:!0,notificationSounds:!0,microphoneVolume:50},network:{wifi:!0,autoConnect:!0,proxy:"",dns:"8.8.8.8"},privacy:{locationServices:!1,analytics:!1,crashReports:!0,cookies:"necessary"},notifications:{enabled:!0,showOnLockScreen:!1,soundEnabled:!0,vibrationEnabled:!0,doNotDisturb:!1,dndSchedule:{start:"23:00",end:"07:00"}},input:{keyboardLayout:"US",keyRepeatRate:50,mouseSpeed:50,scrollDirection:"natural",touchpadGestures:!0},system:{language:"English",region:"United States",timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",autoUpdates:!0,telemetry:!1},accessibility:{highContrast:!1,largeText:!1,screenReader:!1,reducedMotion:!1,colorBlindness:"none"}}),[i,c]=x.useState(!1);x.useEffect(()=>{const o=localStorage.getItem("daveOS-settings");o&&a(JSON.parse(o))},[]);const m=()=>{localStorage.setItem("daveOS-settings",JSON.stringify(t)),c(!1)},f=()=>{confirm("Reset all settings to default values?")&&(localStorage.removeItem("daveOS-settings"),window.location.reload())},l=(o,h,z)=>{a(F=>({...F,[o]:{...F[o],[h]:z}})),c(!0)},w=[{id:"appearance",name:"Appearance",icon:jt},{id:"display",name:"Display",icon:Nt},{id:"audio",name:"Audio",icon:Se},{id:"network",name:"Network",icon:ge},{id:"privacy",name:"Privacy",icon:kt},{id:"notifications",name:"Notifications",icon:se},{id:"input",name:"Input",icon:St},{id:"system",name:"System",icon:Ct},{id:"accessibility",name:"Accessibility",icon:Dt}],g=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"],E=({value:o,onChange:h,min:z=0,max:F=100,step:v=1,label:k})=>e.jsxs("div",{className:"space-y-2",children:[k&&e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:k}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-500",children:z}),e.jsx("input",{type:"range",min:z,max:F,step:v,value:o,onChange:A=>h(Number(A.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-500",children:F}),e.jsx("span",{className:"text-sm font-medium w-12 text-right",children:o})]})]}),d=({checked:o,onChange:h,label:z,description:F})=>e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:z}),F&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:F})]}),e.jsx("button",{onClick:()=>h(!o),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o?"translate-x-6":"translate-x-1"}`})})]}),N=({value:o,onChange:h,options:z,label:F})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:F}),e.jsx("select",{value:o,onChange:v=>h(v.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:z.map(v=>e.jsx("option",{value:v.value,children:v.label},v.value))})]}),y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Theme"}),e.jsx(N,{value:t.appearance.theme,onChange:o=>l("appearance","theme",o),options:[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"auto",label:"Auto (System)"}],label:"Theme Mode"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Accent Color"}),e.jsx("div",{className:"flex space-x-3",children:g.map(o=>e.jsx("button",{onClick:()=>l("appearance","accentColor",o),className:`w-8 h-8 rounded-full border-2 ${t.appearance.accentColor===o?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:o}},o))})]}),e.jsx(E,{value:t.appearance.fontSize,onChange:o=>l("appearance","fontSize",o),min:12,max:20,label:"Font Size"}),e.jsx(d,{checked:t.appearance.animations,onChange:o=>l("appearance","animations",o),label:"Enable Animations",description:"Show smooth transitions and effects"})]}),T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{value:t.display.resolution,onChange:o=>l("display","resolution",o),options:[{value:"1920x1080",label:"1920 Ã— 1080 (Full HD)"},{value:"2560x1440",label:"2560 Ã— 1440 (QHD)"},{value:"3840x2160",label:"3840 Ã— 2160 (4K)"}],label:"Resolution"}),e.jsx(E,{value:t.display.scaling,onChange:o=>l("display","scaling",o),min:75,max:200,step:25,label:"Display Scaling (%)"}),e.jsx(E,{value:t.display.brightness,onChange:o=>l("display","brightness",o),label:"Brightness"}),e.jsx(d,{checked:t.display.nightMode,onChange:o=>l("display","nightMode",o),label:"Night Mode",description:"Reduces blue light for better sleep"}),t.display.nightMode&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:t.display.nightModeSchedule.start,onChange:o=>l("display","nightModeSchedule",{...t.display.nightModeSchedule,start:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:t.display.nightModeSchedule.end,onChange:o=>l("display","nightModeSchedule",{...t.display.nightModeSchedule,end:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]})]})]}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{value:t.audio.masterVolume,onChange:o=>l("audio","masterVolume",o),label:"Master Volume"}),e.jsx(E,{value:t.audio.microphoneVolume,onChange:o=>l("audio","microphoneVolume",o),label:"Microphone Volume"}),e.jsx(d,{checked:t.audio.systemSounds,onChange:o=>l("audio","systemSounds",o),label:"System Sounds",description:"Play sounds for system events"}),e.jsx(d,{checked:t.audio.notificationSounds,onChange:o=>l("audio","notificationSounds",o),label:"Notification Sounds",description:"Play sounds for notifications"})]}),b=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.network.wifi,onChange:o=>l("network","wifi",o),label:"Wi-Fi",description:"Enable wireless networking"}),e.jsx(d,{checked:t.network.autoConnect,onChange:o=>l("network","autoConnect",o),label:"Auto-connect to known networks"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DNS Server"}),e.jsx("input",{type:"text",value:t.network.dns,onChange:o=>l("network","dns",o.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"8.8.8.8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proxy Server"}),e.jsx("input",{type:"text",value:t.network.proxy,onChange:o=>l("network","proxy",o.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"proxy.example.com:8080"})]})]}),S=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.privacy.locationServices,onChange:o=>l("privacy","locationServices",o),label:"Location Services",description:"Allow apps to access your location"}),e.jsx(d,{checked:t.privacy.analytics,onChange:o=>l("privacy","analytics",o),label:"Analytics & Diagnostics",description:"Share usage data to improve the system"}),e.jsx(d,{checked:t.privacy.crashReports,onChange:o=>l("privacy","crashReports",o),label:"Crash Reports",description:"Automatically send crash reports"}),e.jsx(N,{value:t.privacy.cookies,onChange:o=>l("privacy","cookies",o),options:[{value:"all",label:"Accept All Cookies"},{value:"necessary",label:"Necessary Cookies Only"},{value:"none",label:"Block All Cookies"}],label:"Cookie Policy"})]}),M=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.notifications.enabled,onChange:o=>l("notifications","enabled",o),label:"Enable Notifications"}),e.jsx(d,{checked:t.notifications.showOnLockScreen,onChange:o=>l("notifications","showOnLockScreen",o),label:"Show on Lock Screen"}),e.jsx(d,{checked:t.notifications.soundEnabled,onChange:o=>l("notifications","soundEnabled",o),label:"Notification Sounds"}),e.jsx(d,{checked:t.notifications.doNotDisturb,onChange:o=>l("notifications","doNotDisturb",o),label:"Do Not Disturb",description:"Silence notifications during specified hours"}),t.notifications.doNotDisturb&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:t.notifications.dndSchedule.start,onChange:o=>l("notifications","dndSchedule",{...t.notifications.dndSchedule,start:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:t.notifications.dndSchedule.end,onChange:o=>l("notifications","dndSchedule",{...t.notifications.dndSchedule,end:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]})]})]}),j=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{value:t.input.keyboardLayout,onChange:o=>l("input","keyboardLayout",o),options:[{value:"US",label:"US English"},{value:"UK",label:"UK English"},{value:"ES",label:"Spanish"},{value:"FR",label:"French"},{value:"DE",label:"German"}],label:"Keyboard Layout"}),e.jsx(E,{value:t.input.keyRepeatRate,onChange:o=>l("input","keyRepeatRate",o),label:"Key Repeat Rate"}),e.jsx(E,{value:t.input.mouseSpeed,onChange:o=>l("input","mouseSpeed",o),label:"Mouse Speed"}),e.jsx(N,{value:t.input.scrollDirection,onChange:o=>l("input","scrollDirection",o),options:[{value:"natural",label:"Natural (Content moves with finger)"},{value:"traditional",label:"Traditional (Content moves opposite to finger)"}],label:"Scroll Direction"}),e.jsx(d,{checked:t.input.touchpadGestures,onChange:o=>l("input","touchpadGestures",o),label:"Touchpad Gestures",description:"Enable multi-finger gestures"})]}),u=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{value:t.system.language,onChange:o=>l("system","language",o),options:[{value:"English",label:"English"},{value:"Spanish",label:"EspaÃ±ol"},{value:"French",label:"FranÃ§ais"},{value:"German",label:"Deutsch"},{value:"Portuguese",label:"PortuguÃªs"}],label:"Language"}),e.jsx(N,{value:t.system.region,onChange:o=>l("system","region",o),options:[{value:"United States",label:"United States"},{value:"United Kingdom",label:"United Kingdom"},{value:"Canada",label:"Canada"},{value:"Australia",label:"Australia"}],label:"Region"}),e.jsx(N,{value:t.system.timeFormat,onChange:o=>l("system","timeFormat",o),options:[{value:"12h",label:"12-hour (AM/PM)"},{value:"24h",label:"24-hour"}],label:"Time Format"}),e.jsx(N,{value:t.system.dateFormat,onChange:o=>l("system","dateFormat",o),options:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD"}],label:"Date Format"}),e.jsx(d,{checked:t.system.autoUpdates,onChange:o=>l("system","autoUpdates",o),label:"Automatic Updates",description:"Install updates automatically"}),e.jsx(d,{checked:t.system.telemetry,onChange:o=>l("system","telemetry",o),label:"Telemetry",description:"Send usage data to improve the system"})]}),p=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.accessibility.highContrast,onChange:o=>l("accessibility","highContrast",o),label:"High Contrast",description:"Increase contrast for better visibility"}),e.jsx(d,{checked:t.accessibility.largeText,onChange:o=>l("accessibility","largeText",o),label:"Large Text",description:"Use larger text throughout the system"}),e.jsx(d,{checked:t.accessibility.screenReader,onChange:o=>l("accessibility","screenReader",o),label:"Screen Reader",description:"Enable screen reader support"}),e.jsx(d,{checked:t.accessibility.reducedMotion,onChange:o=>l("accessibility","reducedMotion",o),label:"Reduce Motion",description:"Minimize animations and transitions"}),e.jsx(N,{value:t.accessibility.colorBlindness,onChange:o=>l("accessibility","colorBlindness",o),options:[{value:"none",label:"None"},{value:"protanopia",label:"Protanopia (Red-blind)"},{value:"deuteranopia",label:"Deuteranopia (Green-blind)"},{value:"tritanopia",label:"Tritanopia (Blue-blind)"}],label:"Color Blindness Filter"})]}),D=()=>{switch(r){case"appearance":return y();case"display":return T();case"audio":return I();case"network":return b();case"privacy":return S();case"notifications":return M();case"input":return j();case"system":return u();case"accessibility":return p();default:return null}};return e.jsxs("div",{className:"flex h-full bg-white",children:[e.jsxs("div",{className:"w-64 bg-gray-50 border-r border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-gray-600"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Settings"})]})}),e.jsx("div",{className:"p-2",children:w.map(o=>{const h=o.icon;return e.jsxs("button",{onClick:()=>s(o.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${r===o.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(h,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:o.name}),e.jsx(ne,{className:"w-4 h-4 ml-auto"})]},o.id)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold capitalize",children:r}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Configure your ",r," preferences"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[i&&e.jsxs("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]}),e.jsxs("button",{onClick:f,className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset"})]})]})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-auto",children:D()})]})]})},Es=({onClose:n})=>{const[r,s]=x.useState(new Date),[t,a]=x.useState(new Date),[i,c]=x.useState("month"),[m,f]=x.useState([]),[l,w]=x.useState(!1),[g,E]=x.useState(null),[d,N]=x.useState({title:"",description:"",date:"",startTime:"09:00",endTime:"10:00",location:"",attendees:"",reminder:15,color:"#3b82f6",allDay:!1}),y=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"];x.useEffect(()=>{const v=localStorage.getItem("daveOS-calendar-events");if(v){const k=JSON.parse(v).map(A=>({...A,date:new Date(A.date)}));f(k)}},[]),x.useEffect(()=>{localStorage.setItem("daveOS-calendar-events",JSON.stringify(m))},[m]);const T=v=>new Date(v.getFullYear(),v.getMonth()+1,0).getDate(),I=v=>new Date(v.getFullYear(),v.getMonth(),1).getDay(),b=v=>{s(k=>{const A=new Date(k);return v==="prev"?A.setMonth(k.getMonth()-1):A.setMonth(k.getMonth()+1),A})},S=v=>{s(k=>{const A=new Date(k),U=v==="prev"?-7:7;return A.setDate(k.getDate()+U),A})},M=v=>{s(k=>{const A=new Date(k),U=v==="prev"?-1:1;return A.setDate(k.getDate()+U),A})},j=v=>m.filter(k=>k.date.toDateString()===v.toDateString()),u=(v,k)=>{k?(E(k),N({title:k.title,description:k.description,date:k.date.toISOString().split("T")[0],startTime:k.startTime,endTime:k.endTime,location:k.location||"",attendees:k.attendees?.join(", ")||"",reminder:k.reminder||15,color:k.color,allDay:k.allDay})):(E(null),N({title:"",description:"",date:(v||t).toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",location:"",attendees:"",reminder:15,color:"#3b82f6",allDay:!1})),w(!0)},p=()=>{const v={id:g?.id||Date.now().toString(),title:d.title,description:d.description,date:new Date(d.date),startTime:d.startTime,endTime:d.endTime,location:d.location,attendees:d.attendees?d.attendees.split(",").map(k=>k.trim()):[],reminder:d.reminder,color:d.color,allDay:d.allDay};f(g?k=>k.map(A=>A.id===g.id?v:A):k=>[...k,v]),w(!1),E(null)},D=v=>{confirm("Delete this event?")&&(f(k=>k.filter(A=>A.id!==v)),w(!1))},o=v=>v.toLocaleDateString("en-US",{month:"long",year:"numeric"}),h=v=>{const k=new Date(v);k.setDate(v.getDate()-v.getDay());const A=new Date(k);return A.setDate(k.getDate()+6),`${k.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${A.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`},z=()=>{const v=T(r),k=I(r),A=[],U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];A.push(e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:U.map(W=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600",children:W},W))},"headers"));const C=[];let R=[];for(let W=0;W<k;W++)R.push(e.jsx("div",{className:"h-24 p-1 border border-gray-200"},`empty-${W}`));for(let W=1;W<=v;W++){const P=new Date(r.getFullYear(),r.getMonth(),W),Y=j(P),V=P.toDateString()===new Date().toDateString(),L=P.toDateString()===t.toDateString();R.push(e.jsxs("div",{className:`h-24 p-1 border border-gray-200 cursor-pointer hover:bg-gray-50 ${V?"bg-blue-50":""} ${L?"ring-2 ring-blue-500":""}`,onClick:()=>a(P),onDoubleClick:()=>u(P),children:[e.jsx("div",{className:`text-sm font-medium ${V?"text-blue-600":"text-gray-900"}`,children:W}),e.jsxs("div",{className:"space-y-1 mt-1",children:[Y.slice(0,2).map($=>e.jsx("div",{className:"text-xs p-1 rounded truncate cursor-pointer hover:opacity-80",style:{backgroundColor:$.color,color:"white"},onClick:K=>{K.stopPropagation(),u(void 0,$)},children:$.title},$.id)),Y.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",Y.length-2," more"]})]})]},W)),R.length===7&&(C.push(e.jsx("div",{className:"grid grid-cols-7 gap-1",children:R},`week-${C.length}`)),R=[])}for(;R.length<7&&R.length>0;)R.push(e.jsx("div",{className:"h-24 p-1 border border-gray-200"},`empty-end-${R.length}`));return R.length===7&&C.push(e.jsx("div",{className:"grid grid-cols-7 gap-1",children:R},`week-${C.length}`)),A.push(...C),e.jsx("div",{children:A})},F=()=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:g?"Edit Event":"New Event"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:d.title,onChange:v=>N(k=>({...k,title:v.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:v=>N(k=>({...k,description:v.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Event description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:d.date,onChange:v=>N(k=>({...k,date:v.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"allDay",checked:d.allDay,onChange:v=>N(k=>({...k,allDay:v.target.checked})),className:"rounded"}),e.jsx("label",{htmlFor:"allDay",className:"text-sm font-medium text-gray-700",children:"All day"})]}),!d.allDay&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:d.startTime,onChange:v=>N(k=>({...k,startTime:v.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:d.endTime,onChange:v=>N(k=>({...k,endTime:v.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:d.location,onChange:v=>N(k=>({...k,location:v.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),e.jsx("div",{className:"flex space-x-2",children:y.map(v=>e.jsx("button",{onClick:()=>N(k=>({...k,color:v})),className:`w-6 h-6 rounded-full border-2 ${d.color===v?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:v}},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder"}),e.jsxs("select",{value:d.reminder,onChange:v=>N(k=>({...k,reminder:Number(v.target.value)})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"No reminder"}),e.jsx("option",{value:5,children:"5 minutes before"}),e.jsx("option",{value:15,children:"15 minutes before"}),e.jsx("option",{value:30,children:"30 minutes before"}),e.jsx("option",{value:60,children:"1 hour before"}),e.jsx("option",{value:1440,children:"1 day before"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("div",{children:g&&e.jsxs("button",{onClick:()=>D(g.id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:p,disabled:!d.title,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})]})]})]})}):null;return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{i==="month"?b("prev"):i==="week"?S("prev"):M("prev")},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(me,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-xl font-semibold min-w-[200px] text-center",children:[i==="month"&&o(r),i==="week"&&h(r),i==="day"&&r.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),e.jsx("button",{onClick:()=>{i==="month"?b("next"):i==="week"?S("next"):M("next")},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:()=>s(new Date),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Today"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex border border-gray-300 rounded",children:["month","week","day"].map(v=>e.jsx("button",{onClick:()=>c(v),className:`px-3 py-1 text-sm capitalize ${i===v?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:v},v))}),e.jsxs("button",{onClick:()=>u(),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"New Event"})]})]})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-auto",children:[i==="month"&&z(),i==="week"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Week view - Coming soon"}),i==="day"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Day view - Coming soon"})]}),F()]})},Ms=({onClose:n})=>{const[r,s]=x.useState({cpu:{usage:0,cores:8,frequency:2400,temperature:45},memory:{used:0,total:16384,available:0,percentage:0},storage:{used:0,total:512e3,available:0,percentage:0},network:{download:0,upload:0,ping:25,connected:!0},battery:{level:85,charging:!1,timeRemaining:240},processes:[]}),[t,a]=x.useState("overview"),[i,c]=x.useState(!0),[m,f]=x.useState(2e3),[l,w]=x.useState([]),[g,E]=x.useState([]),[d,N]=x.useState({download:[],upload:[]}),y=x.useRef(null),T=()=>{const o=Math.random()*100,h=8192+Math.random()*4096,z=16384,F=256e3+Math.random()*5e4,v=512e3;return{cpu:{usage:o,cores:8,frequency:2400+Math.random()*400,temperature:40+Math.random()*20},memory:{used:h,total:z,available:z-h,percentage:h/z*100},storage:{used:F,total:v,available:v-F,percentage:F/v*100},network:{download:Math.random()*1e3,upload:Math.random()*100,ping:20+Math.random()*30,connected:Math.random()>.05},battery:{level:70+Math.random()*30,charging:Math.random()>.7,timeRemaining:180+Math.random()*120},processes:I()}},I=()=>["System","Chrome","VSCode","Node.js","Discord","Spotify","Windows Explorer","dwm.exe","winlogon.exe","svchost.exe","firefox.exe","steam.exe","notepad.exe","calculator.exe"].map((h,z)=>({name:h,pid:1e3+z*100+Math.floor(Math.random()*100),cpu:Math.random()*25,memory:Math.random()*1024,status:Math.random()>.1?"Running":"Sleeping"})).sort((h,z)=>z.cpu-h.cpu),b=()=>{const o=T();s(o),w(h=>[...h.slice(-59),o.cpu.usage]),E(h=>[...h.slice(-59),o.memory.percentage]),N(h=>({download:[...h.download.slice(-59),o.network.download],upload:[...h.upload.slice(-59),o.network.upload]}))};x.useEffect(()=>(b(),i&&(y.current=window.setInterval(b,m)),()=>{y.current!==null&&window.clearInterval(y.current)}),[i,m]);const S=o=>{if(o===0)return"0 B";const h=1024,z=["B","KB","MB","GB","TB"],F=Math.floor(Math.log(o)/Math.log(h));return parseFloat((o/Math.pow(h,F)).toFixed(2))+" "+z[F]},M=o=>{const h=Math.floor(o/60),z=Math.floor(o%60);return`${h}h ${z}m`},j=({value:o,max:h,color:z="bg-blue-500",label:F})=>{const v=o/h*100;return e.jsxs("div",{className:"w-full",children:[F&&e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:F}),e.jsxs("span",{children:[v.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z}`,style:{width:`${Math.min(v,100)}%`}})})]})},u=({data:o,color:h="#3b82f6",height:z=40})=>{if(o.length<2)return e.jsx("div",{style:{height:z},className:"bg-gray-100 rounded"});const F=Math.max(...o,1),v=o.map((k,A)=>{const U=A/(o.length-1)*100,C=z-k/F*z;return`${U},${C}`}).join(" ");return e.jsxs("svg",{width:"100%",height:z,className:"rounded",children:[e.jsx("polyline",{fill:"none",stroke:h,strokeWidth:"2",points:v,vectorEffect:"non-scaling-stroke"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:h,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:h,stopOpacity:"0.1"})]})}),e.jsx("polygon",{fill:"url(#gradient)",points:`0,${z} ${v} 100,${z}`})]})},p=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-medium",children:"CPU"})]}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[r.cpu.usage.toFixed(1),"%"]})]}),e.jsx(j,{value:r.cpu.usage,max:100,color:"bg-blue-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Cores: ",r.cpu.cores]}),e.jsxs("div",{children:["Frequency: ",r.cpu.frequency.toFixed(0)," MHz"]}),e.jsxs("div",{children:["Temperature: ",r.cpu.temperature.toFixed(1),"Â°C"]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(u,{data:l,color:"#3b82f6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"w-5 h-5 text-green-500"}),e.jsx("h3",{className:"font-medium",children:"Memory"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[r.memory.percentage.toFixed(1),"%"]})]}),e.jsx(j,{value:r.memory.used,max:r.memory.total,color:"bg-green-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Used: ",S(r.memory.used*1024*1024)]}),e.jsxs("div",{children:["Available: ",S(r.memory.available*1024*1024)]}),e.jsxs("div",{children:["Total: ",S(r.memory.total*1024*1024)]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(u,{data:g,color:"#10b981"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zt,{className:"w-5 h-5 text-purple-500"}),e.jsx("h3",{className:"font-medium",children:"Storage"})]}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:[r.storage.percentage.toFixed(1),"%"]})]}),e.jsx(j,{value:r.storage.used,max:r.storage.total,color:"bg-purple-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Used: ",S(r.storage.used*1024*1024)]}),e.jsxs("div",{children:["Free: ",S(r.storage.available*1024*1024)]}),e.jsxs("div",{children:["Total: ",S(r.storage.total*1024*1024)]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"font-medium",children:"Network"})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${r.network.connected?"bg-green-500":"bg-red-500"}`})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Download:"}),e.jsxs("span",{className:"font-medium",children:[r.network.download.toFixed(1)," KB/s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Upload:"}),e.jsxs("span",{className:"font-medium",children:[r.network.upload.toFixed(1)," KB/s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ping:"}),e.jsxs("span",{className:"font-medium",children:[r.network.ping.toFixed(0)," ms"]})]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Download"}),e.jsx(u,{data:d.download,color:"#f59e0b",height:30}),e.jsx("div",{className:"text-xs text-gray-500",children:"Upload"}),e.jsx(u,{data:d.upload,color:"#ef4444",height:30})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"font-medium",children:"Battery"})]}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:[r.battery.level.toFixed(0),"%"]})]}),e.jsx(j,{value:r.battery.level,max:100,color:r.battery.level>20?"bg-yellow-500":"bg-red-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:`font-medium ${r.battery.charging?"text-green-600":"text-gray-600"}`,children:r.battery.charging?"Charging":"Discharging"}),r.battery.charging&&e.jsx(Ft,{className:"w-4 h-4 text-yellow-500"})]}),e.jsxs("div",{children:["Time remaining: ",M(r.battery.timeRemaining)]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(xe,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-medium",children:"System Info"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("div",{children:"OS: daveOS WebOS"}),e.jsx("div",{children:"Version: 1.0.0"}),e.jsxs("div",{children:["Uptime: ",M(Math.random()*1440)]}),e.jsx("div",{children:"Architecture: x64"}),e.jsxs("div",{children:["Browser: ",navigator.userAgent.split(" ")[0]]})]})]})]}),D=()=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-medium",children:"Running Processes"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Process"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"PID"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"CPU %"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Memory"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),e.jsx("tbody",{children:r.processes.map((o,h)=>e.jsxs("tr",{className:h%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium",children:o.name}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:o.pid}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("span",{className:`font-medium ${o.cpu>10?"text-red-600":"text-gray-600"}`,children:[o.cpu.toFixed(1),"%"]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:S(o.memory*1024*1024)}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.status==="Running"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:o.status})})]},o.pid))})]})})]});return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"w-6 h-6 text-blue-500"}),e.jsx("h1",{className:"text-xl font-semibold",children:"System Monitor"})]}),e.jsx("div",{className:"flex border border-gray-300 rounded",children:["overview","processes","network","storage"].map(o=>e.jsx("button",{onClick:()=>a(o),className:`px-3 py-1 text-sm capitalize ${t===o?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:o},o))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:o=>c(o.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto-refresh"})]}),e.jsxs("select",{value:m,onChange:o=>f(Number(o.target.value)),disabled:!i,className:"text-sm border border-gray-300 rounded px-2 py-1 disabled:opacity-50",children:[e.jsx("option",{value:1e3,children:"1s"}),e.jsx("option",{value:2e3,children:"2s"}),e.jsx("option",{value:5e3,children:"5s"}),e.jsx("option",{value:1e4,children:"10s"})]}),e.jsx("button",{onClick:b,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:"Refresh Now",children:e.jsx(Ue,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[t==="overview"&&p(),t==="processes"&&D(),t==="network"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Network details - Coming soon"}),t==="storage"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Storage details - Coming soon"})]})]})},zs=({onClose:n})=>{const[r,s]=x.useState("/home/user"),[t,a]=x.useState(["â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”","â”‚           Welcome to daveOS            â”‚","â”‚         Ubuntu-style Terminal          â”‚","â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜","",'Type "help" to see available commands.',""]),[i,c]=x.useState(""),[m,f]=x.useState([]),[l,w]=x.useState(-1),g=x.useRef(null),E=x.useRef(null);x.useEffect(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[t]),x.useEffect(()=>{g.current&&g.current.focus()},[]);const d=D=>{a(o=>[...o,D])},N=()=>`user@daveos:${r}$ `,y=async D=>{const o=D.trim();if(!o)return;f(v=>[...v,o]),w(-1),d(N()+o);const h=o.split(/\s+/),z=h[0].toLowerCase(),F=h.slice(1);try{switch(z){case"help":d("Available Commands:"),d(""),d("File System:"),d("  ls [path]     - List directory contents"),d("  cd <path>     - Change directory"),d("  pwd           - Print working directory"),d("  cat <file>    - Display file contents"),d("  mkdir <name>  - Create directory"),d("  touch <name>  - Create empty file"),d("  rm <name>     - Remove file or directory"),d(""),d("System:"),d("  clear         - Clear terminal screen"),d("  echo <text>   - Display text"),d("  whoami        - Display current user"),d("  date          - Display current date and time"),d("  help          - Show this help message");break;case"ls":await T(F);break;case"cd":await I(F);break;case"pwd":d(r);break;case"clear":a([]);break;case"echo":d(F.join(" "));break;case"whoami":d("user");break;case"date":d(new Date().toString());break;case"cat":await b(F);break;case"mkdir":await S(F);break;case"touch":await M(F);break;case"rm":await j(F);break;default:d(`Command not found: ${z}`),d('Type "help" to see available commands.')}}catch(v){d(`Error: ${v.message}`)}d("")},T=async D=>{const o=D.length>0?u(D[0]):r;try{await B.getState().navigateTo(o);const h=B.getState().currentEntries;if(h.length===0)return;const z=h.sort((F,v)=>F.type!==v.type?F.type===O.FOLDER?-1:1:F.name.localeCompare(v.name));for(const F of z){const v=F.type===O.FOLDER?"ðŸ“":"ðŸ“„",k=F.type===O.FOLDER?"/":"";d(`${v} ${F.name}${k}`)}}catch{d(`ls: cannot access '${o}': No such file or directory`)}},I=async D=>{if(D.length===0){s("/home/user");return}const o=u(D[0]);try{await B.getState().navigateTo(o),s(o)}catch{d(`cd: ${o}: No such file or directory`)}},b=async D=>{if(D.length===0){d("cat: missing file operand");return}const o=u(D[0]),h=o.substring(0,o.lastIndexOf("/"))||"/",z=o.substring(o.lastIndexOf("/")+1);try{await B.getState().navigateTo(h);const v=B.getState().currentEntries.find(k=>k.name===z&&k.type===O.FILE);if(!v){d(`cat: ${o}: No such file or directory`);return}v.content&&v.content.split(`
`).forEach(A=>d(A))}catch{d(`cat: ${o}: No such file or directory`)}},S=async D=>{if(D.length===0){d("mkdir: missing operand");return}await B.getState().createFolder(D[0])||d(`mkdir: cannot create directory '${D[0]}'`)},M=async D=>{if(D.length===0){d("touch: missing file operand");return}await B.getState().createFile(D[0],"")||d(`touch: cannot create file '${D[0]}'`)},j=async D=>{if(D.length===0){d("rm: missing operand");return}const h=B.getState().currentEntries.find(F=>F.name===D[0]);if(!h){d(`rm: cannot remove '${D[0]}': No such file or directory`);return}await B.getState().deleteEntries([h.id.toString()])||d(`rm: cannot remove '${D[0]}'`)},u=D=>{if(D.startsWith("/"))return D;if(D===".."){const o=r.split("/").filter(h=>h);return o.pop(),"/"+o.join("/")}return D==="."?r:r==="/"?`/${D}`:`${r}/${D}`},p=D=>{if(D.key==="Enter")y(i),c("");else if(D.key==="ArrowUp"){if(D.preventDefault(),m.length>0){const o=l===-1?m.length-1:Math.max(0,l-1);w(o),c(m[o])}}else if(D.key==="ArrowDown"&&(D.preventDefault(),l!==-1)){const o=Math.min(m.length-1,l+1);o===m.length-1?(w(-1),c("")):(w(o),c(m[o]))}};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-green-400 font-mono text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),e.jsx("span",{className:"text-white text-sm font-medium",children:"Terminal"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:"âœ•"})]}),e.jsxs("div",{ref:E,className:"flex-1 p-4 overflow-y-auto",style:{minHeight:"300px"},children:[t.map((D,o)=>e.jsx("div",{className:"whitespace-pre-wrap",children:D},o)),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-400",children:N()}),e.jsx("input",{ref:g,type:"text",value:i,onChange:D=>c(D.target.value),onKeyDown:p,className:"flex-1 bg-transparent border-none outline-none text-green-400 font-mono",autoFocus:!0})]})]})]})};function Fs({window:n,children:r}){const s=x.useRef(null),{closeWindow:t,minimizeWindow:a,maximizeWindow:i,restoreWindow:c,focusWindow:m,moveWindow:f,resizeWindow:l,updateWindowBounds:w}=q(),g=x.useCallback(S=>({x:S==="left"?0:globalThis.innerWidth/2,y:0,width:globalThis.innerWidth/2,height:globalThis.innerHeight}),[]),E=x.useCallback(()=>({x:0,y:0,width:globalThis.innerWidth,height:globalThis.innerHeight}),[]),{isDragging:d,handleMouseDown:N,resizeHandles:y}=vs({bounds:n.bounds,onMove:S=>f(n.id,S),onResize:S=>l(n.id,S),onBoundsChange:S=>w(n.id,S),disabled:n.maximized,resizable:n.resizable,movable:n.movable,minSize:{width:300,height:200}}),T=()=>{n.focused||m(n.id)},I=()=>{n.maximizable&&(n.maximized?c(n.id):i(n.id))};x.useEffect(()=>{if(!d)return;const S=()=>{const M=s.current?.getBoundingClientRect();if(!M)return;const j=globalThis.innerWidth,u=20;if(M.y<=u){const p=E();w(n.id,p),i(n.id);return}if(M.x<=u){const p=g("left");w(n.id,p);return}if(M.x+M.width>=j-u){const p=g("right");w(n.id,p);return}};return document.addEventListener("mouseup",S),()=>document.removeEventListener("mouseup",S)},[d,n.id,g,E,w,i]);const b={position:"fixed",left:n.maximized?64:n.bounds.x,top:n.maximized?48:n.bounds.y,width:n.maximized?"calc(100vw - 64px)":n.bounds.width,height:n.maximized?"calc(100vh - 48px)":n.bounds.height,zIndex:n.zIndex,display:n.visible?"flex":"none",flexDirection:"column",transition:n.maximized?"all 0.2s ease-out":"none",transform:n.minimized?"scale(0.1) translateY(100vh)":"none",opacity:n.minimized?0:1};return n.visible?e.jsxs("div",{ref:s,className:`fixed bg-surface overflow-hidden font-ubuntu ${n.focused?"":"opacity-95"} ${n.maximized?"rounded-none":"rounded-xl"}`,style:{...b,boxShadow:n.maximized?"none":"var(--shadow)",border:n.focused?"1px solid rgba(233, 84, 32, 0.3)":"1px solid var(--surface-border)"},onMouseDown:T,children:[e.jsxs("div",{className:`bg-surface border-b border-surface-border px-4 py-3 flex items-center justify-between cursor-move select-none ${n.maximized?"rounded-none":"rounded-t-xl"}`,onMouseDown:n.movable?N:void 0,onDoubleClick:I,style:{background:n.focused?"linear-gradient(135deg, var(--surface) 0%, var(--surface-2) 100%)":"var(--surface-2)"},children:[e.jsx("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:e.jsx("span",{className:"font-medium text-foreground truncate",children:n.title})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.minimizable&&e.jsx("button",{className:"w-7 h-7 rounded-full hover:bg-yellow-500 hover:bg-opacity-20 flex items-center justify-center transition-all duration-200 group",onClick:S=>{S.stopPropagation(),a(n.id)},title:"Minimize",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 opacity-80 group-hover:opacity-100 flex items-center justify-center",children:e.jsx(Wt,{size:8,className:"text-yellow-900 opacity-0 group-hover:opacity-100"})})}),n.maximizable&&e.jsx("button",{className:"w-7 h-7 rounded-full hover:bg-green-500 hover:bg-opacity-20 flex items-center justify-center transition-all duration-200 group",onClick:S=>{S.stopPropagation(),n.maximized?c(n.id):i(n.id)},title:n.maximized?"Restore":"Maximize",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 opacity-80 group-hover:opacity-100 flex items-center justify-center",children:n.maximized?e.jsx(Tt,{size:6,className:"text-green-900 opacity-0 group-hover:opacity-100"}):e.jsx(It,{size:6,className:"text-green-900 opacity-0 group-hover:opacity-100"})})}),n.closable&&e.jsx("button",{className:"w-7 h-7 rounded-full hover:bg-red-500 hover:bg-opacity-20 flex items-center justify-center transition-all duration-200 group",onClick:S=>{S.stopPropagation(),t(n.id)},title:"Close",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 opacity-80 group-hover:opacity-100 flex items-center justify-center",children:e.jsx(G,{size:8,className:"text-red-900 opacity-0 group-hover:opacity-100"})})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden bg-surface",children:r}),n.resizable&&!n.maximized&&y.map(({handle:S,onMouseDown:M,className:j,style:u})=>e.jsx("div",{className:j,style:u,onMouseDown:M},S))]}):null}function Ws(){const{windows:n}=q(),{currentWorkspace:r}=Z(),s=Object.values(n).filter(t=>t.workspace===r).sort((t,a)=>t.zIndex-a.zIndex);return e.jsx(e.Fragment,{children:s.map(t=>e.jsx(Fs,{window:t,children:e.jsx(Ts,{windowId:t.id,appId:t.appId})},t.id))})}function Ts({windowId:n,appId:r}){const t={terminal:zs,textedit:Ns,files:js,settings:Ds,calculator:ks,notes:Ss,imageviewer:Cs,calendar:Es,systemmonitor:Ms}[r];return t?e.jsx(t,{windowId:n}):e.jsx("div",{className:"flex items-center justify-center h-full text-foreground-muted",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"App not found"}),e.jsxs("p",{className:"text-sm",children:['The app "',r,'" could not be loaded.']})]})})}const Is=()=>{const{notifications:n}=qe(),[r,s]=x.useState([]);x.useEffect(()=>{const a=n.filter(i=>!i.read).slice(0,3);s(a)},[n]);const t=a=>{s(i=>i.filter(c=>c.id!==a))};return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(a=>e.jsx(Xt,{notification:a,onRemove:()=>t(a.id)},a.id))})},As=()=>{setTimeout(()=>{es.info("daveOS Ready","Welcome to your WebOS! All systems are operational.",{appId:"system",icon:e.jsx(se,{className:"w-5 h-5 text-blue-500"})})},3e3)};function Ls(){const{settings:n}=J(),{isOverviewOpen:r}=Z(),{initialize:s}=B();return x.useEffect(()=>{s(),As();const t=a=>{const{key:i,ctrlKey:c,altKey:m}=a;if(i==="Meta"||i==="Super"){a.preventDefault(),Z.getState().toggleOverview();return}if(m&&i==="Tab"){a.preventDefault();return}if(m&&i==="`"){a.preventDefault();return}if(c&&m&&(i==="ArrowLeft"||i==="ArrowRight")){a.preventDefault();const{workspaces:f,currentWorkspace:l,switchToWorkspace:w}=Z.getState(),g=f.findIndex(E=>E.id===l);i==="ArrowLeft"&&g>0?w(f[g-1].id):i==="ArrowRight"&&g<f.length-1&&w(f[g+1].id);return}if(i==="Escape"&&r){a.preventDefault(),Z.getState().closeOverview();return}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r,s]),x.useEffect(()=>{const t=a=>{a.preventDefault()};return document.addEventListener("contextmenu",t),()=>document.removeEventListener("contextmenu",t)},[]),x.useEffect(()=>{const t=document.documentElement;if(n.theme.mode==="dark")t.classList.add("dark");else if(n.theme.mode==="light")t.classList.remove("dark");else{const i=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",i)}t.classList.toggle("high-contrast",n.theme.highContrast);const a=document.body;a.classList.remove("font-size-small","font-size-normal","font-size-large","font-size-xl"),a.classList.add(`font-size-${n.theme.fontSize}`),n.theme.reducedMotion?t.style.setProperty("--animation-duration","0.01ms"):t.style.removeProperty("--animation-duration"),t.style.setProperty("--accent",n.theme.accentColor)},[n]),e.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-background text-foreground",children:[e.jsx(us,{}),e.jsx(rs,{}),e.jsx(cs,{}),e.jsx(Ws,{}),e.jsx(hs,{}),e.jsx(Is,{}),e.jsx("style",{children:`
        /* Custom scrollbar styles */
        .slider {
          background: linear-gradient(to right, var(--accent) 0%, var(--accent) 50%, var(--surface-border) 50%, var(--surface-border) 100%);
        }
        
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: var(--accent);
          cursor: pointer;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .slider::-moz-range-thumb {
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: var(--accent);
          cursor: pointer;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Dock auto-hide styles */
        .dock-auto-hide {
          transform: translateX(-100%);
          transition: transform 0.3s ease-out;
        }
        
        .dock-auto-hide:hover {
          transform: translateX(0);
        }

        /* Focus styles for accessibility */
        .focus-ring:focus-visible {
          outline: none;
          ring: 2px;
          ring-color: var(--accent);
          ring-offset: 2px;
          ring-offset-color: var(--background);
        }

        /* High contrast mode adjustments */
        .high-contrast {
          --surface-border: currentColor;
        }
        
        .high-contrast .window {
          border-width: 2px;
        }
        
        .high-contrast .btn {
          border-width: 2px;
        }

        /* Reduced motion preferences */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
      `})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});Ne.createRoot(document.getElementById("root")).render(e.jsx(Je.StrictMode,{children:e.jsx(Ls,{})}));
