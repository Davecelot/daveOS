import{r as m,a as We,R as Te}from"./vendor-DsceW-4w.js";import{c as le}from"./state-DC_EMq_D.js";import{X as Ae}from"./db-2jmnBxhj.js";import{S as te,G as ke,A as Le,a as Re,b as _e,H as Ce,R as De,L as Oe,F as ve,c as $e,d as Pe,C as He,e as Ue,T as ge,f as J,g as we,h as ce,i as pe,P as Ee,j as ue,X as se,k as xe,l as oe,Z as Be,m as Ye,M as Ke,n as Xe,I as fe,D as qe,o as Ze,p as Je,q as Ve,V as Ge,W as Me,r as Qe,B as Fe,K as et,s as tt,t as st,u as nt,v as at,w as rt,x as it,y as ot,z as lt,E as ct,J as dt,N as ut,O as mt,Q as xt,U as ht}from"./icons-iDErEp_X.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var ze={exports:{}},de={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=m,pt=Symbol.for("react.element"),ft=Symbol.for("react.fragment"),yt=Object.prototype.hasOwnProperty,bt=gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vt={key:!0,ref:!0,__self:!0,__source:!0};function Ie(a,r,s){var t,n={},i=null,c=null;s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(c=r.ref);for(t in r)yt.call(r,t)&&!vt.hasOwnProperty(t)&&(n[t]=r[t]);if(a&&a.defaultProps)for(t in r=a.defaultProps,r)n[t]===void 0&&(n[t]=r[t]);return{$$typeof:pt,type:a,key:i,ref:c,props:n,_owner:bt.current}}de.Fragment=ft;de.jsx=Ie;de.jsxs=Ie;ze.exports=de;var e=ze.exports,he={},je=We;he.createRoot=je.createRoot,he.hydrateRoot=je.hydrateRoot;const wt={},jt=a=>(r,s,t)=>{const n=t.subscribe;return t.subscribe=(c,x,h)=>{let l=c;if(x){const j=h?.equalityFn||Object.is;let g=c(t.getState());l=z=>{const d=c(z);if(!j(g,d)){const M=g;x(g=d,M)}},h?.fireImmediately&&x(g,g)}return n(l)},a(r,s,t)},Nt=jt;function St(a,r){let s;try{s=a()}catch{return}return{getItem:n=>{var i;const c=h=>h===null?null:JSON.parse(h,void 0),x=(i=s.getItem(n))!=null?i:null;return x instanceof Promise?x.then(c):c(x)},setItem:(n,i)=>s.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>s.removeItem(n)}}const ee=a=>r=>{try{const s=a(r);return s instanceof Promise?s:{then(t){return ee(t)(s)},catch(t){return this}}}catch(s){return{then(t){return this},catch(t){return ee(t)(s)}}}},kt=(a,r)=>(s,t,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:W=>W,version:0,merge:(W,T)=>({...T,...W}),...r},c=!1;const x=new Set,h=new Set;let l;try{l=i.getStorage()}catch{}if(!l)return a((...W)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...W)},t,n);const j=ee(i.serialize),g=()=>{const W=i.partialize({...t()});let T;const C=j({state:W,version:i.version}).then(E=>l.setItem(i.name,E)).catch(E=>{T=E});if(T)throw T;return C},z=n.setState;n.setState=(W,T)=>{z(W,T),g()};const d=a((...W)=>{s(...W),g()},t,n);let M;const b=()=>{var W;if(!l)return;c=!1,x.forEach(C=>C(t()));const T=((W=i.onRehydrateStorage)==null?void 0:W.call(i,t()))||void 0;return ee(l.getItem.bind(l))(i.name).then(C=>{if(C)return i.deserialize(C)}).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate)return i.migrate(C.state,C.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return C.state}).then(C=>{var E;return M=i.merge(C,(E=t())!=null?E:d),s(M,!0),g()}).then(()=>{T?.(M,void 0),c=!0,h.forEach(C=>C(M))}).catch(C=>{T?.(void 0,C)})};return n.persist={setOptions:W=>{i={...i,...W},W.getStorage&&(l=W.getStorage())},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>c,onHydrate:W=>(x.add(W),()=>{x.delete(W)}),onFinishHydration:W=>(h.add(W),()=>{h.delete(W)})},b(),M||d},Ct=(a,r)=>(s,t,n)=>{let i={storage:St(()=>localStorage),partialize:b=>b,version:0,merge:(b,W)=>({...W,...b}),...r},c=!1;const x=new Set,h=new Set;let l=i.storage;if(!l)return a((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...b)},t,n);const j=()=>{const b=i.partialize({...t()});return l.setItem(i.name,{state:b,version:i.version})},g=n.setState;n.setState=(b,W)=>{g(b,W),j()};const z=a((...b)=>{s(...b),j()},t,n);n.getInitialState=()=>z;let d;const M=()=>{var b,W;if(!l)return;c=!1,x.forEach(C=>{var E;return C((E=t())!=null?E:z)});const T=((W=i.onRehydrateStorage)==null?void 0:W.call(i,(b=t())!=null?b:z))||void 0;return ee(l.getItem.bind(l))(i.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate)return[!0,i.migrate(C.state,C.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var E;const[I,v]=C;if(d=i.merge(v,(E=t())!=null?E:z),s(d,!0),I)return j()}).then(()=>{T?.(d,void 0),d=t(),c=!0,h.forEach(C=>C(d))}).catch(C=>{T?.(void 0,C)})};return n.persist={setOptions:b=>{i={...i,...b},b.storage&&(l=b.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>M(),hasHydrated:()=>c,onHydrate:b=>(x.add(b),()=>{x.delete(b)}),onFinishHydration:b=>(h.add(b),()=>{h.delete(b)})},i.skipHydration||M(),d||z},Dt=(a,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((wt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),kt(a,r)):Ct(a,r),ye=Dt,me={theme:{mode:"light",accentColor:"#E95420",fontSize:"normal",reducedMotion:!1,highContrast:!1},dock:{position:"left",size:"normal",autoHide:!1,pinnedApps:["files","terminal","textedit","calculator","settings"]},language:"es",timezone:"America/Argentina/Buenos_Aires",use24HourFormat:!0,wallpaper:"/wallpapers/ubuntu-default.jpg",shortcuts:{overview:"Super",terminal:"Ctrl+Alt+T",files:"Super+E",screenshot:"PrtSc",lock:"Super+L","workspace-left":"Ctrl+Alt+Left","workspace-right":"Ctrl+Alt+Right","window-close":"Alt+F4","window-minimize":"Super+H","window-maximize":"Super+Up","alt-tab":"Alt+Tab","alt-grave":"Alt+`"}},G=le()(ye((a,r)=>({settings:me,setThemeMode:s=>{a(n=>({settings:{...n.settings,theme:{...n.settings.theme,mode:s}}}));const t=document.documentElement;if(s==="dark")t.classList.add("dark");else if(s==="light")t.classList.remove("dark");else{const n=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",n)}},setAccentColor:s=>{a(t=>({settings:{...t.settings,theme:{...t.settings.theme,accentColor:s}}})),document.documentElement.style.setProperty("--accent",s)},setFontSize:s=>{a(n=>({settings:{...n.settings,theme:{...n.settings.theme,fontSize:s}}}));const t=document.body;t.classList.remove("font-size-small","font-size-normal","font-size-large","font-size-xl"),t.classList.add(`font-size-${s}`)},setReducedMotion:s=>{a(t=>({settings:{...t.settings,theme:{...t.settings.theme,reducedMotion:s}}})),document.documentElement.style.setProperty("--animation-duration",s?"0.01ms":"0.3s")},setHighContrast:s=>{a(t=>({settings:{...t.settings,theme:{...t.settings.theme,highContrast:s}}})),document.documentElement.classList.toggle("high-contrast",s)},setDockPosition:s=>{a(t=>({settings:{...t.settings,dock:{...t.settings.dock,position:s}}}))},setDockSize:s=>{a(t=>({settings:{...t.settings,dock:{...t.settings.dock,size:s}}}))},setDockAutoHide:s=>{a(t=>({settings:{...t.settings,dock:{...t.settings.dock,autoHide:s}}}))},setPinnedApps:s=>{a(t=>({settings:{...t.settings,dock:{...t.settings.dock,pinnedApps:s}}}))},addPinnedApp:s=>{const{settings:t}=r();t.dock.pinnedApps.includes(s)||a(n=>({settings:{...n.settings,dock:{...n.settings.dock,pinnedApps:[...n.settings.dock.pinnedApps,s]}}}))},removePinnedApp:s=>{a(t=>({settings:{...t.settings,dock:{...t.settings.dock,pinnedApps:t.settings.dock.pinnedApps.filter(n=>n!==s)}}}))},setLanguage:s=>{a(t=>({settings:{...t.settings,language:s}})),document.documentElement.lang=s},setTimezone:s=>{a(t=>({settings:{...t.settings,timezone:s}}))},setUse24HourFormat:s=>{a(t=>({settings:{...t.settings,use24HourFormat:s}}))},setWallpaper:s=>{a(n=>({settings:{...n.settings,wallpaper:s}}));const t=document.querySelector(".desktop");t&&(t.style.backgroundImage=`url(${s})`)},setShortcut:(s,t)=>{a(n=>({settings:{...n.settings,shortcuts:{...n.settings.shortcuts,[s]:t}}}))},resetToDefaults:()=>{a({settings:me});const s=document.documentElement,t=document.body;s.className="",t.className="font-ubuntu overflow-hidden font-size-normal",s.style.removeProperty("--accent"),s.style.removeProperty("--animation-duration"),document.documentElement.lang=me.language},exportSettings:()=>{const{settings:s}=r();return JSON.stringify(s,null,2)},importSettings:s=>{try{const t=JSON.parse(s);if(!t.theme||!t.dock)return!1;a({settings:t});const{setThemeMode:n,setAccentColor:i,setFontSize:c,setReducedMotion:x,setHighContrast:h,setWallpaper:l,setLanguage:j}=r();return n(t.theme.mode),i(t.theme.accentColor),c(t.theme.fontSize),x(t.theme.reducedMotion),h(t.theme.highContrast),l(t.wallpaper),j(t.language),!0}catch(t){return console.error("Failed to import settings:",t),!1}}}),{name:"daveos-settings",version:1}));if(typeof window<"u"){const a=G.getState(),{setThemeMode:r,setAccentColor:s,setFontSize:t,setReducedMotion:n,setHighContrast:i,setWallpaper:c,setLanguage:x}=a;r(a.settings.theme.mode),s(a.settings.theme.accentColor),t(a.settings.theme.fontSize),n(a.settings.theme.reducedMotion),i(a.settings.theme.highContrast),c(a.settings.wallpaper),x(a.settings.language),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",l=>{G.getState().settings.theme.mode==="auto"&&document.documentElement.classList.toggle("dark",l.matches)})}const Ne={width:800,height:600},re={x:100,y:100},ie=30,K=le()(Nt((a,r)=>({windows:{},focusedWindow:null,nextZIndex:100,generateWindowId:()=>`window_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,openWindow:s=>{const t=r(),n=s.id||t.generateWindowId();if(s.appId){const l=t.getWindowsByApp(s.appId);if(l[0]&&l.length>0){const g=l[0];return t.focusWindow(g.id),g.id}}const c=t.getVisibleWindows().length,x={x:re.x+c*ie,y:re.y+c*ie},h={id:n,appId:s.appId,title:s.title,bounds:{...x,width:s.bounds?.width||Ne.width,height:s.bounds?.height||Ne.height},minimized:!1,maximized:!1,focused:!0,zIndex:t.nextZIndex,resizable:s.resizable??!0,movable:s.movable??!0,closable:s.closable??!0,minimizable:s.minimizable??!0,maximizable:s.maximizable??!0,visible:s.visible??!0,workspace:s.workspace||1};return a(l=>({windows:{...l.windows,[n]:h},focusedWindow:n,nextZIndex:l.nextZIndex+1})),n},closeWindow:s=>{a(t=>{const{[s]:n,...i}=t.windows,c=t.focusedWindow===s?Object.keys(i)[0]||null:t.focusedWindow;return{windows:i,focusedWindow:c}})},focusWindow:s=>{const t=r(),n=t.windows[s];n&&(a(i=>({windows:{...i.windows,[s]:{...n,focused:!0,minimized:!1,zIndex:i.nextZIndex}},focusedWindow:s,nextZIndex:i.nextZIndex+1})),Object.keys(t.windows).forEach(i=>{i!==s&&t.windows[i].focused&&a(c=>({windows:{...c.windows,[i]:{...c.windows[i],focused:!1}}}))}))},minimizeWindow:s=>{a(t=>{const n=t.windows[s];if(!n)return t;const i=t.focusedWindow===s?Object.keys(t.windows).find(c=>c!==s&&!t.windows[c].minimized)||null:t.focusedWindow;return{windows:{...t.windows,[s]:{...n,minimized:!0,focused:!1}},focusedWindow:i}})},maximizeWindow:s=>{a(t=>{const n=t.windows[s];return n?{windows:{...t.windows,[s]:{...n,maximized:!n.maximized}}}:t})},restoreWindow:s=>{a(t=>{const n=t.windows[s];return n?{windows:{...t.windows,[s]:{...n,minimized:!1,maximized:!1}}}:t})},moveWindow:(s,t)=>{a(n=>{const i=n.windows[s];return!i||!i.movable?n:{windows:{...n.windows,[s]:{...i,bounds:{...i.bounds,...t}}}}})},resizeWindow:(s,t)=>{a(n=>{const i=n.windows[s];return!i||!i.resizable?n:{windows:{...n.windows,[s]:{...i,bounds:{...i.bounds,...t}}}}})},updateWindowBounds:(s,t)=>{a(n=>{const i=n.windows[s];return i?{windows:{...n.windows,[s]:{...i,bounds:t}}}:n})},setWindowVisibility:(s,t)=>{a(n=>{const i=n.windows[s];return i?{windows:{...n.windows,[s]:{...i,visible:t}}}:n})},moveWindowToWorkspace:(s,t)=>{a(n=>{const i=n.windows[s];return i?{windows:{...n.windows,[s]:{...i,workspace:t}}}:n})},getWindow:s=>r().windows[s],getWindowsByApp:s=>{const{windows:t}=r();return Object.values(t).filter(n=>n.appId===s)},getWindowsByWorkspace:s=>{const{windows:t}=r();return Object.values(t).filter(n=>n.workspace===s)},getFocusedWindow:()=>{const{focusedWindow:s,windows:t}=r();return s?t[s]:void 0},getVisibleWindows:()=>{const{windows:s}=r();return Object.values(s).filter(t=>t.visible&&!t.minimized).sort((t,n)=>t.zIndex-n.zIndex)},getNextWindowInStack:s=>{const t=r().getVisibleWindows(),n=t.findIndex(c=>c.id===s);if(n===-1)return;const i=(n+1)%t.length;return t[i]},bringToFront:s=>{r().focusWindow(s)},sendToBack:s=>{a(t=>{const n=t.windows[s];return n?{windows:{...t.windows,[s]:{...n,zIndex:1}}}:t})},cascadeWindows:()=>{const{windows:s}=r();Object.values(s).filter(n=>n.visible&&!n.minimized).forEach((n,i)=>{const c={x:re.x+i*ie,y:re.y+i*ie};r().moveWindow(n.id,c)})},tileWindows:s=>{const{windows:t}=r(),n=Object.values(t).filter(x=>x.visible&&!x.minimized);if(n.length===0)return;const i=window.innerWidth-64,c=window.innerHeight-48;switch(s){case"horizontal":{const x=i/n.length;n.forEach((h,l)=>{r().updateWindowBounds(h.id,{x:64+l*x,y:48,width:x,height:c})});break}case"vertical":{const x=c/n.length;n.forEach((h,l)=>{r().updateWindowBounds(h.id,{x:64,y:48+l*x,width:i,height:x})});break}case"grid":{const x=Math.ceil(Math.sqrt(n.length)),h=Math.ceil(n.length/x),l=i/x,j=c/h;n.forEach((g,z)=>{const d=z%x,M=Math.floor(z/x);r().updateWindowBounds(g.id,{x:64+d*l,y:48+M*j,width:l,height:j})});break}}}}))),Se=[{id:1,name:"Workspace 1",windows:[],active:!0},{id:2,name:"Workspace 2",windows:[],active:!1}],q=le()(ye((a,r)=>({workspaces:Se,currentWorkspace:1,isOverviewOpen:!1,createWorkspace:s=>{const{workspaces:t}=r(),n=Math.max(...t.map(c=>c.id))+1,i={id:n,name:s||`Workspace ${n}`,windows:[],active:!1};return a(c=>({workspaces:[...c.workspaces,i]})),n},deleteWorkspace:s=>{const{workspaces:t,currentWorkspace:n,canDeleteWorkspace:i}=r();if(!i(s))return;const c=t.find(h=>h.id===s);if(!c)return;const x=t.find(h=>h.id!==s);if(x&&c.windows.length>0){const h=K.getState();c.windows.forEach(l=>{h.moveWindowToWorkspace(l,x.id)}),a(l=>({workspaces:l.workspaces.map(j=>j.id===x.id?{...j,windows:[...j.windows,...c.windows]}:j)}))}a(h=>({workspaces:h.workspaces.filter(l=>l.id!==s),currentWorkspace:n===s?x?.id||1:n}))},switchToWorkspace:s=>{const{workspaces:t}=r();if(!t.find(c=>c.id===s))return;a(c=>({currentWorkspace:s,workspaces:c.workspaces.map(x=>({...x,active:x.id===s}))}));const i=K.getState();Object.values(i.windows).forEach(c=>{i.setWindowVisibility(c.id,c.workspace===s)})},renameWorkspace:(s,t)=>{a(n=>({workspaces:n.workspaces.map(i=>i.id===s?{...i,name:t}:i)}))},moveWindowToWorkspace:(s,t)=>{const n=K.getState(),i=n.getWindow(s);if(!i)return;const c=i.workspace;n.moveWindowToWorkspace(s,t),a(x=>({workspaces:x.workspaces.map(h=>h.id===c?{...h,windows:h.windows.filter(l=>l!==s)}:h.id===t?{...h,windows:[...h.windows,s]}:h)})),n.setWindowVisibility(s,t===r().currentWorkspace)},openOverview:()=>{a({isOverviewOpen:!0})},closeOverview:()=>{a({isOverviewOpen:!1})},toggleOverview:()=>{a(s=>({isOverviewOpen:!s.isOverviewOpen}))},saveSession:()=>{const{workspaces:s,currentWorkspace:t}=r(),n=K.getState(),i=G.getState(),c={windows:Object.values(n.windows),workspaces:s,currentWorkspace:t,settings:i.settings,timestamp:new Date};localStorage.setItem("daveos-session",JSON.stringify(c))},restoreSession:s=>{const{windows:t,workspaces:n,currentWorkspace:i,settings:c}=s;G.getState().importSettings(JSON.stringify(c)),a({workspaces:n.map(l=>({...l,active:l.id===i})),currentWorkspace:i});const h=K.getState();t.forEach(l=>{h.openWindow({...l,id:l.id,visible:l.workspace===i})})},clearSession:()=>{localStorage.removeItem("daveos-session"),a({workspaces:Se,currentWorkspace:1,isOverviewOpen:!1});const s=K.getState();Object.keys(s.windows).forEach(t=>{s.closeWindow(t)})},getSessionData:()=>{const{workspaces:s,currentWorkspace:t}=r(),n=K.getState(),i=G.getState();return{windows:Object.values(n.windows),workspaces:s,currentWorkspace:t,settings:i.settings,timestamp:new Date}},getActiveWorkspace:()=>{const{workspaces:s,currentWorkspace:t}=r();return s.find(n=>n.id===t)},getWorkspaceWindows:s=>{const{workspaces:t}=r();return t.find(i=>i.id===s)?.windows||[]},canDeleteWorkspace:s=>{const{workspaces:t}=r();return t.length>1}}),{name:"daveos-session",version:1,partialize:a=>({workspaces:a.workspaces,currentWorkspace:a.currentWorkspace})}));if(typeof window<"u"){setInterval(()=>{q.getState().saveSession()},3e4),window.addEventListener("beforeunload",()=>{q.getState().saveSession()});const a=localStorage.getItem("daveos-session");if(a)try{const r=JSON.parse(a);Date.now()-new Date(r.timestamp).getTime()<24*60*60*1e3&&q.getState().restoreSession(r)}catch(r){console.error("Failed to restore session:",r)}}class Et extends Ae{fsEntries;trash;mimeAssociations;constructor(){super("DaveOSDatabase"),this.version(1).stores({fsEntries:"id, name, type, parentId, path, createdAt, modifiedAt, size, mimeType",trash:"++id, deletedAt, originalPath",mimeAssociations:"id, mimeType, appId, isDefault"}),this.fsEntries.hook("creating",function(r,s,t){s.createdAt=new Date,s.modifiedAt=new Date}),this.fsEntries.hook("updating",function(r,s,t,n){r.modifiedAt=new Date})}}const P=new Et,Mt=async()=>{try{return await P.open(),console.log("DaveOS Database initialized successfully"),!0}catch(a){return console.error("Failed to initialize database:",a),!1}};var O=(a=>(a.FILE="file",a.FOLDER="folder",a.SYMLINK="symlink",a))(O||{});class V{static async initialize(){try{const r=await Mt();return r&&await this.seedIfEmpty(),r}catch(r){return console.error("Failed to initialize filesystem:",r),!1}}static async seedIfEmpty(){try{if(await P.fsEntries.count()>0)return;console.log("Seeding filesystem..."),await P.fsEntries.add({id:"root",name:"",type:O.FOLDER,path:"/",parentId:void 0,size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date}),await P.fsEntries.add({id:"home",name:"home",type:O.FOLDER,path:"/home",parentId:"root",size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date}),await P.fsEntries.add({id:"user",name:"user",type:O.FOLDER,path:"/home/user",parentId:"home",size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date});const s=["Desktop","Documents","Downloads","Pictures","Music","Videos"];for(const n of s)await P.fsEntries.add({id:`user-${n.toLowerCase()}`,name:n,type:O.FOLDER,path:`/home/user/${n}`,parentId:"user",size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date});const t=`Welcome to DaveOS!

A modern web-based operating system built with React and TypeScript.

Features:
- File system management
- Built-in applications
- Window management
- System settings

Explore and enjoy!`;await P.fsEntries.add({id:"welcome-txt",name:"Welcome.txt",type:O.FILE,path:"/home/user/Desktop/Welcome.txt",parentId:"user-desktop",size:t.length,mimeType:"text/plain",content:t,metadata:{},createdAt:new Date,modifiedAt:new Date}),console.log("Filesystem seeded successfully")}catch(r){console.error("Failed to seed filesystem:",r)}}static async getEntries(r="/"){try{if(r==="/")return await P.fsEntries.where("parentId").equals("").toArray();const s=await P.fsEntries.where("path").equals(r).first();return s?await P.fsEntries.where("parentId").equals(s.id.toString()).toArray():[]}catch(s){return console.error("Failed to get entries:",s),[]}}static async createFolder(r,s){try{const n=(await P.fsEntries.where("path").equals(s).first())?.id?.toString();return!!await P.fsEntries.add({id:`folder-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:r,type:O.FOLDER,path:`${s}/${r}`,parentId:n,size:0,mimeType:"inode/directory",content:"",metadata:{},createdAt:new Date,modifiedAt:new Date})}catch(t){return console.error("Failed to create folder:",t),!1}}static async createFile(r,s,t,n="text/plain"){try{const i=t==="/"?`/${r}`:`${t}/${r}`,c=t==="/"?null:await P.fsEntries.where("path").equals(t).first();return await P.fsEntries.add({id:`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:r,type:O.FILE,path:i,parentId:c?.id?.toString(),size:s.length,mimeType:n,content:s,metadata:{},createdAt:new Date,modifiedAt:new Date}),!0}catch(i){return console.error("Failed to create file:",i),!1}}static async deleteEntry(r){try{return await P.fsEntries.delete(parseInt(r)),!0}catch(s){return console.error("Failed to delete entry:",s),!1}}static async renameEntry(r,s){try{const t=await P.fsEntries.get(parseInt(r));if(!t)return!1;const n=t.path.split("/");n[n.length-1]=s;const i=n.join("/");return await P.fsEntries.update(parseInt(r),{name:s,path:i,modifiedAt:new Date}),!0}catch(t){return console.error("Failed to rename entry:",t),!1}}}const H=le()(ye((a,r)=>({currentPath:"/home/user",currentEntries:[],selectedEntries:[],isLoading:!1,error:null,isInitialized:!1,navigationHistory:["/home/user"],historyIndex:0,initialize:async()=>{if(!r().isInitialized){a({isLoading:!0,error:null});try{if(!await V.initialize())throw new Error("Failed to initialize filesystem");a({isInitialized:!0}),await r().navigateTo("/home/user"),console.log("Simple filesystem initialized successfully")}catch(s){console.error("Failed to initialize filesystem:",s),a({error:s.message})}finally{a({isLoading:!1})}}},navigateTo:async s=>{a({isLoading:!0,error:null});try{const t=await V.getEntries(s),{navigationHistory:n,historyIndex:i}=r(),c=[...n.slice(0,i+1),s];a({currentPath:s,currentEntries:t,selectedEntries:[],isLoading:!1,navigationHistory:c,historyIndex:c.length-1})}catch(t){console.error("Failed to navigate:",t),a({error:`Failed to navigate to ${s}`,isLoading:!1})}},navigateUp:async()=>{const{currentPath:s}=r();if(s==="/")return;const t=s.split("/").slice(0,-1).join("/")||"/";await r().navigateTo(t)},navigateHome:async()=>{await r().navigateTo("/home/user")},refresh:async()=>{const{currentPath:s}=r();await r().navigateTo(s)},goBack:async()=>{const{navigationHistory:s,historyIndex:t}=r();if(t>0){const n=t-1,i=s[n];a({historyIndex:n}),await r().navigateTo(i)}},goForward:async()=>{const{navigationHistory:s,historyIndex:t}=r();if(t<s.length-1){const n=t+1,i=s[n];a({historyIndex:n}),await r().navigateTo(i)}},selectEntry:s=>{a({selectedEntries:[s]})},clearSelection:()=>{a({selectedEntries:[]})},toggleSelection:s=>{const{selectedEntries:t}=r(),n=t.includes(s)?t.filter(i=>i!==s):[...t,s];a({selectedEntries:n})},createFolder:async s=>{const{currentPath:t}=r();a({isLoading:!0,error:null});try{return await V.createFolder(s,t)?(await r().refresh(),!0):(a({error:`Failed to create folder: ${s}`}),!1)}catch(n){return console.error("Failed to create folder:",n),a({error:`Failed to create folder: ${s}`}),!1}finally{a({isLoading:!1})}},createFile:async(s,t="")=>{const{currentPath:n}=r();a({isLoading:!0,error:null});try{return await V.createFile(s,t,n)?(await r().refresh(),!0):(a({error:`Failed to create file: ${s}`}),!1)}catch(i){return console.error("Failed to create file:",i),a({error:`Failed to create file: ${s}`}),!1}finally{a({isLoading:!1})}},renameEntry:async(s,t)=>{a({isLoading:!0,error:null});try{return await V.renameEntry(s,t)?(await r().refresh(),!0):(a({error:"Failed to rename entry"}),!1)}catch(n){return console.error("Failed to rename entry:",n),a({error:`Failed to rename to: ${t}`}),!1}finally{a({isLoading:!1})}},deleteEntries:async s=>{a({isLoading:!0,error:null});try{for(const t of s)await V.deleteEntry(t);return await r().refresh(),a({selectedEntries:[]}),!0}catch(t){return console.error("Failed to delete entries:",t),a({error:"Failed to delete selected entries"}),!1}finally{a({isLoading:!1})}}}),{name:"daveos-simple-filesystem",partialize:a=>({currentPath:a.currentPath,isInitialized:a.isInitialized})}));function Ft({onClose:a}){const r=n=>{console.log(`Opening app: ${n}`),a()},s=[{id:"internet",name:"Internet",icon:"ðŸŒ",subtitle:"Internet Explorer"},{id:"email",name:"E-mail",icon:"ðŸ“§",subtitle:"Outlook Express"},{id:"mediaplayer",name:"Windows Media Player",icon:"ðŸŽµ",subtitle:""},{id:"tour",name:"Tour Windows XP",icon:"ðŸš€",subtitle:""},{id:"files",name:"Files and Settings Transfer Wizard",icon:"ðŸ“",subtitle:""}],t=[{id:"documents",name:"My Documents",icon:"ðŸ“„",type:"folder"},{id:"recent",name:"My Recent Documents",icon:"ðŸ“‹",type:"folder",hasArrow:!0},{id:"pictures",name:"My Pictures",icon:"ðŸ–¼ï¸",type:"folder"},{id:"music",name:"My Music",icon:"ðŸŽµ",type:"folder"},{id:"computer",name:"My Computer",icon:"ðŸ’»",type:"folder"},{id:"control",name:"Control Panel",icon:"âš™ï¸",type:"system"},{id:"programs",name:"Set Program Access and Defaults",icon:"ðŸ”§",type:"system"},{id:"printers",name:"Printers and Faxes",icon:"ðŸ–¨ï¸",type:"system"},{id:"help",name:"Help and Support",icon:"â“",type:"system"},{id:"search",name:"Search",icon:"ðŸ”",type:"system"},{id:"run",name:"Run...",icon:"â–¶ï¸",type:"system"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:a}),e.jsxs("div",{className:"fixed left-0 z-50 start-menu",style:{bottom:"32px",width:"380px",height:"480px",borderRadius:"0 8px 0 0",border:"3px solid",borderImage:"linear-gradient(135deg, #6FA1D9 0%, #316AC5 100%) 1",boxShadow:"2px -2px 8px rgba(0,0,0,0.3)"},children:[e.jsx("div",{className:"h-16 flex items-end px-4 pb-2 grad-title-active rounded-tr-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full mr-3 flex items-center justify-center border-2 border-white border-opacity-50",children:e.jsx("span",{className:"text-2xl",children:"ðŸ‘¤"})}),e.jsx("span",{className:"text-white font-bold text-sm",style:{fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif',textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:"Administrator"})]})}),e.jsxs("div",{className:"flex",style:{height:"calc(100% - 112px)"},children:[e.jsxs("div",{className:"w-48 px-2 py-3",style:{background:"var(--win-surface)"},children:[e.jsx("div",{className:"space-y-0",children:s.map(n=>e.jsxs("button",{onClick:()=>r(n.id),className:"w-full flex items-center px-2 py-1 text-left hover:bg-blue-100 rounded",style:{minHeight:"42px"},children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-lg mr-2",children:n.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-black",style:{fontSize:"11px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:n.name}),n.subtitle&&e.jsx("div",{className:"text-gray-600",style:{fontSize:"10px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:n.subtitle})]})]},n.id))}),e.jsx("div",{className:"mt-auto pt-3 border-t border-gray-300",children:e.jsxs("button",{className:"flex items-center w-full px-2 py-2 text-left hover:bg-blue-100 rounded",onClick:()=>{},children:[e.jsx("span",{className:"text-green-600 font-bold mr-2",style:{fontSize:"14px"},children:"â–£"}),e.jsx("span",{className:"font-bold text-green-700",style:{fontSize:"11px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:"All Programs"}),e.jsx("span",{className:"ml-auto text-black",children:"â–¶"})]})})]}),e.jsx("div",{className:"flex-1 px-3 py-3",style:{background:"#DDE7F6"},children:e.jsx("div",{className:"space-y-0",children:t.map(n=>e.jsxs("button",{onClick:()=>{n.type==="folder"?r("files"):r(n.id)},className:"w-full flex items-center px-2 py-1 text-left hover:bg-blue-200 rounded",style:{minHeight:"26px"},children:[e.jsx("span",{className:"w-5 h-5 flex items-center justify-center mr-2 text-sm",children:n.icon}),e.jsx("span",{className:"text-black",style:{fontSize:"11px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:n.name}),n.hasArrow&&e.jsx("span",{className:"ml-auto text-gray-600",children:"â–¶"})]},n.id))})})]}),e.jsxs("div",{className:"h-12 flex items-center justify-end px-4 border-t grad-title-active",children:[e.jsxs("button",{className:"flex items-center px-3 py-1 text-white hover:bg-white hover:bg-opacity-20 rounded",onClick:()=>{},style:{fontSize:"11px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:[e.jsx("span",{className:"w-4 h-4 mr-1",children:"ðŸšª"}),"Log Off"]}),e.jsxs("button",{className:"flex items-center px-3 py-1 ml-2 text-white hover:bg-white hover:bg-opacity-20 rounded",onClick:()=>{},style:{fontSize:"11px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:[e.jsx("span",{className:"w-4 h-4 mr-1",children:"â»"}),"Turn Off Computer"]})]})]})]})}function zt(){const[a,r]=m.useState(new Date),[s,t]=m.useState(!1),{windows:n}=K();m.useEffect(()=>{const c=setInterval(()=>r(new Date),1e3);return()=>clearInterval(c)},[]);const i=c=>c.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 grad-taskbar taskbar",children:e.jsxs("div",{className:"flex items-center h-full",children:[e.jsxs("button",{onClick:()=>t(!s),className:"h-[30px] px-5 text-white font-bold text-[11px] rounded-r-[8px] border-r-2 grad-start flex items-center shadow-sm",style:{fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif',textShadow:"1px 1px 1px rgba(0,0,0,0.5)",borderRight:"1px solid rgba(0,0,0,0.3)",boxShadow:s?"inset 1px 1px 3px rgba(0,0,0,0.4)":"0 0 3px rgba(255,255,255,0.3)"},children:[e.jsx("div",{className:"w-5 h-5 mr-2 bg-white bg-opacity-90 rounded-sm flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-xs font-bold",children:"â–£"})}),e.jsx("span",{style:{fontStyle:"italic"},children:"Start"})]}),e.jsx("div",{className:"flex items-center h-full px-2 ml-2 border-l border-blue-300 border-opacity-50",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"w-6 h-6 flex items-center justify-center btn-xp text-[10px]",title:"Show Desktop",children:e.jsx("span",{children:"â–«"})}),e.jsx("button",{className:"w-6 h-6 flex items-center justify-center btn-xp text-[10px]",title:"Internet Explorer",children:e.jsx("span",{children:"ðŸŒ"})}),e.jsx("button",{className:"w-6 h-6 flex items-center justify-center btn-xp text-[10px]",title:"My Computer",children:e.jsx("span",{children:"ðŸ’»"})})]})}),e.jsx("div",{className:"flex-1 flex items-center h-full px-2",children:Object.values(n).map(c=>e.jsx("button",{className:"taskbar-btn mx-1 min-w-[120px] max-w-[160px] h-[26px] flex items-center px-2",onClick:()=>{},children:e.jsx("span",{className:"truncate text-[11px]",children:c.title})},c.id))}),e.jsx("div",{className:"flex items-center h-full px-3 bg-blue-500 bg-opacity-20 border-l border-blue-300 border-opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"w-4 h-4 hover:bg-white hover:bg-opacity-20 rounded",title:"Volume",children:e.jsx("span",{className:"text-[10px]",children:"ðŸ”Š"})}),e.jsx("button",{className:"w-4 h-4 hover:bg-white hover:bg-opacity-20 rounded",title:"Network",children:e.jsx("span",{className:"text-[10px]",children:"ðŸ“¶"})}),e.jsx("div",{className:"text-white px-1 cursor-default",style:{fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif',fontSize:"11px",lineHeight:"1.2"},children:e.jsx("div",{children:i(a)})})]})})]})}),s&&e.jsx(Ft,{onClose:()=>t(!1)})]})}function It(){const a=[{id:"my-computer",name:"My Computer",icon:"ðŸ’»",position:{x:20,y:20}},{id:"my-documents",name:"My Documents",icon:"ðŸ“",position:{x:20,y:100}},{id:"recycle-bin",name:"Recycle Bin",icon:"ðŸ—‘ï¸",position:{x:20,y:180}},{id:"my-network",name:"My Network Places",icon:"ðŸŒ",position:{x:20,y:260}}];return e.jsx("div",{className:"absolute inset-0 w-full h-full",style:{background:"linear-gradient(180deg, #6FA1D9 0%, #3B6EA5 60%, #245EDB 100%)"},children:a.map(r=>e.jsx("div",{className:"absolute",style:{left:r.position.x,top:r.position.y},children:e.jsxs("button",{className:"flex flex-col items-center p-2 rounded hover:bg-blue-400 hover:bg-opacity-30 focus:bg-blue-400 focus:bg-opacity-40 focus:outline-none",style:{width:"75px"},onDoubleClick:()=>{console.log(`Opening ${r.name}`)},children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-3xl mb-1 drop-shadow-md",children:r.icon}),e.jsx("span",{className:"icon-label text-white text-center break-words select-none",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif'},children:r.name})]})},r.id))})}function Wt(){const{isOverviewOpen:a,closeOverview:r,workspaces:s,currentWorkspace:t,switchToWorkspace:n}=q(),{windows:i,focusWindow:c}=K(),[x,h]=m.useState(""),[l,j]=m.useState(!1);if(!a)return null;const g=Object.values(i).filter(b=>b.workspace===t&&b.visible&&!b.minimized),z=b=>{c(b),r()},d=b=>{b!==t&&n(b),r()},M=b=>{b.target===b.currentTarget&&r()};return e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-modal animate-fade-in",onClick:M,children:[e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex justify-center pt-16 pb-8",children:e.jsxs("div",{className:"relative w-96",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",size:20}),e.jsx("input",{type:"text",placeholder:"Type to search...",value:x,onChange:b=>h(b.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-surface-border rounded-ubuntu text-lg focus-ring",autoFocus:!0})]})}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("div",{className:"flex-1 px-16",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-medium text-white mb-4",children:"Windows"}),g.length===0?e.jsx("div",{className:"text-center py-16 text-white/60",children:e.jsx("p",{children:"No open windows"})}):e.jsx("div",{className:"grid grid-cols-3 gap-4",children:g.map(b=>e.jsx(Tt,{window:b,onClick:()=>z(b.id)},b.id))})]})}),e.jsx("div",{className:"w-16 flex flex-col items-center pt-8",children:e.jsx("button",{className:"w-12 h-12 bg-surface/80 hover:bg-surface rounded-ubuntu flex items-center justify-center transition-smooth",onClick:()=>j(!l),title:"Show Applications",children:e.jsx(ke,{size:24})})})]}),e.jsxs("div",{className:"px-16 pb-16",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Workspaces"}),e.jsx("div",{className:"flex space-x-4",children:s.map(b=>e.jsx(At,{workspace:b,active:b.id===t,onClick:()=>d(b.id)},b.id))})]})]}),l&&e.jsx(Lt,{onClose:()=>j(!1)})]})}function Tt({window:a,onClick:r}){return e.jsxs("div",{className:"bg-surface border border-surface-border rounded-ubuntu p-4 cursor-pointer hover:scale-105 transition-transform duration-200 shadow-ubuntu",onClick:r,children:[e.jsx("div",{className:"aspect-video bg-background rounded-ubuntu-sm mb-2 flex items-center justify-center text-foreground-muted",children:e.jsx("span",{className:"text-sm",children:a.appId})}),e.jsx("p",{className:"text-sm font-medium truncate",children:a.title})]})}function At({workspace:a,active:r,onClick:s}){return e.jsx("div",{className:`w-32 h-20 rounded-ubuntu border-2 cursor-pointer transition-smooth ${r?"border-accent bg-accent/20":"border-white/20 bg-white/10 hover:border-white/40"}`,onClick:s,children:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:a.name})})})}function Lt({onClose:a}){const{openWindow:r}=K(),[s,t]=m.useState(""),n=[{id:"files",name:"Files",icon:"ðŸ“"},{id:"terminal",name:"Terminal",icon:"ðŸ’»"},{id:"textedit",name:"Text Editor",icon:"ðŸ“"},{id:"calculator",name:"Calculator",icon:"ðŸ§®"},{id:"settings",name:"Settings",icon:"âš™ï¸"},{id:"imageviewer",name:"Image Viewer",icon:"ðŸ–¼ï¸"},{id:"music",name:"Music",icon:"ðŸŽµ"},{id:"videoplayer",name:"Video Player",icon:"ðŸŽ¬"},{id:"calendar",name:"Calendar",icon:"ðŸ“…"},{id:"notes",name:"Notes",icon:"ðŸ“‹"},{id:"minesweeper",name:"Minesweeper",icon:"ðŸ’£"}],i=n.filter(x=>x.name.toLowerCase().includes(s.toLowerCase())),c=x=>{r({appId:x,title:n.find(h=>h.id===x)?.name||x,bounds:{x:100,y:100,width:800,height:600},workspace:1,minimized:!1,maximized:!1,resizable:!0,movable:!0,closable:!0,minimizable:!0,maximizable:!0,visible:!0}),a()};return e.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center",children:e.jsxs("div",{className:"w-2/3 max-w-4xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative w-96 mx-auto",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",size:20}),e.jsx("input",{type:"text",placeholder:"Search applications...",value:s,onChange:x=>t(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-surface-border rounded-ubuntu focus-ring",autoFocus:!0})]})}),e.jsx("div",{className:"grid grid-cols-6 gap-6",children:i.map(x=>e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-ubuntu hover:bg-white/10 cursor-pointer transition-smooth",onClick:()=>c(x.id),children:[e.jsx("div",{className:"text-4xl mb-2",children:x.icon}),e.jsx("span",{className:"text-white text-sm text-center",children:x.name})]},x.id))})]})})}const Rt=["n","ne","e","se","s","sw","w","nw"],_t=20,Ot={width:200,height:150};function $t({bounds:a,onMove:r,onResize:s,onBoundsChange:t,disabled:n=!1,resizable:i=!0,movable:c=!0,minSize:x=Ot,maxSize:h,snapThreshold:l=_t}){const j=m.useRef(null),[g,z]=m.useState({isDragging:!1,isResizing:!1,dragStart:{x:0,y:0},initialBounds:a,resizeHandle:null}),d=m.useCallback(()=>({x:64,y:48,width:window.innerWidth-64,height:window.innerHeight-48}),[]),M=m.useCallback(v=>{const f=d(),y={...v};return Math.abs(v.x-f.x)<l&&(y.x=f.x),Math.abs(v.x+v.width-(f.x+f.width))<l&&(y.x=f.x+f.width-v.width),Math.abs(v.y-f.y)<l&&(y.y=f.y),Math.abs(v.y+v.height-(f.y+f.height))<l&&(y.y=f.y+f.height-v.height),y},[l,d]),b=m.useCallback(v=>{const f=d(),y={...v};return y.width=Math.max(x.width,y.width),y.height=Math.max(x.height,y.height),h&&(y.width=Math.min(h.width,y.width),y.height=Math.min(h.height,y.height)),y.x=Math.max(f.x,Math.min(y.x,f.x+f.width-y.width)),y.y=Math.max(f.y,Math.min(y.y,f.y+f.height-y.height)),y},[x,h,d]),W=m.useCallback(v=>{n||!c||(v.preventDefault(),v.stopPropagation(),!j.current?.getBoundingClientRect())||z({isDragging:!0,isResizing:!1,dragStart:{x:v.clientX,y:v.clientY},initialBounds:a,resizeHandle:null})},[n,c,a]),T=m.useCallback(v=>f=>{n||!i||(f.preventDefault(),f.stopPropagation(),z({isDragging:!1,isResizing:!0,dragStart:{x:f.clientX,y:f.clientY},initialBounds:a,resizeHandle:v}))},[n,i,a]),C=m.useCallback(v=>{if(!g.isDragging&&!g.isResizing)return;const f=v.clientX-g.dragStart.x,y=v.clientY-g.dragStart.y;if(g.isDragging){const S={...g.initialBounds,x:g.initialBounds.x+f,y:g.initialBounds.y+y},o=M(S),u=b(o);r?.({x:u.x,y:u.y}),t?.(u)}else if(g.isResizing&&g.resizeHandle){const S=g.resizeHandle,o={...g.initialBounds};S.includes("n")&&(o.y=g.initialBounds.y+y,o.height=g.initialBounds.height-y),S.includes("s")&&(o.height=g.initialBounds.height+y),S.includes("w")&&(o.x=g.initialBounds.x+f,o.width=g.initialBounds.width-f),S.includes("e")&&(o.width=g.initialBounds.width+f);const u=b(o);s?.({width:u.width,height:u.height}),t?.(u)}},[g,M,b,r,s,t]),E=m.useCallback(()=>{z({isDragging:!1,isResizing:!1,dragStart:{x:0,y:0},initialBounds:a,resizeHandle:null})},[a]);m.useEffect(()=>{if(g.isDragging||g.isResizing)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",E),document.body.style.cursor=g.isDragging?"move":"resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",E),document.body.style.cursor="",document.body.style.userSelect=""}},[g.isDragging,g.isResizing,C,E]);const I=i&&!n?Rt.map(v=>({handle:v,onMouseDown:T(v),className:`absolute cursor-${v}-resize`,style:Pt(v)})):[];return{elementRef:j,isDragging:g.isDragging,isResizing:g.isResizing,handleMouseDown:W,resizeHandles:I}}function Pt(a){const t={width:8,height:8,zIndex:10};switch(a){case"n":return{...t,top:-4,left:"50%",transform:"translateX(-50%)",cursor:"n-resize"};case"ne":return{...t,top:-4,right:-4,cursor:"ne-resize"};case"e":return{...t,right:-4,top:"50%",transform:"translateY(-50%)",cursor:"e-resize"};case"se":return{...t,bottom:-4,right:-4,cursor:"se-resize"};case"s":return{...t,bottom:-4,left:"50%",transform:"translateX(-50%)",cursor:"s-resize"};case"sw":return{...t,bottom:-4,left:-4,cursor:"sw-resize"};case"w":return{...t,left:-4,top:"50%",transform:"translateY(-50%)",cursor:"w-resize"};case"nw":return{...t,top:-4,left:-4,cursor:"nw-resize"};default:return t}}const Ht=({onClose:a})=>{const[r,s]=m.useState("list"),[t,n]=m.useState(""),[i,c]=m.useState(new Set),[,x]=m.useState(null),[h,l]=m.useState(null),{currentPath:j,currentEntries:g,navigationHistory:z,historyIndex:d,navigateTo:M,goBack:b,goForward:W,createFolder:T,createFile:C,deleteEntries:E,refresh:I}=H();m.useEffect(()=>{const N=()=>l(null);return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[]);const v=g.filter(N=>N.name.toLowerCase().includes(t.toLowerCase())),f=async N=>{if(N.type===O.FOLDER){const R=j==="/"?`/${N.name}`:`${j}/${N.name}`;await M(R)}else console.log("Opening file:",N.name)},y=(N,R=!1)=>{if(R){const F=new Set(i);F.has(N)?F.delete(N):F.add(N),c(F)}else c(new Set([N]))},S=(N,R)=>{N.preventDefault(),l({x:N.clientX,y:N.clientY,item:R})},o=async()=>{const N=prompt("Enter folder name:");N&&await T(N),l(null)},u=async()=>{const N=prompt("Enter file name:");N&&await C(N,""),l(null)},k=()=>{const N=g.filter(R=>i.has(R.id.toString()));x({items:N,operation:"copy"}),l(null)},D=()=>{const N=g.filter(R=>i.has(R.id.toString()));x({items:N,operation:"cut"}),l(null)},p=async()=>{i.size>0&&confirm("Delete selected items?")&&(await E(Array.from(i)),c(new Set)),l(null)},w=N=>{if(N.type===O.FOLDER)return e.jsx(ve,{className:"w-5 h-5 text-blue-500"});switch(N.name.split(".").pop()?.toLowerCase()){case"txt":case"md":return e.jsx(J,{className:"w-5 h-5 text-gray-600"});case"js":case"ts":case"tsx":case"jsx":return e.jsx(J,{className:"w-5 h-5 text-yellow-600"});case"css":return e.jsx(J,{className:"w-5 h-5 text-blue-600"});case"html":return e.jsx(J,{className:"w-5 h-5 text-orange-600"});case"json":return e.jsx(J,{className:"w-5 h-5 text-green-600"});default:return e.jsx(J,{className:"w-5 h-5 text-gray-500"})}},A=N=>N?N<1024?`${N} B`:N<1024*1024?`${(N/1024).toFixed(1)} KB`:`${(N/(1024*1024)).toFixed(1)} MB`:"",U=N=>N?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(N):"";return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:b,disabled:d<=0,className:"p-1 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Back",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:W,disabled:d>=z.length-1,className:"p-1 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Forward",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(j.substring(0,j.lastIndexOf("/"))||"/"),disabled:j==="/",className:"p-1 text-gray-600 hover:text-gray-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Up",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M("/home/user"),className:"p-1 text-gray-600 hover:text-gray-800",title:"Home",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:I,className:"p-1 text-gray-600 hover:text-gray-800",title:"Refresh",children:e.jsx(De,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search files...",value:t,onChange:N=>n(N.target.value),className:"pl-8 pr-3 py-1 text-sm border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded",children:[e.jsx("button",{onClick:()=>s("list"),className:`p-1 ${r==="list"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,title:"List View",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s("grid"),className:`p-1 ${r==="grid"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,title:"Grid View",children:e.jsx(ke,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"ðŸ“"}),e.jsx("span",{className:"text-sm font-mono",children:j})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-2",children:[r==="list"?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 text-xs font-medium text-gray-600 border-b border-gray-200",children:[e.jsx("div",{className:"col-span-6",children:"Name"}),e.jsx("div",{className:"col-span-2",children:"Size"}),e.jsx("div",{className:"col-span-2",children:"Type"}),e.jsx("div",{className:"col-span-2",children:"Modified"})]}),v.map(N=>e.jsxs("div",{className:`grid grid-cols-12 gap-2 p-2 text-sm hover:bg-gray-100 cursor-pointer rounded ${i.has(N.id.toString())?"bg-blue-100":""}`,onClick:R=>{R.detail===2?f(N):y(N.id.toString(),R.ctrlKey)},onContextMenu:R=>S(R,N),children:[e.jsxs("div",{className:"col-span-6 flex items-center space-x-2",children:[w(N),e.jsx("span",{className:"truncate",children:N.name})]}),e.jsx("div",{className:"col-span-2 text-gray-600",children:N.type===O.FILE?A(N.size):"â€”"}),e.jsx("div",{className:"col-span-2 text-gray-600",children:N.type===O.FOLDER?"Folder":"File"}),e.jsx("div",{className:"col-span-2 text-gray-600",children:U(N.modifiedAt)})]},N.id))]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:v.map(N=>e.jsx("div",{className:`p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer ${i.has(N.id.toString())?"bg-blue-100 border-blue-300":""}`,onClick:R=>{R.detail===2?f(N):y(N.id.toString(),R.ctrlKey)},onContextMenu:R=>S(R,N),children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"text-3xl",children:w(N)}),e.jsx("span",{className:"text-sm text-center truncate w-full",children:N.name}),N.type===O.FILE&&e.jsx("span",{className:"text-xs text-gray-500",children:A(N.size)})]})},N.id))}),v.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(ve,{className:"w-16 h-16 mb-4"}),e.jsx("p",{children:"This folder is empty"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 border-t border-gray-300 text-xs text-gray-600",children:[e.jsxs("span",{children:[v.length," items"]}),i.size>0&&e.jsxs("span",{children:[i.size," selected"]})]}),h&&e.jsx("div",{className:"fixed bg-white border border-gray-300 rounded shadow-lg py-1 z-50",style:{left:h.x,top:h.y},children:h.item?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:k,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs("button",{onClick:D,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Cut"})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:p,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 text-red-600 flex items-center space-x-2",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{children:"New Folder"})]}),e.jsxs("button",{onClick:u,className:"w-full px-3 py-1 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"New File"})]})]})})]})},Ut=({windowId:a,filePath:r,onClose:s})=>{const[t,n]=m.useState(""),[i,c]=m.useState("Untitled.txt"),[x,h]=m.useState(!1),[l,j]=m.useState(r||""),[g,z]=m.useState(14),[d,M]=m.useState(!0),[b,W]=m.useState(!0),[T,C]=m.useState(""),[E,I]=m.useState(""),[v,f]=m.useState(!1),y=m.useRef(null),{createFile:S,navigateTo:o}=H();m.useEffect(()=>{r&&u(r)},[r]);const u=async F=>{try{const $=F.substring(0,F.lastIndexOf("/"))||"/",B=F.substring(F.lastIndexOf("/")+1);await o($);const L=H.getState().currentEntries.find(_=>_.name===B&&_.type===O.FILE);L&&L.content&&(n(L.content),c(B),j(F),h(!1))}catch($){console.error("Error loading file:",$)}},k=F=>{n(F),h(!0)},D=async()=>{try{if(l){const F=l.substring(0,l.lastIndexOf("/"))||"/";await o(F),await S(i,t)&&h(!1)}else await S(i,t)&&(j(`/home/user/${i}`),h(!1))}catch(F){console.error("Error saving file:",F)}},p=F=>F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),w=()=>{x&&confirm("Save changes to current file?")&&D(),n(""),c("Untitled.txt"),j(""),h(!1)},A=F=>{if(y.current){const $=y.current.selectionStart,B=y.current.selectionEnd,Z=t.substring(0,$)+F+t.substring(B);n(Z),h(!0),setTimeout(()=>{y.current&&(y.current.selectionStart=y.current.selectionEnd=$+F.length,y.current.focus())},0)}},U=()=>{if(T&&E){const F=new RegExp(p(T),"g"),$=t.replace(F,E);n($),h(!0)}},N=()=>t.split(`
`).map(($,B)=>B+1).join(`
`),R=F=>{F.ctrlKey&&F.key==="s"&&(F.preventDefault(),D()),F.ctrlKey&&F.key==="n"&&(F.preventDefault(),w()),F.ctrlKey&&F.key==="f"&&(F.preventDefault(),f(!v)),F.key==="Tab"&&(F.preventDefault(),A("  "))};return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"font-medium text-sm",children:[i,x?" *":""]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:w,className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded",title:"New File (Ctrl+N)",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:D,className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded",title:"Save (Ctrl+S)",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(!v),className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded",title:"Find & Replace (Ctrl+F)",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-300 mx-1"}),e.jsxs("select",{value:g,onChange:F=>z(Number(F.target.value)),className:"text-xs border border-gray-300 rounded px-1",children:[e.jsx("option",{value:10,children:"10px"}),e.jsx("option",{value:12,children:"12px"}),e.jsx("option",{value:14,children:"14px"}),e.jsx("option",{value:16,children:"16px"}),e.jsx("option",{value:18,children:"18px"}),e.jsx("option",{value:20,children:"20px"})]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:F=>M(F.target.checked),className:"mr-1"}),"Wrap"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:F=>W(F.target.checked),className:"mr-1"}),"Lines"]})]})]}),v&&e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-yellow-50 border-b border-yellow-200",children:[e.jsx("input",{type:"text",placeholder:"Find...",value:T,onChange:F=>C(F.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded"}),e.jsx("input",{type:"text",placeholder:"Replace...",value:E,onChange:F=>I(F.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded"}),e.jsx("button",{onClick:U,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Replace All"}),e.jsx("button",{onClick:()=>f(!1),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-800",children:"âœ•"})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[b&&e.jsx("div",{className:"bg-gray-50 border-r border-gray-300 px-2 py-2 text-right text-gray-500 font-mono text-sm select-none",children:e.jsx("pre",{style:{fontSize:`${g}px`,lineHeight:"1.5"},children:N()})}),e.jsx("textarea",{ref:y,value:t,onChange:F=>k(F.target.value),onKeyDown:R,className:"flex-1 p-2 border-none outline-none resize-none font-mono",style:{fontSize:`${g}px`,lineHeight:"1.5",whiteSpace:d?"pre-wrap":"pre",wordWrap:d?"break-word":"normal",overflowWrap:d?"break-word":"normal"},placeholder:"Start typing...",spellCheck:!1})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 bg-gray-100 border-t border-gray-300 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Lines: ",t.split(`
`).length]}),e.jsxs("span",{children:["Characters: ",t.length]}),e.jsxs("span",{children:["Words: ",t.trim()?t.trim().split(/\s+/).length:0]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsxs("span",{children:["ðŸ“ ",l]}),e.jsx("span",{children:x?"Modified":"Saved"})]})]})]})},Bt=({onClose:a})=>{const[r,s]=m.useState(null),[t,n]=m.useState(null),[i,c]=m.useState(!1),[x,h]=m.useState([]),[l,j]=m.useState("0"),g=v=>{i?(j(v),c(!1)):j(l==="0"?v:l+v)},z=()=>{i?(j("0."),c(!1)):l.indexOf(".")===-1&&j(l+".")},d=()=>{j("0"),s(null),n(null),c(!1)},M=()=>{j("0")},b=v=>{const f=parseFloat(l);if(r===null)s(f);else if(t){const y=r||0,S=W(y,f,t);j(String(S)),s(S);const o=`${y} ${t} ${f} = ${S}`;h(u=>[...u.slice(-9),o])}c(!0),n(v)},W=(v,f,y)=>{switch(y){case"+":return v+f;case"-":return v-f;case"Ã—":return v*f;case"Ã·":return f!==0?v/f:0;case"%":return v%f;default:return f}},T=()=>{t&&r!==null&&(b("="),n(null),s(null),c(!0))},C=v=>{const f=parseFloat(l);let y;switch(v){case"âˆš":y=Math.sqrt(f);break;case"xÂ²":y=f*f;break;case"1/x":y=f!==0?1/f:0;break;case"+/-":y=-f;break;default:return}j(String(y)),c(!0);const S=`${v}(${f}) = ${y}`;h(o=>[...o.slice(-9),S])};m.useEffect(()=>{const v=f=>{const{key:y}=f;y>="0"&&y<="9"?g(y):y==="."?z():y==="+"||y==="-"||y==="*"||y==="/"?b(y):y==="Enter"||y==="="?T():y==="Escape"||y==="c"||y==="C"?d():y==="Backspace"&&(l.length>1?j(l.slice(0,-1)):j("0"))};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[l,t,r,i,g,z,b,T]);const E=v=>{if(v.length>12){const f=parseFloat(v);if(f>999999999999||f<-999999999999)return f.toExponential(6)}return v},I=({onClick:v,className:f="",children:y,title:S})=>e.jsx("button",{onClick:v,title:S,className:`
        h-12 rounded-lg font-medium text-sm transition-all duration-150
        hover:scale-105 active:scale-95 shadow-sm
        ${f}
      `,children:y});return e.jsxs("div",{className:"flex h-full bg-gray-900 text-white",children:[e.jsxs("div",{className:"flex flex-col p-4 flex-1",children:[e.jsx("div",{className:"bg-black rounded-lg p-4 mb-4 min-h-[80px] flex flex-col justify-end",children:e.jsxs("div",{className:"text-right",children:[t&&r!==null&&e.jsxs("div",{className:"text-gray-400 text-sm mb-1",children:[r," ",t]}),e.jsx("div",{className:"text-3xl font-mono overflow-hidden",children:E(l)})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 flex-1",children:[e.jsx(I,{onClick:d,className:"bg-red-600 hover:bg-red-700 text-white col-span-2",title:"Clear All (Esc)",children:"AC"}),e.jsx(I,{onClick:M,className:"bg-orange-600 hover:bg-orange-700 text-white",title:"Clear Entry",children:"CE"}),e.jsx(I,{onClick:()=>b("Ã·"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Divide (/)",children:"Ã·"}),e.jsx(I,{onClick:()=>g("7"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"7"}),e.jsx(I,{onClick:()=>g("8"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"8"}),e.jsx(I,{onClick:()=>g("9"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"9"}),e.jsx(I,{onClick:()=>b("Ã—"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Multiply (*)",children:"Ã—"}),e.jsx(I,{onClick:()=>g("4"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"4"}),e.jsx(I,{onClick:()=>g("5"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"5"}),e.jsx(I,{onClick:()=>g("6"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"6"}),e.jsx(I,{onClick:()=>b("-"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Subtract (-)",children:"âˆ’"}),e.jsx(I,{onClick:()=>g("1"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"1"}),e.jsx(I,{onClick:()=>g("2"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"2"}),e.jsx(I,{onClick:()=>g("3"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"3"}),e.jsx(I,{onClick:()=>b("+"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Add (+)",children:"+"}),e.jsx(I,{onClick:()=>C("+/-"),className:"bg-gray-600 hover:bg-gray-500 text-white",title:"Change Sign",children:"+/âˆ’"}),e.jsx(I,{onClick:()=>g("0"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"0"}),e.jsx(I,{onClick:z,className:"bg-gray-700 hover:bg-gray-600 text-white",title:"Decimal Point (.)",children:"."}),e.jsx(I,{onClick:T,className:"bg-green-600 hover:bg-green-700 text-white",title:"Equals (Enter)",children:"="}),e.jsx(I,{onClick:()=>C("âˆš"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Square Root",children:"âˆš"}),e.jsx(I,{onClick:()=>C("xÂ²"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Square",children:"xÂ²"}),e.jsx(I,{onClick:()=>C("1/x"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Reciprocal",children:"1/x"}),e.jsx(I,{onClick:()=>b("%"),className:"bg-purple-600 hover:bg-purple-700 text-white",title:"Modulo",children:"%"})]})]}),e.jsxs("div",{className:"w-64 bg-gray-800 border-l border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"History"}),e.jsx("button",{onClick:()=>h([]),className:"p-1 text-gray-400 hover:text-white rounded",title:"Clear History",children:e.jsx(pe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:x.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No calculations yet"}):x.slice().reverse().map((v,f)=>e.jsx("div",{className:"p-2 bg-gray-700 rounded text-sm font-mono cursor-pointer hover:bg-gray-600",onClick:()=>{const y=v.split(" = ")[1];y&&(j(y),c(!0))},children:v},f))})]})]})},Yt=({onClose:a})=>{const[r,s]=m.useState([]),[t,n]=m.useState(null),[i,c]=m.useState(!1),[x,h]=m.useState(""),[l,j]=m.useState(""),[g,z]=m.useState(""),[d,M]=m.useState(""),{createFile:b,navigateTo:W}=H();m.useEffect(()=>{const u=localStorage.getItem("daveOS-notes");if(u){const k=JSON.parse(u).map(D=>({...D,createdAt:new Date(D.createdAt),modifiedAt:new Date(D.modifiedAt)}));s(k)}},[]),m.useEffect(()=>{localStorage.setItem("daveOS-notes",JSON.stringify(r))},[r]);const T=()=>{const u={id:Date.now().toString(),title:"New Note",content:"",createdAt:new Date,modifiedAt:new Date,tags:[]};s(k=>[u,...k]),n(u),j(u.title),z(u.content),M(""),c(!0)},C=u=>{confirm("Delete this note?")&&(s(k=>k.filter(D=>D.id!==u)),t?.id===u&&(n(null),c(!1)))},E=u=>{n(u),j(u.title),z(u.content),M(u.tags.join(", ")),c(!0)},I=()=>{if(!t)return;const u={...t,title:l.trim()||"Untitled",content:g,tags:d.split(",").map(k=>k.trim()).filter(k=>k),modifiedAt:new Date};s(k=>k.map(D=>D.id===t.id?u:D)),n(u),c(!1)},v=()=>{c(!1),t&&(j(t.title),z(t.content),M(t.tags.join(", ")))},f=async u=>{try{await W("/home/user/Documents");const k=`${u.title.replace(/[^a-zA-Z0-9]/g,"_")}.txt`,D=`${u.title}
${"=".repeat(u.title.length)}

${u.content}

Tags: ${u.tags.join(", ")}
Created: ${u.createdAt.toLocaleString()}
Modified: ${u.modifiedAt.toLocaleString()}`;await b(k,D),alert(`Note exported as ${k}`)}catch(k){console.error("Error exporting note:",k),alert("Error exporting note")}},y=r.filter(u=>u.title.toLowerCase().includes(x.toLowerCase())||u.content.toLowerCase().includes(x.toLowerCase())||u.tags.some(k=>k.toLowerCase().includes(x.toLowerCase()))),S=u=>{const D=new Date().getTime()-u.getTime(),p=Math.floor(D/(1e3*60*60*24));return p===0?u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):p===1?"Yesterday":p<7?`${p} days ago`:u.toLocaleDateString()},o=u=>u.length>100?u.substring(0,100)+"...":u;return e.jsxs("div",{className:"flex h-full bg-white",children:[e.jsxs("div",{className:"w-80 bg-gray-50 border-r border-gray-300 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Notes"}),e.jsx("button",{onClick:T,className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"New Note",children:e.jsx(Ee,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search notes...",value:x,onChange:u=>h(u.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:y.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(ue,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No notes found"}),e.jsx("p",{className:"text-sm",children:"Create your first note!"})]}):y.map(u=>e.jsx("div",{className:`p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 ${t?.id===u.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,onClick:()=>{n(u),c(!1)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:u.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:o(u.content)}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:S(u.modifiedAt)}),u.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.tags.slice(0,2).map((k,D)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded",children:k},D)),u.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",u.tags.length-2]})]})]})]}),e.jsx("button",{onClick:k=>{k.stopPropagation(),C(u.id)},className:"ml-2 p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete Note",children:e.jsx(ge,{className:"w-4 h-4"})})]})},u.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-300 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[i?e.jsx("input",{type:"text",value:l,onChange:u=>j(u.target.value),className:"text-xl font-semibold w-full border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Note title..."}):e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Created: ",t.createdAt.toLocaleDateString()]}),e.jsxs("span",{children:["Modified: ",t.modifiedAt.toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:I,className:"p-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors",title:"Save",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"p-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",title:"Cancel",children:e.jsx(se,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(t),className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",title:"Edit",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(t),className:"p-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",title:"Export to File",children:"ðŸ“„"})]})})]}),i?e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",value:d,onChange:u=>M(u.target.value),placeholder:"Tags (comma separated)...",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}):t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:t.tags.map((u,k)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full",children:u},k))})]}),e.jsx("div",{className:"flex-1 p-4",children:i?e.jsx("textarea",{value:g,onChange:u=>z(u.target.value),className:"w-full h-full border border-gray-300 rounded p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Start writing your note..."}):e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-sans leading-relaxed",children:t.content||"This note is empty. Click Edit to add content."})})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No note selected"}),e.jsx("p",{children:"Select a note from the sidebar or create a new one"})]})})})]})},Kt=({imagePath:a,onClose:r})=>{const[s,t]=m.useState(null),[n,i]=m.useState([]),[c,x]=m.useState(0),[h,l]=m.useState(100),[j,g]=m.useState(0),[z,d]=m.useState(!1),[M,b]=m.useState({x:0,y:0}),[W,T]=m.useState({x:0,y:0}),[C,E]=m.useState(!1),[I,v]=m.useState(null),f=m.useRef(null),y=m.useRef(null),{navigateTo:S}=H(),o=["jpg","jpeg","png","gif","bmp","webp","svg"];m.useEffect(()=>{a?u(a):k()},[a]);const u=async L=>{try{const _=L.substring(0,L.lastIndexOf("/"))||"/",Y=L.substring(L.lastIndexOf("/")+1);await S(_),k();const Q=H.getState().currentEntries.filter(ae=>ae.type===O.FILE&&D(ae.name)),ne=Q.findIndex(ae=>ae.name===Y);ne!==-1&&(x(ne),t(p(Q[ne])),v(Q[ne]))}catch(_){console.error("Error loading image:",_)}},k=()=>{const _=H.getState().currentEntries.filter(Y=>Y.type===O.FILE&&D(Y.name));i(_),_.length>0&&!s&&(x(0),t(p(_[0])),v(_[0]))},D=L=>{const _=L.split(".").pop()?.toLowerCase();return _?o.includes(_):!1},p=L=>{const _=["https://picsum.photos/800/600?random=1","https://picsum.photos/800/600?random=2","https://picsum.photos/800/600?random=3","https://picsum.photos/800/600?random=4","https://picsum.photos/800/600?random=5"];return _[Math.floor(Math.random()*_.length)]},w=L=>{if(n.length===0)return;let _;L==="prev"?_=c>0?c-1:n.length-1:_=c<n.length-1?c+1:0,x(_),t(p(n[_])),v(n[_]),N()},A=L=>{const _=Math.max(10,Math.min(500,h+L));l(_)},U=L=>{g(_=>(_+L)%360)},N=()=>{l(100),g(0),T({x:0,y:0})},R=()=>{if(!f.current||!y.current)return;const L=y.current.getBoundingClientRect(),_=f.current,Y=(L.width-40)/_.naturalWidth,be=(L.height-40)/_.naturalHeight,Q=Math.min(Y,be);l(Math.round(Q*100)),T({x:0,y:0})},F=L=>{h>100&&(d(!0),b({x:L.clientX-W.x,y:L.clientY-W.y}))},$=L=>{z&&T({x:L.clientX-M.x,y:L.clientY-M.y})},B=()=>{d(!1)};m.useEffect(()=>{const L=_=>{switch(_.key){case"ArrowLeft":w("prev");break;case"ArrowRight":w("next");break;case"+":case"=":l(Y=>Math.min(Y+.1,3));break;case"-":l(Y=>Math.max(Y-.1,.1));break;case"0":l(1);break;case"i":E(!C);break}};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[w,C]);const Z=L=>L?L<1024?`${L} B`:L<1024*1024?`${(L/1024).toFixed(1)} KB`:`${(L/(1024*1024)).toFixed(1)} MB`:"Unknown";return s?e.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 border-b border-gray-700",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm font-medium",children:[I?.name," (",c+1," of ",n.length,")"]})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>w("prev"),disabled:n.length<=1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous (â†)",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w("next"),disabled:n.length<=1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Next (â†’)",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>A(-25),className:"p-1 text-gray-400 hover:text-white",title:"Zoom Out (-)",children:e.jsx(Be,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-700 rounded min-w-[60px] text-center",children:[h,"%"]}),e.jsx("button",{onClick:()=>A(25),className:"p-1 text-gray-400 hover:text-white",title:"Zoom In (+)",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:R,className:"p-1 text-gray-400 hover:text-white",title:"Fit to Window (F)",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:N,className:"p-1 text-gray-400 hover:text-white",title:"Reset View (0)",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>U(-90),className:"p-1 text-gray-400 hover:text-white",title:"Rotate Left",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(90),className:"p-1 text-gray-400 hover:text-white",title:"Rotate Right",children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-4 bg-gray-600 mx-1"}),e.jsx("button",{onClick:()=>E(!C),className:`p-1 hover:text-white ${C?"text-blue-400":"text-gray-400"}`,title:"Image Info (I)",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{console.log("Download image:",I?.name)},className:"p-1 text-gray-400 hover:text-white",title:"Download",children:e.jsx(qe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{ref:y,className:"flex-1 overflow-hidden relative cursor-grab active:cursor-grabbing",onMouseDown:F,onMouseMove:$,onMouseUp:B,onMouseLeave:B,children:[e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("img",{ref:f,src:s,alt:I?.name,className:"max-w-none transition-transform duration-200",style:{transform:`
                translate(${W.x}px, ${W.y}px) 
                scale(${h/100}) 
                rotate(${j}deg)
              `,cursor:h>100?"grab":"default"},onLoad:()=>{h===100&&R()},draggable:!1})}),n.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full transition-all",children:e.jsx(xe,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>w("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full transition-all",children:e.jsx(oe,{className:"w-6 h-6"})})]})]}),C&&I&&e.jsxs("div",{className:"absolute top-16 right-4 bg-black bg-opacity-90 rounded-lg p-4 min-w-[250px] max-w-[300px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium",children:"Image Information"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white",children:e.jsx(se,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Name:"}),e.jsx("div",{className:"break-all",children:I.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Size:"}),e.jsx("div",{children:Z(I.size)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Modified:"}),e.jsx("div",{children:I.modifiedAt?.toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Type:"}),e.jsx("div",{children:I.name.split(".").pop()?.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Zoom:"}),e.jsxs("div",{children:[h,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Rotation:"}),e.jsxs("div",{children:[j,"Â°"]})]})]})]}),e.jsx("div",{className:"absolute bottom-4 left-4 text-xs text-gray-500",children:e.jsx("div",{children:"â† â†’ Navigate â€¢ + - Zoom â€¢ 0 Reset â€¢ F Fit â€¢ I Info"})})]}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-900 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ–¼ï¸"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No images found"}),e.jsx("p",{className:"text-gray-400",children:"Navigate to a folder with images to view them"})]})})},Xt=({onClose:a})=>{const[r,s]=m.useState("appearance"),[t,n]=m.useState({appearance:{theme:"light",accentColor:"#3b82f6",wallpaper:"default",fontSize:14,animations:!0},display:{resolution:"1920x1080",scaling:100,brightness:80,nightMode:!1,nightModeSchedule:{start:"22:00",end:"06:00"}},audio:{masterVolume:70,systemSounds:!0,notificationSounds:!0,microphoneVolume:50},network:{wifi:!0,autoConnect:!0,proxy:"",dns:"8.8.8.8"},privacy:{locationServices:!1,analytics:!1,crashReports:!0,cookies:"necessary"},notifications:{enabled:!0,showOnLockScreen:!1,soundEnabled:!0,vibrationEnabled:!0,doNotDisturb:!1,dndSchedule:{start:"23:00",end:"07:00"}},input:{keyboardLayout:"US",keyRepeatRate:50,mouseSpeed:50,scrollDirection:"natural",touchpadGestures:!0},system:{language:"English",region:"United States",timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",autoUpdates:!0,telemetry:!1},accessibility:{highContrast:!1,largeText:!1,screenReader:!1,reducedMotion:!1,colorBlindness:"none"}}),[i,c]=m.useState(!1);m.useEffect(()=>{const o=localStorage.getItem("daveOS-settings");o&&n(JSON.parse(o))},[]);const x=()=>{localStorage.setItem("daveOS-settings",JSON.stringify(t)),c(!1)},h=()=>{confirm("Reset all settings to default values?")&&(localStorage.removeItem("daveOS-settings"),window.location.reload())},l=(o,u,k)=>{n(D=>({...D,[o]:{...D[o],[u]:k}})),c(!0)},j=[{id:"appearance",name:"Appearance",icon:Je},{id:"display",name:"Display",icon:Ve},{id:"audio",name:"Audio",icon:Ge},{id:"network",name:"Network",icon:Me},{id:"privacy",name:"Privacy",icon:Qe},{id:"notifications",name:"Notifications",icon:Fe},{id:"input",name:"Input",icon:et},{id:"system",name:"System",icon:tt},{id:"accessibility",name:"Accessibility",icon:st}],g=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"],z=({value:o,onChange:u,min:k=0,max:D=100,step:p=1,label:w})=>e.jsxs("div",{className:"space-y-2",children:[w&&e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:w}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-500",children:k}),e.jsx("input",{type:"range",min:k,max:D,step:p,value:o,onChange:A=>u(Number(A.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-500",children:D}),e.jsx("span",{className:"text-sm font-medium w-12 text-right",children:o})]})]}),d=({checked:o,onChange:u,label:k,description:D})=>e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:k}),D&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:D})]}),e.jsx("button",{onClick:()=>u(!o),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o?"translate-x-6":"translate-x-1"}`})})]}),M=({value:o,onChange:u,options:k,label:D})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:D}),e.jsx("select",{value:o,onChange:p=>u(p.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),b=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Theme"}),e.jsx(M,{value:t.appearance.theme,onChange:o=>l("appearance","theme",o),options:[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"auto",label:"Auto (System)"}],label:"Theme Mode"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Accent Color"}),e.jsx("div",{className:"flex space-x-3",children:g.map(o=>e.jsx("button",{onClick:()=>l("appearance","accentColor",o),className:`w-8 h-8 rounded-full border-2 ${t.appearance.accentColor===o?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:o}},o))})]}),e.jsx(z,{value:t.appearance.fontSize,onChange:o=>l("appearance","fontSize",o),min:12,max:20,label:"Font Size"}),e.jsx(d,{checked:t.appearance.animations,onChange:o=>l("appearance","animations",o),label:"Enable Animations",description:"Show smooth transitions and effects"})]}),W=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{value:t.display.resolution,onChange:o=>l("display","resolution",o),options:[{value:"1920x1080",label:"1920 Ã— 1080 (Full HD)"},{value:"2560x1440",label:"2560 Ã— 1440 (QHD)"},{value:"3840x2160",label:"3840 Ã— 2160 (4K)"}],label:"Resolution"}),e.jsx(z,{value:t.display.scaling,onChange:o=>l("display","scaling",o),min:75,max:200,step:25,label:"Display Scaling (%)"}),e.jsx(z,{value:t.display.brightness,onChange:o=>l("display","brightness",o),label:"Brightness"}),e.jsx(d,{checked:t.display.nightMode,onChange:o=>l("display","nightMode",o),label:"Night Mode",description:"Reduces blue light for better sleep"}),t.display.nightMode&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:t.display.nightModeSchedule.start,onChange:o=>l("display","nightModeSchedule",{...t.display.nightModeSchedule,start:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:t.display.nightModeSchedule.end,onChange:o=>l("display","nightModeSchedule",{...t.display.nightModeSchedule,end:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]})]})]}),T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(z,{value:t.audio.masterVolume,onChange:o=>l("audio","masterVolume",o),label:"Master Volume"}),e.jsx(z,{value:t.audio.microphoneVolume,onChange:o=>l("audio","microphoneVolume",o),label:"Microphone Volume"}),e.jsx(d,{checked:t.audio.systemSounds,onChange:o=>l("audio","systemSounds",o),label:"System Sounds",description:"Play sounds for system events"}),e.jsx(d,{checked:t.audio.notificationSounds,onChange:o=>l("audio","notificationSounds",o),label:"Notification Sounds",description:"Play sounds for notifications"})]}),C=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.network.wifi,onChange:o=>l("network","wifi",o),label:"Wi-Fi",description:"Enable wireless networking"}),e.jsx(d,{checked:t.network.autoConnect,onChange:o=>l("network","autoConnect",o),label:"Auto-connect to known networks"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DNS Server"}),e.jsx("input",{type:"text",value:t.network.dns,onChange:o=>l("network","dns",o.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"8.8.8.8"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proxy Server"}),e.jsx("input",{type:"text",value:t.network.proxy,onChange:o=>l("network","proxy",o.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"proxy.example.com:8080"})]})]}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.privacy.locationServices,onChange:o=>l("privacy","locationServices",o),label:"Location Services",description:"Allow apps to access your location"}),e.jsx(d,{checked:t.privacy.analytics,onChange:o=>l("privacy","analytics",o),label:"Analytics & Diagnostics",description:"Share usage data to improve the system"}),e.jsx(d,{checked:t.privacy.crashReports,onChange:o=>l("privacy","crashReports",o),label:"Crash Reports",description:"Automatically send crash reports"}),e.jsx(M,{value:t.privacy.cookies,onChange:o=>l("privacy","cookies",o),options:[{value:"all",label:"Accept All Cookies"},{value:"necessary",label:"Necessary Cookies Only"},{value:"none",label:"Block All Cookies"}],label:"Cookie Policy"})]}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.notifications.enabled,onChange:o=>l("notifications","enabled",o),label:"Enable Notifications"}),e.jsx(d,{checked:t.notifications.showOnLockScreen,onChange:o=>l("notifications","showOnLockScreen",o),label:"Show on Lock Screen"}),e.jsx(d,{checked:t.notifications.soundEnabled,onChange:o=>l("notifications","soundEnabled",o),label:"Notification Sounds"}),e.jsx(d,{checked:t.notifications.doNotDisturb,onChange:o=>l("notifications","doNotDisturb",o),label:"Do Not Disturb",description:"Silence notifications during specified hours"}),t.notifications.doNotDisturb&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:t.notifications.dndSchedule.start,onChange:o=>l("notifications","dndSchedule",{...t.notifications.dndSchedule,start:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:t.notifications.dndSchedule.end,onChange:o=>l("notifications","dndSchedule",{...t.notifications.dndSchedule,end:o.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2"})]})]})]}),v=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{value:t.input.keyboardLayout,onChange:o=>l("input","keyboardLayout",o),options:[{value:"US",label:"US English"},{value:"UK",label:"UK English"},{value:"ES",label:"Spanish"},{value:"FR",label:"French"},{value:"DE",label:"German"}],label:"Keyboard Layout"}),e.jsx(z,{value:t.input.keyRepeatRate,onChange:o=>l("input","keyRepeatRate",o),label:"Key Repeat Rate"}),e.jsx(z,{value:t.input.mouseSpeed,onChange:o=>l("input","mouseSpeed",o),label:"Mouse Speed"}),e.jsx(M,{value:t.input.scrollDirection,onChange:o=>l("input","scrollDirection",o),options:[{value:"natural",label:"Natural (Content moves with finger)"},{value:"traditional",label:"Traditional (Content moves opposite to finger)"}],label:"Scroll Direction"}),e.jsx(d,{checked:t.input.touchpadGestures,onChange:o=>l("input","touchpadGestures",o),label:"Touchpad Gestures",description:"Enable multi-finger gestures"})]}),f=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{value:t.system.language,onChange:o=>l("system","language",o),options:[{value:"English",label:"English"},{value:"Spanish",label:"EspaÃ±ol"},{value:"French",label:"FranÃ§ais"},{value:"German",label:"Deutsch"},{value:"Portuguese",label:"PortuguÃªs"}],label:"Language"}),e.jsx(M,{value:t.system.region,onChange:o=>l("system","region",o),options:[{value:"United States",label:"United States"},{value:"United Kingdom",label:"United Kingdom"},{value:"Canada",label:"Canada"},{value:"Australia",label:"Australia"}],label:"Region"}),e.jsx(M,{value:t.system.timeFormat,onChange:o=>l("system","timeFormat",o),options:[{value:"12h",label:"12-hour (AM/PM)"},{value:"24h",label:"24-hour"}],label:"Time Format"}),e.jsx(M,{value:t.system.dateFormat,onChange:o=>l("system","dateFormat",o),options:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD"}],label:"Date Format"}),e.jsx(d,{checked:t.system.autoUpdates,onChange:o=>l("system","autoUpdates",o),label:"Automatic Updates",description:"Install updates automatically"}),e.jsx(d,{checked:t.system.telemetry,onChange:o=>l("system","telemetry",o),label:"Telemetry",description:"Send usage data to improve the system"})]}),y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{checked:t.accessibility.highContrast,onChange:o=>l("accessibility","highContrast",o),label:"High Contrast",description:"Increase contrast for better visibility"}),e.jsx(d,{checked:t.accessibility.largeText,onChange:o=>l("accessibility","largeText",o),label:"Large Text",description:"Use larger text throughout the system"}),e.jsx(d,{checked:t.accessibility.screenReader,onChange:o=>l("accessibility","screenReader",o),label:"Screen Reader",description:"Enable screen reader support"}),e.jsx(d,{checked:t.accessibility.reducedMotion,onChange:o=>l("accessibility","reducedMotion",o),label:"Reduce Motion",description:"Minimize animations and transitions"}),e.jsx(M,{value:t.accessibility.colorBlindness,onChange:o=>l("accessibility","colorBlindness",o),options:[{value:"none",label:"None"},{value:"protanopia",label:"Protanopia (Red-blind)"},{value:"deuteranopia",label:"Deuteranopia (Green-blind)"},{value:"tritanopia",label:"Tritanopia (Blue-blind)"}],label:"Color Blindness Filter"})]}),S=()=>{switch(r){case"appearance":return b();case"display":return W();case"audio":return T();case"network":return C();case"privacy":return E();case"notifications":return I();case"input":return v();case"system":return f();case"accessibility":return y();default:return null}};return e.jsxs("div",{className:"flex h-full bg-white",children:[e.jsxs("div",{className:"w-64 bg-gray-50 border-r border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-6 h-6 text-gray-600"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Settings"})]})}),e.jsx("div",{className:"p-2",children:j.map(o=>{const u=o.icon;return e.jsxs("button",{onClick:()=>s(o.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${r===o.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:o.name}),e.jsx(oe,{className:"w-4 h-4 ml-auto"})]},o.id)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold capitalize",children:r}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Configure your ",r," preferences"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[i&&e.jsxs("button",{onClick:x,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]}),e.jsxs("button",{onClick:h,className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset"})]})]})]})}),e.jsx("div",{className:"flex-1 p-6 overflow-auto",children:S()})]})]})},qt=({onClose:a})=>{const[r,s]=m.useState(new Date),[t,n]=m.useState(new Date),[i,c]=m.useState("month"),[x,h]=m.useState([]),[l,j]=m.useState(!1),[g,z]=m.useState(null),[d,M]=m.useState({title:"",description:"",date:"",startTime:"09:00",endTime:"10:00",location:"",attendees:"",reminder:15,color:"#3b82f6",allDay:!1}),b=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"];m.useEffect(()=>{const p=localStorage.getItem("daveOS-calendar-events");if(p){const w=JSON.parse(p).map(A=>({...A,date:new Date(A.date)}));h(w)}},[]),m.useEffect(()=>{localStorage.setItem("daveOS-calendar-events",JSON.stringify(x))},[x]);const W=p=>new Date(p.getFullYear(),p.getMonth()+1,0).getDate(),T=p=>new Date(p.getFullYear(),p.getMonth(),1).getDay(),C=p=>{s(w=>{const A=new Date(w);return p==="prev"?A.setMonth(w.getMonth()-1):A.setMonth(w.getMonth()+1),A})},E=p=>{s(w=>{const A=new Date(w),U=p==="prev"?-7:7;return A.setDate(w.getDate()+U),A})},I=p=>{s(w=>{const A=new Date(w),U=p==="prev"?-1:1;return A.setDate(w.getDate()+U),A})},v=p=>x.filter(w=>w.date.toDateString()===p.toDateString()),f=(p,w)=>{w?(z(w),M({title:w.title,description:w.description,date:w.date.toISOString().split("T")[0],startTime:w.startTime,endTime:w.endTime,location:w.location||"",attendees:w.attendees?.join(", ")||"",reminder:w.reminder||15,color:w.color,allDay:w.allDay})):(z(null),M({title:"",description:"",date:(p||t).toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",location:"",attendees:"",reminder:15,color:"#3b82f6",allDay:!1})),j(!0)},y=()=>{const p={id:g?.id||Date.now().toString(),title:d.title,description:d.description,date:new Date(d.date),startTime:d.startTime,endTime:d.endTime,location:d.location,attendees:d.attendees?d.attendees.split(",").map(w=>w.trim()):[],reminder:d.reminder,color:d.color,allDay:d.allDay};h(g?w=>w.map(A=>A.id===g.id?p:A):w=>[...w,p]),j(!1),z(null)},S=p=>{confirm("Delete this event?")&&(h(w=>w.filter(A=>A.id!==p)),j(!1))},o=p=>p.toLocaleDateString("en-US",{month:"long",year:"numeric"}),u=p=>{const w=new Date(p);w.setDate(p.getDate()-p.getDay());const A=new Date(w);return A.setDate(w.getDate()+6),`${w.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${A.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`},k=()=>{const p=W(r),w=T(r),A=[],U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];A.push(e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:U.map(F=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600",children:F},F))},"headers"));const N=[];let R=[];for(let F=0;F<w;F++)R.push(e.jsx("div",{className:"h-24 p-1 border border-gray-200"},`empty-${F}`));for(let F=1;F<=p;F++){const $=new Date(r.getFullYear(),r.getMonth(),F),B=v($),Z=$.toDateString()===new Date().toDateString(),L=$.toDateString()===t.toDateString();R.push(e.jsxs("div",{className:`h-24 p-1 border border-gray-200 cursor-pointer hover:bg-gray-50 ${Z?"bg-blue-50":""} ${L?"ring-2 ring-blue-500":""}`,onClick:()=>n($),onDoubleClick:()=>f($),children:[e.jsx("div",{className:`text-sm font-medium ${Z?"text-blue-600":"text-gray-900"}`,children:F}),e.jsxs("div",{className:"space-y-1 mt-1",children:[B.slice(0,2).map(_=>e.jsx("div",{className:"text-xs p-1 rounded truncate cursor-pointer hover:opacity-80",style:{backgroundColor:_.color,color:"white"},onClick:Y=>{Y.stopPropagation(),f(void 0,_)},children:_.title},_.id)),B.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",B.length-2," more"]})]})]},F)),R.length===7&&(N.push(e.jsx("div",{className:"grid grid-cols-7 gap-1",children:R},`week-${N.length}`)),R=[])}for(;R.length<7&&R.length>0;)R.push(e.jsx("div",{className:"h-24 p-1 border border-gray-200"},`empty-end-${R.length}`));return R.length===7&&N.push(e.jsx("div",{className:"grid grid-cols-7 gap-1",children:R},`week-${N.length}`)),A.push(...N),e.jsx("div",{children:A})},D=()=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:g?"Edit Event":"New Event"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:d.title,onChange:p=>M(w=>({...w,title:p.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:p=>M(w=>({...w,description:p.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Event description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:d.date,onChange:p=>M(w=>({...w,date:p.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"allDay",checked:d.allDay,onChange:p=>M(w=>({...w,allDay:p.target.checked})),className:"rounded"}),e.jsx("label",{htmlFor:"allDay",className:"text-sm font-medium text-gray-700",children:"All day"})]}),!d.allDay&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:d.startTime,onChange:p=>M(w=>({...w,startTime:p.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:d.endTime,onChange:p=>M(w=>({...w,endTime:p.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:d.location,onChange:p=>M(w=>({...w,location:p.target.value})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),e.jsx("div",{className:"flex space-x-2",children:b.map(p=>e.jsx("button",{onClick:()=>M(w=>({...w,color:p})),className:`w-6 h-6 rounded-full border-2 ${d.color===p?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:p}},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder"}),e.jsxs("select",{value:d.reminder,onChange:p=>M(w=>({...w,reminder:Number(p.target.value)})),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"No reminder"}),e.jsx("option",{value:5,children:"5 minutes before"}),e.jsx("option",{value:15,children:"15 minutes before"}),e.jsx("option",{value:30,children:"30 minutes before"}),e.jsx("option",{value:60,children:"1 hour before"}),e.jsx("option",{value:1440,children:"1 day before"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("div",{children:g&&e.jsxs("button",{onClick:()=>S(g.id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 flex items-center space-x-2",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:y,disabled:!d.title,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})]})]})]})}):null;return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{i==="month"?C("prev"):i==="week"?E("prev"):I("prev")},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-xl font-semibold min-w-[200px] text-center",children:[i==="month"&&o(r),i==="week"&&u(r),i==="day"&&r.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),e.jsx("button",{onClick:()=>{i==="month"?C("next"):i==="week"?E("next"):I("next")},className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:()=>s(new Date),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Today"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex border border-gray-300 rounded",children:["month","week","day"].map(p=>e.jsx("button",{onClick:()=>c(p),className:`px-3 py-1 text-sm capitalize ${i===p?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:p},p))}),e.jsxs("button",{onClick:()=>f(),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center space-x-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{children:"New Event"})]})]})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-auto",children:[i==="month"&&k(),i==="week"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Week view - Coming soon"}),i==="day"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Day view - Coming soon"})]}),D()]})},Zt=({onClose:a})=>{const[r,s]=m.useState({cpu:{usage:0,cores:8,frequency:2400,temperature:45},memory:{used:0,total:16384,available:0,percentage:0},storage:{used:0,total:512e3,available:0,percentage:0},network:{download:0,upload:0,ping:25,connected:!0},battery:{level:85,charging:!1,timeRemaining:240},processes:[]}),[t,n]=m.useState("overview"),[i,c]=m.useState(!0),[x,h]=m.useState(2e3),[l,j]=m.useState([]),[g,z]=m.useState([]),[d,M]=m.useState({download:[],upload:[]}),b=m.useRef(null),W=()=>{const o=Math.random()*100,u=8192+Math.random()*4096,k=16384,D=256e3+Math.random()*5e4,p=512e3;return{cpu:{usage:o,cores:8,frequency:2400+Math.random()*400,temperature:40+Math.random()*20},memory:{used:u,total:k,available:k-u,percentage:u/k*100},storage:{used:D,total:p,available:p-D,percentage:D/p*100},network:{download:Math.random()*1e3,upload:Math.random()*100,ping:20+Math.random()*30,connected:Math.random()>.05},battery:{level:70+Math.random()*30,charging:Math.random()>.7,timeRemaining:180+Math.random()*120},processes:T()}},T=()=>["System","Chrome","VSCode","Node.js","Discord","Spotify","Windows Explorer","dwm.exe","winlogon.exe","svchost.exe","firefox.exe","steam.exe","notepad.exe","calculator.exe"].map((u,k)=>({name:u,pid:1e3+k*100+Math.floor(Math.random()*100),cpu:Math.random()*25,memory:Math.random()*1024,status:Math.random()>.1?"Running":"Sleeping"})).sort((u,k)=>k.cpu-u.cpu),C=()=>{const o=W();s(o),j(u=>[...u.slice(-59),o.cpu.usage]),z(u=>[...u.slice(-59),o.memory.percentage]),M(u=>({download:[...u.download.slice(-59),o.network.download],upload:[...u.upload.slice(-59),o.network.upload]}))};m.useEffect(()=>(C(),i&&(b.current=window.setInterval(C,x)),()=>{b.current!==null&&window.clearInterval(b.current)}),[i,x]);const E=o=>{if(o===0)return"0 B";const u=1024,k=["B","KB","MB","GB","TB"],D=Math.floor(Math.log(o)/Math.log(u));return parseFloat((o/Math.pow(u,D)).toFixed(2))+" "+k[D]},I=o=>{const u=Math.floor(o/60),k=Math.floor(o%60);return`${u}h ${k}m`},v=({value:o,max:u,color:k="bg-blue-500",label:D})=>{const p=o/u*100;return e.jsxs("div",{className:"w-full",children:[D&&e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:D}),e.jsxs("span",{children:[p.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${k}`,style:{width:`${Math.min(p,100)}%`}})})]})},f=({data:o,color:u="#3b82f6",height:k=40})=>{if(o.length<2)return e.jsx("div",{style:{height:k},className:"bg-gray-100 rounded"});const D=Math.max(...o,1),p=o.map((w,A)=>{const U=A/(o.length-1)*100,N=k-w/D*k;return`${U},${N}`}).join(" ");return e.jsxs("svg",{width:"100%",height:k,className:"rounded",children:[e.jsx("polyline",{fill:"none",stroke:u,strokeWidth:"2",points:p,vectorEffect:"non-scaling-stroke"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:u,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:u,stopOpacity:"0.1"})]})}),e.jsx("polygon",{fill:"url(#gradient)",points:`0,${k} ${p} 100,${k}`})]})},y=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-medium",children:"CPU"})]}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[r.cpu.usage.toFixed(1),"%"]})]}),e.jsx(v,{value:r.cpu.usage,max:100,color:"bg-blue-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Cores: ",r.cpu.cores]}),e.jsxs("div",{children:["Frequency: ",r.cpu.frequency.toFixed(0)," MHz"]}),e.jsxs("div",{children:["Temperature: ",r.cpu.temperature.toFixed(1),"Â°C"]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(f,{data:l,color:"#3b82f6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"w-5 h-5 text-green-500"}),e.jsx("h3",{className:"font-medium",children:"Memory"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[r.memory.percentage.toFixed(1),"%"]})]}),e.jsx(v,{value:r.memory.used,max:r.memory.total,color:"bg-green-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Used: ",E(r.memory.used*1024*1024)]}),e.jsxs("div",{children:["Available: ",E(r.memory.available*1024*1024)]}),e.jsxs("div",{children:["Total: ",E(r.memory.total*1024*1024)]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(f,{data:g,color:"#10b981"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"w-5 h-5 text-purple-500"}),e.jsx("h3",{className:"font-medium",children:"Storage"})]}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:[r.storage.percentage.toFixed(1),"%"]})]}),e.jsx(v,{value:r.storage.used,max:r.storage.total,color:"bg-purple-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Used: ",E(r.storage.used*1024*1024)]}),e.jsxs("div",{children:["Free: ",E(r.storage.available*1024*1024)]}),e.jsxs("div",{children:["Total: ",E(r.storage.total*1024*1024)]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"font-medium",children:"Network"})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${r.network.connected?"bg-green-500":"bg-red-500"}`})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Download:"}),e.jsxs("span",{className:"font-medium",children:[r.network.download.toFixed(1)," KB/s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Upload:"}),e.jsxs("span",{className:"font-medium",children:[r.network.upload.toFixed(1)," KB/s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ping:"}),e.jsxs("span",{className:"font-medium",children:[r.network.ping.toFixed(0)," ms"]})]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Download"}),e.jsx(f,{data:d.download,color:"#f59e0b",height:30}),e.jsx("div",{className:"text-xs text-gray-500",children:"Upload"}),e.jsx(f,{data:d.upload,color:"#ef4444",height:30})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"font-medium",children:"Battery"})]}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:[r.battery.level.toFixed(0),"%"]})]}),e.jsx(v,{value:r.battery.level,max:100,color:r.battery.level>20?"bg-yellow-500":"bg-red-500"}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:`font-medium ${r.battery.charging?"text-green-600":"text-gray-600"}`,children:r.battery.charging?"Charging":"Discharging"}),r.battery.charging&&e.jsx(lt,{className:"w-4 h-4 text-yellow-500"})]}),e.jsxs("div",{children:["Time remaining: ",I(r.battery.timeRemaining)]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(fe,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-medium",children:"System Info"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("div",{children:"OS: daveOS WebOS"}),e.jsx("div",{children:"Version: 1.0.0"}),e.jsxs("div",{children:["Uptime: ",I(Math.random()*1440)]}),e.jsx("div",{children:"Architecture: x64"}),e.jsxs("div",{children:["Browser: ",navigator.userAgent.split(" ")[0]]})]})]})]}),S=()=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"font-medium",children:"Running Processes"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Process"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"PID"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"CPU %"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Memory"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),e.jsx("tbody",{children:r.processes.map((o,u)=>e.jsxs("tr",{className:u%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium",children:o.name}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:o.pid}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("span",{className:`font-medium ${o.cpu>10?"text-red-600":"text-gray-600"}`,children:[o.cpu.toFixed(1),"%"]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:E(o.memory*1024*1024)}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.status==="Running"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:o.status})})]},o.pid))})]})})]});return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h1",{className:"text-xl font-semibold",children:"System Monitor"})]}),e.jsx("div",{className:"flex border border-gray-300 rounded",children:["overview","processes","network","storage"].map(o=>e.jsx("button",{onClick:()=>n(o),className:`px-3 py-1 text-sm capitalize ${t===o?"bg-blue-500 text-white":"text-gray-700 hover:bg-gray-100"}`,children:o},o))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:o=>c(o.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto-refresh"})]}),e.jsxs("select",{value:x,onChange:o=>h(Number(o.target.value)),disabled:!i,className:"text-sm border border-gray-300 rounded px-2 py-1 disabled:opacity-50",children:[e.jsx("option",{value:1e3,children:"1s"}),e.jsx("option",{value:2e3,children:"2s"}),e.jsx("option",{value:5e3,children:"5s"}),e.jsx("option",{value:1e4,children:"10s"})]}),e.jsx("button",{onClick:C,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:"Refresh Now",children:e.jsx(De,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[t==="overview"&&y(),t==="processes"&&S(),t==="network"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Network details - Coming soon"}),t==="storage"&&e.jsx("div",{className:"text-center text-gray-500 mt-20",children:"Storage details - Coming soon"})]})]})},Jt=String.raw`
  ____              __      ____   ____   __  __
 |  _ \  __ _  ___ / _| ___|  _ \ / ___| |  \/  |  XP MODE
 | | | |/ _\` |/ __| |_ / _ \ | | |\___ \ | |\/| |
 | |_| | (_| | (__|  _|  __/ |_| | ___) || |  | |
 |____/ \__,_|\___|_|  \___|____/ |____/ |_|  |_|

 daveOS XP Mode [Version 5.1.2600]
 (C) 2025 daveOS. All rights reserved.
`;function Vt(a){return Jt}const Gt=({onClose:a})=>{const[r,s]=m.useState("/home/user"),[t,n]=m.useState(["â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”","â”‚           Welcome to daveOS            â”‚","â”‚         Ubuntu-style Terminal          â”‚","â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜","",'Type "help" to see available commands.',""]),[i,c]=m.useState(""),[x,h]=m.useState([]),[l,j]=m.useState(-1),g=m.useRef(null),z=m.useRef(null);m.useEffect(()=>{z.current&&(z.current.scrollTop=z.current.scrollHeight)},[t]),m.useEffect(()=>{g.current&&g.current.focus()},[]);const d=S=>{n(o=>[...o,S])},M=()=>`user@daveos:${r}$ `,b=async S=>{const o=S.trim();if(!o)return;h(p=>[...p,o]),j(-1),d(M()+o);const u=o.split(/\s+/),k=u[0].toLowerCase(),D=u.slice(1);try{switch(k){case"help":d("Available Commands:"),d(""),d("File System:"),d("  ls [path]     - List directory contents"),d("  cd <path>     - Change directory"),d("  pwd           - Print working directory"),d("  cat <file>    - Display file contents"),d("  mkdir <name>  - Create directory"),d("  touch <name>  - Create empty file"),d("  rm <name>     - Remove file or directory"),d(""),d("System:"),d("  ver           - Display daveOS XP Mode version"),d("  clear         - Clear terminal screen"),d("  echo <text>   - Display text"),d("  whoami        - Display current user"),d("  date          - Display current date and time"),d("  help          - Show this help message");break;case"ls":await W(D);break;case"cd":await T(D);break;case"pwd":d(r);break;case"clear":n([]);break;case"echo":d(D.join(" "));break;case"whoami":d("user");break;case"date":d(new Date().toString());break;case"ver":d(Vt(D));break;case"cat":await C(D);break;case"mkdir":await E(D);break;case"touch":await I(D);break;case"rm":await v(D);break;default:d(`Command not found: ${k}`),d('Type "help" to see available commands.')}}catch(p){d(`Error: ${p.message}`)}d("")},W=async S=>{const o=S.length>0?f(S[0]):r;try{await H.getState().navigateTo(o);const u=H.getState().currentEntries;if(u.length===0)return;const k=u.sort((D,p)=>D.type!==p.type?D.type===O.FOLDER?-1:1:D.name.localeCompare(p.name));for(const D of k){const p=D.type===O.FOLDER?"ðŸ“":"ðŸ“„",w=D.type===O.FOLDER?"/":"";d(`${p} ${D.name}${w}`)}}catch{d(`ls: cannot access '${o}': No such file or directory`)}},T=async S=>{if(S.length===0){s("/home/user");return}const o=f(S[0]);try{await H.getState().navigateTo(o),s(o)}catch{d(`cd: ${o}: No such file or directory`)}},C=async S=>{if(S.length===0){d("cat: missing file operand");return}const o=f(S[0]),u=o.substring(0,o.lastIndexOf("/"))||"/",k=o.substring(o.lastIndexOf("/")+1);try{await H.getState().navigateTo(u);const p=H.getState().currentEntries.find(w=>w.name===k&&w.type===O.FILE);if(!p){d(`cat: ${o}: No such file or directory`);return}p.content&&p.content.split(`
`).forEach(A=>d(A))}catch{d(`cat: ${o}: No such file or directory`)}},E=async S=>{if(S.length===0){d("mkdir: missing operand");return}await H.getState().createFolder(S[0])||d(`mkdir: cannot create directory '${S[0]}'`)},I=async S=>{if(S.length===0){d("touch: missing file operand");return}await H.getState().createFile(S[0],"")||d(`touch: cannot create file '${S[0]}'`)},v=async S=>{if(S.length===0){d("rm: missing operand");return}const u=H.getState().currentEntries.find(D=>D.name===S[0]);if(!u){d(`rm: cannot remove '${S[0]}': No such file or directory`);return}await H.getState().deleteEntries([u.id.toString()])||d(`rm: cannot remove '${S[0]}'`)},f=S=>{if(S.startsWith("/"))return S;if(S===".."){const o=r.split("/").filter(u=>u);return o.pop(),"/"+o.join("/")}return S==="."?r:r==="/"?`/${S}`:`${r}/${S}`},y=S=>{if(S.key==="Enter")b(i),c("");else if(S.key==="ArrowUp"){if(S.preventDefault(),x.length>0){const o=l===-1?x.length-1:Math.max(0,l-1);j(o),c(x[o])}}else if(S.key==="ArrowDown"&&(S.preventDefault(),l!==-1)){const o=Math.min(x.length-1,l+1);o===x.length-1?(j(-1),c("")):(j(o),c(x[o]))}};return e.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-green-400 font-mono text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),e.jsx("span",{className:"text-white text-sm font-medium",children:"Terminal"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:"âœ•"})]}),e.jsxs("div",{ref:z,className:"flex-1 p-4 overflow-y-auto",style:{minHeight:"300px"},children:[t.map((S,o)=>e.jsx("div",{className:"whitespace-pre-wrap",children:S},o)),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-400",children:M()}),e.jsx("input",{ref:g,type:"text",value:i,onChange:S=>c(S.target.value),onKeyDown:y,className:"flex-1 bg-transparent border-none outline-none text-green-400 font-mono",autoFocus:!0})]})]})]})};function Qt({window:a,children:r}){const s=m.useRef(null),{closeWindow:t,minimizeWindow:n,maximizeWindow:i,restoreWindow:c,focusWindow:x,moveWindow:h,resizeWindow:l,updateWindowBounds:j}=K(),g=m.useCallback(E=>({x:E==="left"?0:globalThis.innerWidth/2,y:0,width:globalThis.innerWidth/2,height:globalThis.innerHeight}),[]),z=m.useCallback(()=>({x:0,y:0,width:globalThis.innerWidth,height:globalThis.innerHeight}),[]),{isDragging:d,handleMouseDown:M,resizeHandles:b}=$t({bounds:a.bounds,onMove:E=>h(a.id,E),onResize:E=>l(a.id,E),onBoundsChange:E=>j(a.id,E),disabled:a.maximized,resizable:a.resizable,movable:a.movable,minSize:{width:300,height:200}}),W=()=>{a.focused||x(a.id)},T=()=>{a.maximizable&&(a.maximized?c(a.id):i(a.id))};m.useEffect(()=>{if(!d)return;const E=()=>{const I=s.current?.getBoundingClientRect();if(!I)return;const v=globalThis.innerWidth,f=20;if(I.y<=f){const y=z();j(a.id,y),i(a.id);return}if(I.x<=f){const y=g("left");j(a.id,y);return}if(I.x+I.width>=v-f){const y=g("right");j(a.id,y);return}};return document.addEventListener("mouseup",E),()=>document.removeEventListener("mouseup",E)},[d,a.id,g,z,j,i]);const C={position:"fixed",left:a.maximized?64:a.bounds.x,top:a.maximized?48:a.bounds.y,width:a.maximized?"calc(100vw - 64px)":a.bounds.width,height:a.maximized?"calc(100vh - 48px)":a.bounds.height,zIndex:a.zIndex,display:a.visible?"flex":"none",flexDirection:"column",transition:a.maximized?"all 0.2s ease-out":"none",transform:a.minimized?"scale(0.1) translateY(100vh)":"none",opacity:a.minimized?0:1};return a.visible?e.jsxs("div",{ref:s,className:`fixed bg-surface overflow-hidden ${a.focused?"":"opacity-95"} ${a.maximized?"rounded-none":"rounded-xl"}`,style:{...C,boxShadow:a.maximized?"none":"var(--shadow)",border:a.focused?"1px solid rgba(233, 84, 32, 0.3)":"1px solid var(--surface-border)"},onMouseDown:W,children:[e.jsxs("div",{className:`bg-surface border-b border-surface-border px-4 py-3 flex items-center justify-between cursor-move select-none ${a.maximized?"rounded-none":"rounded-t-xl"}`,onMouseDown:a.movable?M:void 0,onDoubleClick:T,style:{background:a.focused?"linear-gradient(180deg, var(--xp-title-blue-mid) 0%, var(--xp-title-blue-light) 100%)":"linear-gradient(180deg, var(--xp-title-inact-dark) 0%, var(--xp-title-inact-light) 100%)",color:a.focused?"#fff":"#234",textShadow:a.focused?"0 1px 0 rgba(0,0,0,.35)":"none"},children:[e.jsx("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:e.jsx("span",{className:"font-bold truncate",style:{fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif',fontSize:12},children:a.title})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a.minimizable&&e.jsx("button",{className:"w-7 h-7 rounded-full hover:bg-yellow-500 hover:bg-opacity-20 flex items-center justify-center transition-all duration-200 group",onClick:E=>{E.stopPropagation(),n(a.id)},title:"Minimize",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 opacity-80 group-hover:opacity-100 flex items-center justify-center",children:e.jsx(ct,{size:8,className:"text-yellow-900 opacity-0 group-hover:opacity-100"})})}),a.maximizable&&e.jsx("button",{className:"w-7 h-7 rounded-full hover:bg-green-500 hover:bg-opacity-20 flex items-center justify-center transition-all duration-200 group",onClick:E=>{E.stopPropagation(),a.maximized?c(a.id):i(a.id)},title:a.maximized?"Restore":"Maximize",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 opacity-80 group-hover:opacity-100 flex items-center justify-center",children:a.maximized?e.jsx(dt,{size:6,className:"text-green-900 opacity-0 group-hover:opacity-100"}):e.jsx(ut,{size:6,className:"text-green-900 opacity-0 group-hover:opacity-100"})})}),a.closable&&e.jsx("button",{className:"w-7 h-7 rounded-full hover:bg-red-500 hover:bg-opacity-20 flex items-center justify-center transition-all duration-200 group",onClick:E=>{E.stopPropagation(),t(a.id)},title:"Close",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 opacity-80 group-hover:opacity-100 flex items-center justify-center",children:e.jsx(se,{size:8,className:"text-red-900 opacity-0 group-hover:opacity-100"})})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",style:{background:"var(--win-surface)"},children:r}),a.resizable&&!a.maximized&&b.map(({handle:E,onMouseDown:I,className:v,style:f})=>e.jsx("div",{className:v,style:f,onMouseDown:I},E))]}):null}function es(){const{windows:a}=K(),{currentWorkspace:r}=q(),s=Object.values(a).filter(t=>t.workspace===r).sort((t,n)=>t.zIndex-n.zIndex);return e.jsx(e.Fragment,{children:s.map(t=>e.jsx(Qt,{window:t,children:e.jsx(ts,{windowId:t.id,appId:t.appId})},t.id))})}function ts({windowId:a,appId:r}){const t={terminal:Gt,textedit:Ut,files:Ht,settings:Xt,calculator:Bt,notes:Yt,imageviewer:Kt,calendar:qt,systemmonitor:Zt}[r];return t?e.jsx(t,{windowId:a}):e.jsx("div",{className:"flex items-center justify-center h-full text-foreground-muted",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"App not found"}),e.jsxs("p",{className:"text-sm",children:['The app "',r,'" could not be loaded.']})]})})}class ss{notifications=[];listeners=[];addNotification(r){const s={...r,id:Date.now().toString(),timestamp:new Date,read:!1};this.notifications.unshift(s),this.notifyListeners(),r.persistent||setTimeout(()=>{this.removeNotification(s.id)},5e3)}removeNotification(r){this.notifications=this.notifications.filter(s=>s.id!==r),this.notifyListeners()}markAsRead(r){const s=this.notifications.find(t=>t.id===r);s&&(s.read=!0,this.notifyListeners())}markAllAsRead(){this.notifications.forEach(r=>r.read=!0),this.notifyListeners()}clearAll(){this.notifications=[],this.notifyListeners()}getNotifications(){return[...this.notifications]}getUnreadCount(){return this.notifications.filter(r=>!r.read).length}subscribe(r){return this.listeners.push(r),()=>{this.listeners=this.listeners.filter(s=>s!==r)}}notifyListeners(){this.listeners.forEach(r=>r(this.getNotifications()))}}const X=new ss,ns=({notification:a,onRemove:r})=>{m.useEffect(()=>{if(!a.persistent){const t=setTimeout(r,5e3);return()=>clearTimeout(t)}},[a.persistent,r]);const s=t=>{switch(t){case"success":return e.jsx(ht,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(xt,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx(mt,{className:"w-5 h-5 text-red-500"});default:return e.jsx(fe,{className:"w-5 h-5 text-blue-500"})}};return e.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm animate-slide-in-right",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:a.icon||s(a.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:a.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.message}),a.actions&&a.actions.length>0&&e.jsx("div",{className:"flex space-x-2 mt-3",children:a.actions.map((t,n)=>e.jsx("button",{onClick:t.action,className:`px-3 py-1 text-xs rounded ${t.primary?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t.label},n))})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 p-1 rounded",children:e.jsx(se,{className:"w-4 h-4"})})]})})},as=()=>{const[a,r]=m.useState([]);return m.useEffect(()=>{const c=X.subscribe(r);return r(X.getNotifications()),c},[]),{notifications:a,addNotification:c=>{X.addNotification(c)},removeNotification:c=>{X.removeNotification(c)},markAsRead:c=>{X.markAsRead(c)},getUnreadCount:()=>X.getUnreadCount()}},rs={success:(a,r,s)=>{X.addNotification({title:a,message:r,type:"success",persistent:!1,...s})},error:(a,r,s)=>{X.addNotification({title:a,message:r,type:"error",persistent:!0,...s})},warning:(a,r,s)=>{X.addNotification({title:a,message:r,type:"warning",persistent:!1,...s})},info:(a,r,s)=>{X.addNotification({title:a,message:r,type:"info",persistent:!1,...s})}},is=()=>{const{notifications:a}=as(),[r,s]=m.useState([]);m.useEffect(()=>{const n=a.filter(i=>!i.read).slice(0,3);s(n)},[a]);const t=n=>{s(i=>i.filter(c=>c.id!==n))};return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(n=>e.jsx(ns,{notification:n,onRemove:()=>t(n.id)},n.id))})},os=()=>{setTimeout(()=>{rs.info("daveOS Ready","Welcome to your WebOS! All systems are operational.",{appId:"system",icon:e.jsx(Fe,{className:"w-5 h-5 text-blue-500"})})},3e3)};function ls({title:a,children:r,isActive:s=!0,onClose:t,onMinimize:n,onMaximize:i,initialPosition:c={x:100,y:100},initialSize:x={width:400,height:300}}){const[h,l]=m.useState(c),[j]=m.useState(x),[g,z]=m.useState(!1),[d,M]=m.useState({x:0,y:0}),b=m.useRef(null),W=T=>{T.target.closest(".window-controls")||(z(!0),M({x:T.clientX-h.x,y:T.clientY-h.y}))};return m.useEffect(()=>{const T=E=>{g&&l({x:E.clientX-d.x,y:E.clientY-d.y})},C=()=>{z(!1)};return g&&(document.addEventListener("mousemove",T),document.addEventListener("mouseup",C)),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",C)}},[g,d]),e.jsxs("div",{ref:b,className:"window fixed shadow-xl",style:{left:`${h.x}px`,top:`${h.y}px`,width:`${j.width}px`,height:`${j.height}px`,border:"3px solid #0831d9",borderRadius:"8px 8px 0 0",zIndex:s?1e3:999},children:[e.jsx("div",{className:`titlebar ${s?"grad-title-active":"grad-title-inactive"} ${g?"select-none":""}`,onMouseDown:W,style:{borderRadius:"6px 6px 0 0",cursor:g?"grabbing":"grab"},children:e.jsxs("div",{className:"flex items-center justify-between h-full px-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"ðŸªŸ"}),e.jsx("span",{className:`${s?"text-white":"text-gray-700"} font-bold`,style:{fontSize:"12px",fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif',textShadow:s?"1px 1px 2px rgba(0,0,0,0.5)":"none"},children:a})]}),e.jsxs("div",{className:"window-controls flex items-center space-x-1",children:[e.jsx("button",{onClick:n,className:"w-5 h-5 flex items-center justify-center btn-xp hover:bg-blue-200",title:"Minimize",children:e.jsx("span",{style:{fontSize:"10px",marginTop:"-4px"},children:"_"})}),e.jsx("button",{onClick:i,className:"w-5 h-5 flex items-center justify-center btn-xp hover:bg-blue-200",title:"Maximize",children:e.jsx("span",{style:{fontSize:"10px"},children:"â–¡"})}),e.jsx("button",{onClick:t,className:"w-5 h-5 flex items-center justify-center hover:bg-red-500 hover:text-white",style:{background:"linear-gradient(180deg, #FF9494 0%, #C84545 100%)",border:"1px solid #A83333",borderRadius:"2px"},title:"Close",children:e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold"},children:"âœ•"})})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",style:{background:"var(--win-surface)",height:"calc(100% - 28px)"},children:r})]})}function cs(){const{settings:a}=G(),{isOverviewOpen:r}=q(),{initialize:s}=H();return m.useEffect(()=>{s(),os();const t=n=>{const{key:i,ctrlKey:c,altKey:x}=n;if(i==="Meta"||i==="Super"){n.preventDefault(),q.getState().toggleOverview();return}if(x&&i==="Tab"){n.preventDefault();return}if(x&&i==="`"){n.preventDefault();return}if(c&&x&&(i==="ArrowLeft"||i==="ArrowRight")){n.preventDefault();const{workspaces:h,currentWorkspace:l,switchToWorkspace:j}=q.getState(),g=h.findIndex(z=>z.id===l);i==="ArrowLeft"&&g>0?j(h[g-1].id):i==="ArrowRight"&&g<h.length-1&&j(h[g+1].id);return}if(i==="Escape"&&r){n.preventDefault(),q.getState().closeOverview();return}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r,s]),m.useEffect(()=>{const t=n=>{n.preventDefault()};return document.addEventListener("contextmenu",t),()=>document.removeEventListener("contextmenu",t)},[]),m.useEffect(()=>{const t=document.documentElement;if(a.theme.mode==="dark")t.classList.add("dark");else if(a.theme.mode==="light")t.classList.remove("dark");else{const i=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.toggle("dark",i)}t.classList.toggle("high-contrast",a.theme.highContrast);const n=document.body;n.classList.remove("font-size-small","font-size-normal","font-size-large","font-size-xl"),n.classList.add(`font-size-${a.theme.fontSize}`),a.theme.reducedMotion?t.style.setProperty("--animation-duration","0.01ms"):t.style.removeProperty("--animation-duration"),t.style.setProperty("--accent",a.theme.accentColor)},[a]),e.jsxs("div",{className:"h-screen w-screen overflow-hidden bg-background text-foreground",children:[e.jsx(It,{}),e.jsx(ls,{title:"About daveOS XP Mode",initialPosition:{x:120,y:120},initialSize:{width:480,height:320},children:e.jsxs("div",{style:{padding:12,fontFamily:'Tahoma, "Segoe UI", system-ui, sans-serif',fontSize:12},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"daveOS XP Mode"})," â€” UI estilo Windows XP (Luna) 100% client-side."]}),e.jsxs("ul",{style:{marginTop:8,listStyle:"disc",paddingLeft:18},children:[e.jsx("li",{children:"Taskbar + Start Menu"}),e.jsx("li",{children:"Ventanas con chrome XP"}),e.jsx("li",{children:"Desktop con iconos"})]})]})}),e.jsx(zt,{}),e.jsx(es,{}),e.jsx(Wt,{}),e.jsx(is,{}),e.jsx("style",{children:`
        /* Custom scrollbar styles */
        .slider {
          background: linear-gradient(to right, var(--accent) 0%, var(--accent) 50%, var(--surface-border) 50%, var(--surface-border) 100%);
        }
        
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: var(--accent);
          cursor: pointer;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .slider::-moz-range-thumb {
          width: 16px;
          height: 16px;
          border-radius: 50%;
          background: var(--accent);
          cursor: pointer;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Dock auto-hide styles */
        .dock-auto-hide {
          transform: translateX(-100%);
          transition: transform 0.3s ease-out;
        }
        
        .dock-auto-hide:hover {
          transform: translateX(0);
        }

        /* Focus styles for accessibility */
        .focus-ring:focus-visible {
          outline: none;
          ring: 2px;
          ring-color: var(--accent);
          ring-offset: 2px;
          ring-offset-color: var(--background);
        }

        /* High contrast mode adjustments */
        .high-contrast {
          --surface-border: currentColor;
        }
        
        .high-contrast .window {
          border-width: 2px;
        }
        
        .high-contrast .btn {
          border-width: 2px;
        }

        /* Reduced motion preferences */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
      `})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(a=>{console.log("SW registered: ",a)}).catch(a=>{console.log("SW registration failed: ",a)})});he.createRoot(document.getElementById("root")).render(e.jsx(Te.StrictMode,{children:e.jsx(cs,{})}));
